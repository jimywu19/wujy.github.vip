<!DOCTYPE html>
<html lang="en" class="color-toggle-hidden">
  <head>
    <meta charset="UTF-8" />
<meta name="referrer" content="no-referrer" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<meta name="color-scheme" content="light dark" />
<meta name="generator" content="Hugo 0.99.1" />


  <meta name="description" content="0. 前言     A Bite of Python，也可叫作“咬一口Python”，寓意着Python的冰山一角，包含着作者这几年学Python时积累的一些知识和经验，文章中包含了许多快速简洁的例子，方便让读者了解到Python中存在的一些概念，然后去自行拓展。
1. 基础     Python是一门解释型的高级编程语言，由Guido van Rossum于1989年开始编写，并在1991年发布了第一版。Python的特点是代码简洁而且可读性强，使用空格缩进来划分代码块。
1.0 安装     用浏览器访问官网的下载页面Download Python，选择合适的版本下载安装。
命令行安装：
Mac:
$ brew install python3 Debian&amp;Ubuntu:
$ sudo apt-get install python3 1.1 解释器     Python的官方解释器是CPython，也就是我们通常讨论的Python的实现，它是用C编写的，负责将编写好的Python代码翻译并执行。
除此之外，Python还有许多实现版本：
 PyPy，用rPython实现的Python解释器，使用了JIT编译技术，因此执行速度通常比C实现的CPython还要快。 Jython，一个用Java实现的Python解释器。 IronPython，一个用.NET实现的Python解释器。  1.2 语法     1.2.0 缩进     不同于一些语言使用花括号的方式来明确代码块，Python用缩进来表示代码的层级（通常是四个空格，最好不要用tab）
x = 75 if x &gt;= 60:  if x &gt; 80:  print(&#39;A&#39;)  else:  print(&#39;B&#39;) else:  print(&#39;C&#39;) # 75 1." />

    <title>A bit of python | Jimywu&#39;s Hugo Site</title>

    <link rel="icon" type="image/svg+xml" href="/favicon/favicon.svg" />
<link
  rel="icon"
  type="image/png"
  sizes="32x32"
  href="/favicon/favicon-32x32.png"
/>
<link
  rel="icon"
  type="image/png"
  sizes="16x16"
  href="/favicon/favicon-16x16.png"
/>

    

    
  <meta
    property="og:title"
    content="A bit of python"
  />
  <meta property="og:site_name" content="Jimywu's Hugo Site" />
  <meta property="og:description" content="0. 前言     A Bite of Python，也可叫作“咬一口Python”，寓意着Python的冰山一角，包含着作者这几年学Python时积累的一些知识和经验，文章中包含了许多快速简洁的例子，方便让读者了解到Python中存在的一些概念，然后去自行拓展。
1. 基础     Python是一门解释型的高级编程语言，由Guido van Rossum于1989年开始编写，并在1991年发布了第一版。Python的特点是代码简洁而且可读性强，使用空格缩进来划分代码块。
1.0 安装     用浏览器访问官网的下载页面Download Python，选择合适的版本下载安装。
命令行安装：
Mac:
$ brew install python3 Debian&amp;Ubuntu:
$ sudo apt-get install python3 1.1 解释器     Python的官方解释器是CPython，也就是我们通常讨论的Python的实现，它是用C编写的，负责将编写好的Python代码翻译并执行。
除此之外，Python还有许多实现版本：
 PyPy，用rPython实现的Python解释器，使用了JIT编译技术，因此执行速度通常比C实现的CPython还要快。 Jython，一个用Java实现的Python解释器。 IronPython，一个用.NET实现的Python解释器。  1.2 语法     1.2.0 缩进     不同于一些语言使用花括号的方式来明确代码块，Python用缩进来表示代码的层级（通常是四个空格，最好不要用tab）
x = 75 if x &gt;= 60:  if x &gt; 80:  print(&#39;A&#39;)  else:  print(&#39;B&#39;) else:  print(&#39;C&#39;) # 75 1." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://blog.wujy.vip/posts/a_bit_of_python/" />

<meta property="article:section" content="Posts" />
    <meta
      property="article:published_time"
      content="2022-05-19T10:26:33+08:00"
    />
    <meta
      property="article:modified_time"
      content="2022-05-19T10:26:33+08:00"
    />


  <meta name="twitter:card" content="summary" />
<meta name="twitter:title" content="A bit of python" />
  <meta name="twitter:description" content="0. 前言     A Bite of Python，也可叫作“咬一口Python”，寓意着Python的冰山一角，包含着作者这几年学Python时积累的一些知识和经验，文章中包含了许多快速简洁的例子，方便让读者了解到Python中存在的一些概念，然后去自行拓展。
1. 基础     Python是一门解释型的高级编程语言，由Guido van Rossum于1989年开始编写，并在1991年发布了第一版。Python的特点是代码简洁而且可读性强，使用空格缩进来划分代码块。
1.0 安装     用浏览器访问官网的下载页面Download Python，选择合适的版本下载安装。
命令行安装：
Mac:
$ brew install python3 Debian&amp;Ubuntu:
$ sudo apt-get install python3 1.1 解释器     Python的官方解释器是CPython，也就是我们通常讨论的Python的实现，它是用C编写的，负责将编写好的Python代码翻译并执行。
除此之外，Python还有许多实现版本：
 PyPy，用rPython实现的Python解释器，使用了JIT编译技术，因此执行速度通常比C实现的CPython还要快。 Jython，一个用Java实现的Python解释器。 IronPython，一个用.NET实现的Python解释器。  1.2 语法     1.2.0 缩进     不同于一些语言使用花括号的方式来明确代码块，Python用缩进来表示代码的层级（通常是四个空格，最好不要用tab）
x = 75 if x &gt;= 60:  if x &gt; 80:  print(&#39;A&#39;)  else:  print(&#39;B&#39;) else:  print(&#39;C&#39;) # 75 1." />


  <script type="application/ld+json">
  {
      "@context": "http://schema.org",
      "@type": "TechArticle",
      "articleSection": "Posts",
      "name": "A bit of python",
      "url" : "https://blog.wujy.vip/posts/a_bit_of_python/",
      "headline": "A bit of python",
      "description": "0. 前言     A Bite of Python，也可叫作“咬一口Python”，寓意着Python的冰山一角，包含着作者这几年学Python时积累的一些知识和经验，文章中包含了许多快速简洁的例子，方便让读者了解到Python中存在的一些概念，然后去自行拓展。\n1. 基础     Python是一门解释型的高级编程语言，由Guido van Rossum于1989年开始编写，并在1991年发布了第一版。Python的特点是代码简洁而且可读性强，使用空格缩进来划分代码块。\n1.0 安装     用浏览器访问官网的下载页面Download Python，选择合适的版本下载安装。\n命令行安装：\nMac:\n$ brew install python3 Debian\u0026Ubuntu:\n$ sudo apt-get install python3 1.1 解释器     Python的官方解释器是CPython，也就是我们通常讨论的Python的实现，它是用C编写的，负责将编写好的Python代码翻译并执行。\n除此之外，Python还有许多实现版本：\n PyPy，用rPython实现的Python解释器，使用了JIT编译技术，因此执行速度通常比C实现的CPython还要快。 Jython，一个用Java实现的Python解释器。 IronPython，一个用.NET实现的Python解释器。  1.2 语法     1.2.0 缩进     不同于一些语言使用花括号的方式来明确代码块，Python用缩进来表示代码的层级（通常是四个空格，最好不要用tab）\nx = 75 if x \u003e= 60:  if x \u003e 80:  print(\u0027A\u0027)  else:  print(\u0027B\u0027) else:  print(\u0027C\u0027) # 75 1.",
      "wordCount" : "4586",
      "inLanguage": "en",
      "isFamilyFriendly": "true",
      "mainEntityOfPage": {
          "@type": "WebPage",
          "@id": "https://blog.wujy.vip/posts/a_bit_of_python/"
      },
      "copyrightHolder" : "Jimywu\u0027s Hugo Site",
      "copyrightYear" : "2022",
      "dateCreated": "2022-05-19T10:26:33.00Z",
      "datePublished": "2022-05-19T10:26:33.00Z",
      "dateModified": "2022-05-19T10:26:33.00Z",
      "publisher":{
          "@type":"Organization",
          "name": "Jimywu's Hugo Site",
          "url": "https://blog.wujy.vip",
          "logo": {
              "@type": "ImageObject",
              "url": "https://blog.wujy.vip/brand.svg",
              "width":"32",
              "height":"32"
          }
      }
  }
  </script>


    <script src="/js/main-4f8bb62c.bundle.min.js"></script>

<link
  rel="preload"
  as="font"
  href="/fonts/Metropolis.woff2"
  type="font/woff2"
  crossorigin="anonymous"
/>
<link
  rel="preload"
  as="font"
  href="/fonts/LiberationSans.woff2"
  type="font/woff2"
  crossorigin="anonymous"
/>

<link
  rel="preload"
  href="/main-16edcf60.min.css"
  as="style"
/>
<link
  rel="stylesheet"
  href="/main-16edcf60.min.css"
  media="all"
/>

<link
  rel="preload"
  href="/mobile-467819cb.min.css"
  as="style"
/>
<link
  rel="stylesheet"
  href="/mobile-467819cb.min.css"
  media="screen and (max-width: 45rem)"
/>

<link
  rel="preload"
  href="/print-19966b38.min.css"
  as="style"
/>
<link
  rel="stylesheet"
  href="/print-19966b38.min.css"
  media="print"
/>

<link
  rel="preload"
  href="/custom.css"
  as="style"
/>
<link
  rel="stylesheet"
  href="/custom.css"
  media="all"
/>
  <link href="https://blog.wujy.vip/posts/a_bit_of_python/" rel="canonical" type="text/html" />

<!-- Made with Geekdoc theme https://github.com/thegeeklab/hugo-geekdoc -->

    

  </head>

  <body itemscope itemtype="https://schema.org/WebPage">
    
  <!-- geekdoc include: sprites/geekdoc.svg -->
  <svg class="svg-sprite" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><defs><svg viewBox="-7.27 -7.27 38.55 38.55" id="gdoc_arrow_back" xmlns="http://www.w3.org/2000/svg"><path d="M24 10.526v2.947H5.755l8.351 8.421-2.105 2.105-12-12 12-12 2.105 2.105-8.351 8.421H24z"/></svg><svg viewBox="-7.27 -7.27 38.55 38.55" id="gdoc_arrow_left_alt" xmlns="http://www.w3.org/2000/svg"><path d="M5.965 10.526V6.035L0 12l5.965 5.965v-4.491H24v-2.947H5.965z"/></svg><svg viewBox="-7.27 -7.27 38.55 38.55" id="gdoc_arrow_right_alt" xmlns="http://www.w3.org/2000/svg"><path d="M18.035 10.526V6.035L24 12l-5.965 5.965v-4.491H0v-2.947h18.035z"/></svg><svg viewBox="-7.27 -7.27 42.55 42.55" id="gdoc_bitbucket" xmlns="http://www.w3.org/2000/svg"><path d="M15.905 13.355c.189 1.444-1.564 2.578-2.784 1.839-1.375-.602-1.375-2.784-.034-3.403 1.151-.705 2.818.223 2.818 1.564zm1.907-.361c-.309-2.44-3.076-4.056-5.328-3.042-1.426.636-2.389 2.148-2.32 3.747.086 2.097 2.08 3.815 4.176 3.626s3.729-2.234 3.472-4.331zm4.108-9.315c-.756-.997-2.045-1.169-3.179-1.358-3.214-.516-6.513-.533-9.727.034-1.066.172-2.269.361-2.939 1.323 1.1 1.031 2.664 1.186 4.073 1.358 2.544.327 5.156.344 7.699.017 1.426-.172 3.008-.309 4.073-1.375zm.979 17.788c-.481 1.684-.206 3.953-1.994 4.932-3.076 1.701-6.806 1.89-10.191 1.289-1.787-.327-3.884-.894-4.864-2.578-.43-1.65-.705-3.334-.98-5.018l.103-.275.309-.155c5.121 3.386 12.288 3.386 17.427 0 .808.241.206 1.22.189 1.805zM26.01 4.951c-.584 3.764-1.255 7.51-1.908 11.257-.189 1.1-1.255 1.719-2.148 2.183-3.214 1.615-6.96 1.89-10.483 1.512-2.389-.258-4.829-.894-6.771-2.389-.911-.705-.911-1.908-1.083-2.922-.602-3.523-1.289-7.046-1.719-10.604.206-1.547 1.942-2.217 3.231-2.698C6.848.654 8.686.362 10.508.19c3.884-.378 7.854-.241 11.618.859 1.341.395 2.784.945 3.695 2.097.412.533.275 1.203.189 1.805z"/></svg><svg viewBox="-7.27 -7.27 38.55 38.55" id="gdoc_bookmark" xmlns="http://www.w3.org/2000/svg"><path d="M15.268 4.392q.868 0 1.532.638t.664 1.506v17.463l-7.659-3.268-7.608 3.268V6.536q0-.868.664-1.506t1.532-.638h10.876zm4.34 14.144V4.392q0-.868-.638-1.532t-1.506-.664H6.537q0-.868.664-1.532T8.733 0h10.876q.868 0 1.532.664t.664 1.532v17.412z"/></svg><svg viewBox="-7.27 -7.27 42.55 42.55" id="gdoc_brightness_auto" xmlns="http://www.w3.org/2000/svg"><path d="M16.846 18.938h2.382L15.22 7.785h-2.44L8.772 18.938h2.382l.871-2.44h3.95zm7.087-9.062L27.999 14l-4.066 4.124v5.809h-5.809L14 27.999l-4.124-4.066H4.067v-5.809L.001 14l4.066-4.124V4.067h5.809L14 .001l4.124 4.066h5.809v5.809zm-11.385 4.937L14 10.282l1.452 4.531h-2.904z"/></svg><svg viewBox="-7.27 -7.27 42.55 42.55" id="gdoc_brightness_dark" xmlns="http://www.w3.org/2000/svg"><path d="M14 21.435q3.079 0 5.257-2.178T21.435 14t-2.178-5.257T14 6.565q-1.51 0-3.079.697 1.917.871 3.108 2.701T15.22 14t-1.191 4.037-3.108 2.701q1.568.697 3.079.697zm9.933-11.559L27.999 14l-4.066 4.124v5.809h-5.809L14 27.999l-4.124-4.066H4.067v-5.809L.001 14l4.066-4.124V4.067h5.809L14 .001l4.124 4.066h5.809v5.809z"/></svg><svg viewBox="-7.27 -7.27 42.55 42.55" id="gdoc_brightness_light" xmlns="http://www.w3.org/2000/svg"><path d="M14 21.435q3.079 0 5.257-2.178T21.435 14t-2.178-5.257T14 6.565 8.743 8.743 6.565 14t2.178 5.257T14 21.435zm9.933-3.311v5.809h-5.809L14 27.999l-4.124-4.066H4.067v-5.809L.001 14l4.066-4.124V4.067h5.809L14 .001l4.124 4.066h5.809v5.809L27.999 14z"/></svg><svg viewBox="-7.27 -7.27 42.55 42.55" id="gdoc_check" xmlns="http://www.w3.org/2000/svg"><path d="M8.885 20.197L25.759 3.323l2.24 2.24L8.885 24.677 0 15.792l2.24-2.24z"/></svg><svg viewBox="-7.27 -7.27 42.55 42.55" id="gdoc_check_circle_outline" xmlns="http://www.w3.org/2000/svg"><path d="M14 25.239q4.601 0 7.92-3.319T25.239 14 21.92 6.08 14 2.761 6.08 6.08 2.761 14t3.319 7.92T14 25.239zM14 0q5.784 0 9.892 4.108T28 14t-4.108 9.892T14 28t-9.892-4.108T0 14t4.108-9.892T14 0zm6.441 7.822l1.972 1.972-11.239 11.239L4.207 14l1.972-1.972 4.995 4.995z"/></svg><svg viewBox="-7.27 -7.27 42.55 42.55" id="gdoc_cloud_off" xmlns="http://www.w3.org/2000/svg"><path d="M9.023 10.5H7q-1.914 0-3.281 1.395t-1.367 3.309 1.367 3.281T7 19.852h11.375zM3.5 4.976l1.477-1.477L24.5 23.022l-1.477 1.477-2.352-2.297H6.999q-2.898 0-4.949-2.051t-2.051-4.949q0-2.844 1.969-4.867t4.758-2.133zm19.086 5.578q2.242.164 3.828 1.832T28 16.351q0 3.008-2.461 4.758l-1.695-1.695q1.805-.984 1.805-3.063 0-1.422-1.039-2.461t-2.461-1.039h-1.75v-.602q0-2.68-1.859-4.539t-4.539-1.859q-1.531 0-2.953.711l-1.75-1.695Q11.431 3.5 14.001 3.5q2.953 0 5.496 2.078t3.09 4.977z"/></svg><svg viewBox="-7.27 -7.27 42.55 42.55" id="gdoc_code" xmlns="http://www.w3.org/2000/svg"><path d="M9.917 24.5a1.75 1.75 0 10-3.501.001 1.75 1.75 0 003.501-.001zm0-21a1.75 1.75 0 10-3.501.001A1.75 1.75 0 009.917 3.5zm11.666 2.333a1.75 1.75 0 10-3.501.001 1.75 1.75 0 003.501-.001zm1.75 0a3.502 3.502 0 01-1.75 3.026c-.055 6.581-4.721 8.039-7.82 9.023-2.898.911-3.846 1.349-3.846 3.117v.474a3.502 3.502 0 011.75 3.026c0 1.932-1.568 3.5-3.5 3.5s-3.5-1.568-3.5-3.5c0-1.294.711-2.424 1.75-3.026V6.526A3.502 3.502 0 014.667 3.5c0-1.932 1.568-3.5 3.5-3.5s3.5 1.568 3.5 3.5a3.502 3.502 0 01-1.75 3.026v9.06c.93-.456 1.914-.766 2.807-1.039 3.391-1.075 5.323-1.878 5.359-5.687a3.502 3.502 0 01-1.75-3.026c0-1.932 1.568-3.5 3.5-3.5s3.5 1.568 3.5 3.5z"/></svg><svg viewBox="-7.27 -7.27 42.55 42.55" id="gdoc_copy" xmlns="http://www.w3.org/2000/svg"><path d="M23.502 25.438V7.626H9.562v17.812h13.94zm0-20.315q1.013 0 1.787.745t.774 1.757v17.812q0 1.013-.774 1.787t-1.787.774H9.562q-1.013 0-1.787-.774t-.774-1.787V7.625q0-1.013.774-1.757t1.787-.745h13.94zM19.689 0v2.562H4.438v17.812H1.936V2.562q0-1.013.745-1.787T4.438.001h15.251z"/></svg><svg viewBox="-7.27 -7.27 42.55 42.55" id="gdoc_dangerous" xmlns="http://www.w3.org/2000/svg"><path d="M21.802 19.833L15.969 14l5.833-5.833-1.969-1.969L14 12.031 8.167 6.198 6.198 8.167 12.031 14l-5.833 5.833 1.969 1.969L14 15.969l5.833 5.833zM19.833 0L28 8.167v11.666L19.833 28H8.167L0 19.833V8.167L8.167 0h11.666z"/></svg><svg viewBox="-7.27 -7.27 46.55 46.55" id="gdoc_date" xmlns="http://www.w3.org/2000/svg"><path d="M27.192 28.844V11.192H4.808v17.652h22.384zm0-25.689q1.277 0 2.253.976t.976 2.253v22.459q0 1.277-.976 2.216t-2.253.939H4.808q-1.352 0-2.291-.901t-.939-2.253V6.385q0-1.277.939-2.253t2.291-.976h1.577V.001h3.23v3.155h12.769V.001h3.23v3.155h1.577zm-3.155 11.267v3.155h-3.23v-3.155h3.23zm-6.46 0v3.155h-3.155v-3.155h3.155zm-6.384 0v3.155h-3.23v-3.155h3.23z"/></svg><svg viewBox="-7.27 -7.27 46.55 46.55" id="gdoc_download" xmlns="http://www.w3.org/2000/svg"><path d="M2.866 28.209h26.269v3.79H2.866v-3.79zm26.268-16.925L16 24.418 2.866 11.284h7.493V.001h11.283v11.283h7.493z"/></svg><svg viewBox="-7.27 -7.27 46.55 46.55" id="gdoc_email" xmlns="http://www.w3.org/2000/svg"><path d="M28.845 9.615v-3.23L16 14.422 3.155 6.385v3.23L16 17.577zm0-6.46q1.277 0 2.216.977T32 6.385v19.23q0 1.277-.939 2.253t-2.216.977H3.155q-1.277 0-2.216-.977T0 25.615V6.385q0-1.277.939-2.253t2.216-.977h25.69z"/></svg><svg viewBox="-7.27 -7.27 42.55 42.55" id="gdoc_error_outline" xmlns="http://www.w3.org/2000/svg"><path d="M14 25.239q4.601 0 7.92-3.319T25.239 14 21.92 6.08 14 2.761 6.08 6.08 2.761 14t3.319 7.92T14 25.239zM14 0q5.784 0 9.892 4.108T28 14t-4.108 9.892T14 28t-9.892-4.108T0 14t4.108-9.892T14 0zm-1.38 6.967h2.761v8.413H12.62V6.967zm0 11.239h2.761v2.826H12.62v-2.826z"/></svg><svg viewBox="-7.27 -7.27 42.55 42.55" id="gdoc_fire" xmlns="http://www.w3.org/2000/svg"><path d="M17.689 21.998q-.32.32-.8.576t-.864.384q-1.152.384-2.272.032t-1.888-.992q-.128-.128-.096-.256t.16-.192q1.216-.384 1.92-1.216t.96-1.792q.192-.896-.064-1.728t-.384-1.728q-.128-.704-.096-1.376t.288-1.312q0-.128.128-.128t.192.064q.384.832.992 1.472t1.28 1.216 1.216 1.248.672 1.568q.064.384.064.704.064.96-.32 1.92t-1.088 1.536zm3.84-10.944q-.768-.704-1.6-1.28t-1.6-1.344q-1.536-1.536-2.016-3.584t.16-4.16q.128-.32-.096-.544t-.544-.096q-.768.32-1.44.768t-1.312.896q-1.984 1.664-3.136 3.936T8.633 10.51t.8 5.088q0 .128.032.256t.032.256q0 .576-.512.832t-1.024-.192q-.128-.192-.192-.32-1.024-1.28-1.376-2.912t-.096-3.232q.064-.384-.288-.576t-.608.128q-1.28 1.664-1.856 3.68t-.448 4.064q0 .576.096 1.184t.288 1.184q.448 1.536 1.216 2.816 1.216 2.048 3.264 3.424t4.416 1.696q2.496.32 5.024-.256t4.448-2.304q1.408-1.344 2.208-3.104t.864-3.68-.704-3.712q-.064-.128-.096-.224t-.096-.224q-.576-1.088-1.28-1.984-.256-.384-.544-.704t-.672-.64z"/></svg><svg viewBox="-7.27 -7.27 42.55 42.55" id="gdoc_git" xmlns="http://www.w3.org/2000/svg"><path d="M27.472 12.753L15.247.529a1.803 1.803 0 00-2.55 0l-2.84 2.84 2.137 2.137a2.625 2.625 0 013.501 3.501l3.499 3.499a2.625 2.625 0 11-1.237 1.237l-3.499-3.499c-.083.04-.169.075-.257.106v7.3a2.626 2.626 0 11-1.75 0v-7.3a2.626 2.626 0 01-1.494-3.607L8.62 4.606l-8.09 8.09a1.805 1.805 0 000 2.551l12.225 12.224a1.803 1.803 0 002.55 0l12.168-12.168a1.805 1.805 0 000-2.551z"/></svg><svg viewBox="-7.27 -7.27 46.55 46.55" id="gdoc_github" xmlns="http://www.w3.org/2000/svg"><path d="M16 .394c8.833 0 15.999 7.166 15.999 15.999 0 7.062-4.583 13.062-10.937 15.187-.813.146-1.104-.354-1.104-.771 0-.521.021-2.25.021-4.396 0-1.5-.5-2.458-1.083-2.958 3.562-.396 7.312-1.75 7.312-7.896 0-1.75-.625-3.167-1.646-4.291.167-.417.708-2.042-.167-4.25-1.333-.417-4.396 1.646-4.396 1.646a15.032 15.032 0 00-8 0S8.937 6.602 7.603 7.018c-.875 2.208-.333 3.833-.167 4.25-1.021 1.125-1.646 2.542-1.646 4.291 0 6.125 3.729 7.5 7.291 7.896-.458.417-.875 1.125-1.021 2.146-.917.417-3.25 1.125-4.646-1.333-.875-1.521-2.458-1.646-2.458-1.646-1.562-.021-.104.979-.104.979 1.042.479 1.771 2.333 1.771 2.333.938 2.854 5.396 1.896 5.396 1.896 0 1.333.021 2.583.021 2.979 0 .417-.292.917-1.104.771C4.582 29.455-.001 23.455-.001 16.393-.001 7.56 7.165.394 15.998.394zM6.063 23.372c.042-.083-.021-.187-.146-.25-.125-.042-.229-.021-.271.042-.042.083.021.187.146.25.104.062.229.042.271-.042zm.646.709c.083-.062.062-.208-.042-.333-.104-.104-.25-.146-.333-.062-.083.062-.062.208.042.333.104.104.25.146.333.062zm.625.937c.104-.083.104-.25 0-.396-.083-.146-.25-.208-.354-.125-.104.062-.104.229 0 .375s.271.208.354.146zm.875.875c.083-.083.042-.271-.083-.396-.146-.146-.333-.167-.417-.062-.104.083-.062.271.083.396.146.146.333.167.417.062zm1.187.521c.042-.125-.083-.271-.271-.333-.167-.042-.354.021-.396.146s.083.271.271.312c.167.062.354 0 .396-.125zm1.313.104c0-.146-.167-.25-.354-.229-.187 0-.333.104-.333.229 0 .146.146.25.354.229.187 0 .333-.104.333-.229zm1.208-.208c-.021-.125-.187-.208-.375-.187-.187.042-.312.167-.292.312.021.125.187.208.375.167s.312-.167.292-.292z"/></svg><svg viewBox="-7.27 -7.27 42.55 42.55" id="gdoc_gitlab" xmlns="http://www.w3.org/2000/svg"><path d="M1.629 11.034L14 26.888.442 17.048a1.09 1.09 0 01-.39-1.203l1.578-4.811zm7.217 0h10.309l-5.154 15.854zM5.753 1.475l3.093 9.559H1.63l3.093-9.559a.548.548 0 011.031 0zm20.618 9.559l1.578 4.811c.141.437-.016.922-.39 1.203l-13.558 9.84 12.371-15.854zm0 0h-7.216l3.093-9.559a.548.548 0 011.031 0z"/></svg><svg viewBox="-7.27 -7.27 46.55 46.55" id="gdoc_heart" xmlns="http://www.w3.org/2000/svg"><path d="M16 29.714a1.11 1.11 0 01-.786-.321L4.072 18.643c-.143-.125-4.071-3.714-4.071-8 0-5.232 3.196-8.357 8.535-8.357 3.125 0 6.053 2.464 7.464 3.857 1.411-1.393 4.339-3.857 7.464-3.857 5.339 0 8.535 3.125 8.535 8.357 0 4.286-3.928 7.875-4.089 8.035L16.785 29.392c-.214.214-.5.321-.786.321z"/></svg><svg viewBox="-7.27 -7.27 42.55 42.55" id="gdoc_home" xmlns="http://www.w3.org/2000/svg"><path d="M24.003 15.695v8.336c0 .608-.504 1.111-1.111 1.111h-6.669v-6.669h-4.446v6.669H5.108a1.119 1.119 0 01-1.111-1.111v-8.336c0-.035.017-.069.017-.104L14 7.359l9.986 8.232a.224.224 0 01.017.104zm3.873-1.198l-1.077 1.285a.578.578 0 01-.365.191h-.052a.547.547 0 01-.365-.122L14 5.831 1.983 15.851a.594.594 0 01-.417.122.578.578 0 01-.365-.191L.124 14.497a.57.57 0 01.069-.781L12.679 3.314c.729-.608 1.91-.608 2.64 0l4.237 3.543V3.471c0-.313.243-.556.556-.556h3.334c.313 0 .556.243.556.556v7.085l3.803 3.161c.226.191.26.556.069.781z"/></svg><svg viewBox="-7.27 -7.27 42.55 42.55" id="gdoc_info_outline" xmlns="http://www.w3.org/2000/svg"><path d="M12.62 9.793V6.967h2.761v2.826H12.62zM14 25.239q4.601 0 7.92-3.319T25.239 14 21.92 6.08 14 2.761 6.08 6.08 2.761 14t3.319 7.92T14 25.239zM14 0q5.784 0 9.892 4.108T28 14t-4.108 9.892T14 28t-9.892-4.108T0 14t4.108-9.892T14 0zm-1.38 21.033V12.62h2.761v8.413H12.62z"/></svg><svg viewBox="-7.27 -7.27 42.55 42.55" id="gdoc_keyboard_arrow_down" xmlns="http://www.w3.org/2000/svg"><path d="M3.281 5.36L14 16.079 24.719 5.36 28 8.641l-14 14-14-14z"/></svg><svg viewBox="-7.27 -7.27 46.55 46.55" id="gdoc_keyboard_arrow_left" xmlns="http://www.w3.org/2000/svg"><path d="M25.875 28.25L22.125 32 6.126 16.001 22.125.002l3.75 3.75-12.25 12.25z"/></svg><svg viewBox="-7.27 -7.27 46.55 46.55" id="gdoc_keyboard_arrow_right" xmlns="http://www.w3.org/2000/svg"><path d="M6.125 28.25L18.375 16 6.125 3.75 9.875 0l15.999 15.999L9.875 31.998z"/></svg><svg viewBox="-7.27 -7.27 42.55 42.55" id="gdoc_keyboard_arrow_up" xmlns="http://www.w3.org/2000/svg"><path d="M24.719 22.64L14 11.921 3.281 22.64 0 19.359l14-14 14 14z"/></svg><svg viewBox="-7.27 -7.27 42.55 42.55" id="gdoc_language" xmlns="http://www.w3.org/2000/svg"><path d="M20.112 16.826h4.732q.394-1.84.394-2.826t-.394-2.826h-4.732q.197 1.38.197 2.826t-.197 2.826zm-2.497 7.756q1.643-.526 3.418-2.005t2.695-2.991h-4.141q-.657 2.629-1.972 4.995zm-.329-7.756q.197-1.38.197-2.826t-.197-2.826h-6.573q-.197 1.38-.197 2.826t.197 2.826h6.573zM14 25.173q1.84-2.695 2.695-5.587h-5.39q.854 2.892 2.695 5.587zM8.413 8.413q.789-2.826 1.972-4.995-1.643.526-3.451 2.005T4.272 8.414h4.141zM4.272 19.587q.854 1.512 2.662 2.991t3.451 2.005q-1.315-2.366-1.972-4.995H4.272zm-1.117-2.761h4.732Q7.69 15.446 7.69 14t.197-2.826H3.155q-.394 1.84-.394 2.826t.394 2.826zM14 2.826q-1.84 2.695-2.695 5.587h5.39Q15.841 5.521 14 2.826zm9.727 5.587q-.92-1.512-2.695-2.991t-3.418-2.005q1.183 2.169 1.972 4.995h4.141zM14 0q5.784 0 9.892 4.108T28 14t-4.108 9.892T14 28t-9.892-4.108T0 14t4.108-9.892T14 0z"/></svg><svg viewBox="-7.27 -7.27 46.55 46.55" id="gdoc_link" xmlns="http://www.w3.org/2000/svg"><path d="M24.037 7.963q3.305 0 5.634 2.366T32 16t-2.329 5.671-5.634 2.366h-6.46v-3.08h6.46q2.028 0 3.493-1.465t1.465-3.493-1.465-3.493-3.493-1.465h-6.46v-3.08h6.46zM9.615 17.578v-3.155h12.77v3.155H9.615zM3.005 16q0 2.028 1.465 3.493t3.493 1.465h6.46v3.08h-6.46q-3.305 0-5.634-2.366T0 16.001t2.329-5.671 5.634-2.366h6.46v3.08h-6.46q-2.028 0-3.493 1.465t-1.465 3.493z"/></svg><svg viewBox="-7.27 -7.27 46.55 46.55" id="gdoc_menu" xmlns="http://www.w3.org/2000/svg"><path d="M.001 5.334h31.998v3.583H.001V5.334zm0 12.416v-3.5h31.998v3.5H.001zm0 8.916v-3.583h31.998v3.583H.001z"/></svg><svg viewBox="-7.27 -7.27 42.55 42.55" id="gdoc_notification" xmlns="http://www.w3.org/2000/svg"><path d="M22.615 19.384l2.894 2.894v1.413H2.49v-1.413l2.894-2.894V12.25q0-3.365 1.716-5.856t4.745-3.231v-1.01q0-.875.606-1.514T13.999 0t1.548.639.606 1.514v1.01q3.029.74 4.745 3.231t1.716 5.856v7.134zM14 27.999q-1.211 0-2.053-.808t-.841-2.019h5.788q0 1.144-.875 1.986T14 27.999z"/></svg><svg viewBox="-7.27 -7.27 42.55 42.55" id="gdoc_path" xmlns="http://www.w3.org/2000/svg"><path d="M28 12.62h-9.793V8.414h-2.826v11.173h2.826v-4.206H28V26.62h-9.793v-4.206H12.62v-14H9.794v4.206H.001V1.381h9.793v4.206h8.413V1.381H28V12.62z"/></svg><svg viewBox="-7.27 -7.27 46.55 46.55" id="gdoc_person" xmlns="http://www.w3.org/2000/svg"><path d="M16 20.023q5.052 0 10.526 2.199t5.473 5.754v4.023H0v-4.023q0-3.555 5.473-5.754t10.526-2.199zM16 16q-3.275 0-5.614-2.339T8.047 8.047t2.339-5.661T16 0t5.614 2.386 2.339 5.661-2.339 5.614T16 16z"/></svg><svg viewBox="-7.27 -7.27 46.55 46.55" id="gdoc_search" xmlns="http://www.w3.org/2000/svg"><path d="M11.925 20.161q3.432 0 5.834-2.402t2.402-5.834-2.402-5.834-5.834-2.402-5.834 2.402-2.402 5.834 2.402 5.834 5.834 2.402zm10.981 0L32 29.255 29.255 32l-9.094-9.094v-1.458l-.515-.515q-3.26 2.831-7.721 2.831-4.976 0-8.45-3.432T.001 11.925t3.474-8.45 8.45-3.474 8.407 3.474 3.432 8.45q0 1.802-.858 4.075t-1.973 3.646l.515.515h1.458z"/></svg><svg viewBox="-7.27 -7.27 42.55 42.55" id="gdoc_shield" xmlns="http://www.w3.org/2000/svg"><path d="M22.167 15.166V3.5h-8.166v20.726c.93-.492 2.424-1.349 3.883-2.497 1.95-1.531 4.284-3.919 4.284-6.562zm3.499-13.999v14c0 7.674-10.737 12.523-11.192 12.724-.146.073-.31.109-.474.109s-.328-.036-.474-.109c-.456-.201-11.192-5.049-11.192-12.724v-14C2.334.529 2.863 0 3.501 0H24.5c.638 0 1.167.529 1.167 1.167z"/></svg><svg viewBox="-7.27 -7.27 42.55 42.55" id="gdoc_star" xmlns="http://www.w3.org/2000/svg"><path d="M14 22.052L5.324 27.31l2.3-9.859L0 10.813l10.056-.854L14 .692l3.944 9.267L28 10.813l-7.624 6.638 2.3 9.859z"/></svg><svg viewBox="-7.27 -7.27 42.55 42.55" id="gdoc_tag" xmlns="http://www.w3.org/2000/svg"><path d="M17.52 17.52v-7.041h-7.041v7.041h7.041zM28 10.479h-7.041v7.041H28v3.439h-7.041V28H17.52v-7.041h-7.041V28H7.04v-7.041H-.001V17.52H7.04v-7.041H-.001V7.04H7.04V-.001h3.439V7.04h7.041V-.001h3.439V7.04H28v3.439z"/></svg><svg viewBox="-7.27 -7.27 46.55 46.55" id="gdoc_timer" xmlns="http://www.w3.org/2000/svg"><path d="M16 29q4.428 0 7.536-3.143t3.107-7.571-3.107-7.536T16 7.643 8.464 10.75t-3.107 7.536 3.107 7.571T16 29zM26.714 9.786q1.214 1.571 2.107 4.036t.893 4.464q0 5.643-4 9.678T16 32t-9.714-4.036-4-9.678 4-9.678T16 4.572q1.929 0 4.464.929t4.107 2.143l2.143-2.214q1.143.929 2.143 2.143zM14.5 19.857v-9.143h3v9.143h-3zM20.571.001v3.071h-9.143V.001h9.143z"/></svg></defs></svg>




    <div
      class="wrapper "
    >
      <input type="checkbox" class="hidden" id="menu-control" />
      <input type="checkbox" class="hidden" id="menu-header-control" />
      
      <header class="gdoc-header">
  <div class="container flex align-center justify-between">
    
      <label for="menu-control" class="gdoc-nav__control" tabindex="0">
        <svg class="gdoc-icon gdoc_menu">
          <title>Open Navigation</title>
          <use xlink:href="#gdoc_menu"></use>
        </svg>
        <svg class="gdoc-icon gdoc_arrow_back">
          <title>Close Navigation</title>
          <use xlink:href="#gdoc_arrow_back"></use>
        </svg>
      </label>
    
    <div>
      <a class="gdoc-brand gdoc-header__link" href="https://blog.wujy.vip">
        <span class="flex align-center">
          <img
            class="gdoc-brand__img"
            src="/brand.svg"
            alt=""
          />
          <span class="gdoc-brand__title">Jimywu&#39;s Hugo Site</span>
        </span>
      </a>
    </div>
    <div class="gdoc-menu-header">
      <span class="gdoc-menu-header__items">
        


        <span id="gdoc-dark-mode">
          <svg class="gdoc-icon gdoc_brightness_dark">
            <title>Toggle Dark/Light/Auto mode</title>
            <use xlink:href="#gdoc_brightness_dark"></use>
          </svg>
          <svg class="gdoc-icon gdoc_brightness_light">
            <title>Toggle Dark/Light/Auto mode</title>
            <use xlink:href="#gdoc_brightness_light"></use>
          </svg>
          <svg class="gdoc-icon gdoc_brightness_auto">
            <title>Toggle Dark/Light/Auto mode</title>
            <use xlink:href="#gdoc_brightness_auto"></use>
          </svg>
        </span>

        <span class="gdoc-menu-header__home">
          <a href="https://blog.wujy.vip" class="gdoc-header__link">
            <svg class="gdoc-icon gdoc_home">
              <title>Back to homepage</title>
              <use xlink:href="#gdoc_home"></use>
            </svg>
          </a>
        </span>

        



        <span class="gdoc-menu-header__control">
          <label for="menu-header-control">
            <svg class="gdoc-icon gdoc_keyboard_arrow_right">
              <use xlink:href="#gdoc_keyboard_arrow_right"></use>
              <title>Close Menu Bar</title>
            </svg>
          </label>
        </span>
      </span>
      <label for="menu-header-control" class="gdoc-menu-header__control">
        <svg class="gdoc-icon gdoc_keyboard_arrow_left">
          <use xlink:href="#gdoc_keyboard_arrow_left"></use>
          <title>Open Menu Bar</title>
        </svg>
      </label>
    </div>
  </div>
</header>



      <main class="container flex flex-even">
        
          <aside class="gdoc-nav">
            <nav>
  
  <div class="gdoc-search flex align-center">
    <svg class="gdoc-icon gdoc_search"><use xlink:href="#gdoc_search"></use></svg>
    <input
      type="text"
      id="gdoc-search-input"
      class="gdoc-search__input"
      placeholder="Search"
      aria-label="Search"
      maxlength="64"
      data-site-base-url="https://blog.wujy.vip"
      data-site-lang="en"
    />
    <div class="gdoc-search__spinner spinner hidden"></div>
    <ul id="gdoc-search-results" class="gdoc-search__list"></ul>
  </div>




  <section class="gdoc-nav--main">
    <h2>Navigation</h2>
    
      

  


  <ul class="gdoc-nav__list">
    
    
      

      
        
      

      
        
          
          
          
          
          
          


          <li>
            <input
              type="checkbox"
              
                class="hidden"
              
            />
            <label
              
            >
              
                <span class="flex">Posts</span>
              
              
            </label>

            
              
  


  <ul class="gdoc-nav__list">
    
    
      

      
        
      

      
        
          
          
          
          
          
          


          <li>
            <input
              type="checkbox"
              
                class="hidden"
              
            />
            <label
              
            >
              
                <span class="flex">
                  <a
                    href="/posts/a_bit_of_python/"
                    class="gdoc-nav__entry is-active"
                  >
                    A bit of python
                  </a>
                </span>
              
              
            </label>

            
          </li>
        
      
        
          
          
          
          
          
          


          <li>
            <input
              type="checkbox"
              
                class="hidden"
              
            />
            <label
              
            >
              
                <span class="flex">
                  <a
                    href="/posts/markdown/"
                    class="gdoc-nav__entry"
                  >
                    api demo
                  </a>
                </span>
              
              
            </label>

            
          </li>
        
      
        
          
          
          
          
          
          


          <li>
            <input
              type="checkbox"
              
                class="hidden"
              
            />
            <label
              
            >
              
                <span class="flex">
                  <a
                    href="/posts/bigdata/"
                    class="gdoc-nav__entry"
                  >
                    BigData
                  </a>
                </span>
              
              
            </label>

            
          </li>
        
      
        
          
          
          
          
          
          


          <li>
            <input
              type="checkbox"
              
                class="hidden"
              
            />
            <label
              
            >
              
                <span class="flex">
                  <a
                    href="/posts/istio/"
                    class="gdoc-nav__entry"
                  >
                    Istio
                  </a>
                </span>
              
              
            </label>

            
          </li>
        
      
        
          
          
          
          
          
          


          <li>
            <input
              type="checkbox"
              
                class="hidden"
              
            />
            <label
              
            >
              
                <span class="flex">
                  <a
                    href="/posts/kafka/"
                    class="gdoc-nav__entry"
                  >
                    Kafka
                  </a>
                </span>
              
              
            </label>

            
          </li>
        
      
        
          
          
          
          
          
          


          <li>
            <input
              type="checkbox"
              
                class="hidden"
              
            />
            <label
              
            >
              
                <span class="flex">
                  <a
                    href="/posts/python_cheat_sheet/"
                    class="gdoc-nav__entry"
                  >
                    Python cheet sheet
                  </a>
                </span>
              
              
            </label>

            
          </li>
        
      
        
          
          
          
          
          
          


          <li>
            <input
              type="checkbox"
              
                class="hidden"
              
            />
            <label
              
            >
              
                <span class="flex">
                  <a
                    href="/posts/python/"
                    class="gdoc-nav__entry"
                  >
                    Python 速查表中文版
                  </a>
                </span>
              
              
            </label>

            
          </li>
        
      
    
  </ul>

            
          </li>
        
      
    
  </ul>






    
  </section>

  


  <section class="gdoc-nav--more">
    
  </section>
</nav>

          </aside>
        


        <div class="gdoc-page">
          
  <article class="gdoc-post">
    <header class="gdoc-post__header">
      <h1 class="gdoc-post__title">A bit of python</h1>
      <div class="flex flex-wrap align-center gdoc-post__meta gdoc-post__meta--head">
        <span class="flex align-center no-wrap">
  <svg class="gdoc-icon gdoc_date"><use xlink:href="#gdoc_date"></use></svg>
  <span class="gdoc-post__tag">
    <time datetime="2022-05-19T10:26:33&#43;08:00">
      
      May 19, 2022
    </time>
  </span>
</span>

<span class="flex align-center no-wrap">
  <svg class="gdoc-icon gdoc_timer"><use xlink:href="#gdoc_timer"></use></svg>
  <span class="gdoc-post__tag">22 minutes to read</span>
</span>






      </div>
    </header>
    <section class="gdoc-markdown">
      <div class="gdoc-page__anchorwrap">
    <h1 id="0-前言">
        0. 前言
        <a data-clipboard-text="https://blog.wujy.vip/posts/a_bit_of_python/#0-前言" class="gdoc-page__anchor gdoc-page__anchor--right clip" title="Anchor to: 0. 前言" aria-label="Anchor to: 0. 前言" href="#0-%e5%89%8d%e8%a8%80">
            <svg class="gdoc-icon gdoc_link"><use xlink:href="#gdoc_link"></use></svg>
        </a>
    </h1>
</div>
<p>A Bite of Python，也可叫作“咬一口Python”，寓意着Python的冰山一角，包含着作者这几年学Python时积累的一些知识和经验，文章中包含了许多快速简洁的例子，方便让读者了解到Python中存在的一些概念，然后去自行拓展。</p>
<div class="gdoc-page__anchorwrap">
    <h1 id="1-基础">
        1. 基础
        <a data-clipboard-text="https://blog.wujy.vip/posts/a_bit_of_python/#1-基础" class="gdoc-page__anchor gdoc-page__anchor--right clip" title="Anchor to: 1. 基础" aria-label="Anchor to: 1. 基础" href="#1-%e5%9f%ba%e7%a1%80">
            <svg class="gdoc-icon gdoc_link"><use xlink:href="#gdoc_link"></use></svg>
        </a>
    </h1>
</div>
<p>Python是一门解释型的高级编程语言，由Guido van Rossum于1989年开始编写，并在1991年发布了第一版。Python的特点是代码简洁而且可读性强，使用空格缩进来划分代码块。</p>
<div class="gdoc-page__anchorwrap">
    <h2 id="10-安装">
        1.0 安装
        <a data-clipboard-text="https://blog.wujy.vip/posts/a_bit_of_python/#10-安装" class="gdoc-page__anchor gdoc-page__anchor--right clip" title="Anchor to: 1.0 安装" aria-label="Anchor to: 1.0 安装" href="#10-%e5%ae%89%e8%a3%85">
            <svg class="gdoc-icon gdoc_link"><use xlink:href="#gdoc_link"></use></svg>
        </a>
    </h2>
</div>
<p>用浏览器访问官网的下载页面<a
  class="gdoc-markdown__link"
  href="https://www.python.org/downloads/"
  
>Download Python</a>，选择合适的版本下载安装。</p>
<p>命令行安装：</p>
<p>Mac:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>$ brew install python3
</span></span></code></pre></div><p>Debian&amp;Ubuntu:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>$ sudo apt-get install python3
</span></span></code></pre></div><div class="gdoc-page__anchorwrap">
    <h2 id="11-解释器">
        1.1 解释器
        <a data-clipboard-text="https://blog.wujy.vip/posts/a_bit_of_python/#11-解释器" class="gdoc-page__anchor gdoc-page__anchor--right clip" title="Anchor to: 1.1 解释器" aria-label="Anchor to: 1.1 解释器" href="#11-%e8%a7%a3%e9%87%8a%e5%99%a8">
            <svg class="gdoc-icon gdoc_link"><use xlink:href="#gdoc_link"></use></svg>
        </a>
    </h2>
</div>
<p>Python的官方解释器是CPython，也就是我们通常讨论的Python的实现，它是用C编写的，负责将编写好的Python代码翻译并执行。</p>
<p>除此之外，Python还有许多实现版本：</p>
<ul>
<li>PyPy，用rPython实现的Python解释器，使用了JIT编译技术，因此执行速度通常比C实现的CPython还要快。</li>
<li>Jython，一个用Java实现的Python解释器。</li>
<li>IronPython，一个用.NET实现的Python解释器。</li>
</ul>
<div class="gdoc-page__anchorwrap">
    <h2 id="12-语法">
        1.2 语法
        <a data-clipboard-text="https://blog.wujy.vip/posts/a_bit_of_python/#12-语法" class="gdoc-page__anchor gdoc-page__anchor--right clip" title="Anchor to: 1.2 语法" aria-label="Anchor to: 1.2 语法" href="#12-%e8%af%ad%e6%b3%95">
            <svg class="gdoc-icon gdoc_link"><use xlink:href="#gdoc_link"></use></svg>
        </a>
    </h2>
</div>
<div class="gdoc-page__anchorwrap">
    <h3 id="120-缩进">
        1.2.0 缩进
        <a data-clipboard-text="https://blog.wujy.vip/posts/a_bit_of_python/#120-缩进" class="gdoc-page__anchor gdoc-page__anchor--right clip" title="Anchor to: 1.2.0 缩进" aria-label="Anchor to: 1.2.0 缩进" href="#120-%e7%bc%a9%e8%bf%9b">
            <svg class="gdoc-icon gdoc_link"><use xlink:href="#gdoc_link"></use></svg>
        </a>
    </h3>
</div>
<p>不同于一些语言使用花括号的方式来明确代码块，Python用缩进来表示代码的层级（通常是四个空格，最好不要用tab）</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span>x <span style="color:#f92672">=</span> <span style="color:#ae81ff">75</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">if</span> x <span style="color:#f92672">&gt;=</span> <span style="color:#ae81ff">60</span>:
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">if</span> x <span style="color:#f92672">&gt;</span> <span style="color:#ae81ff">80</span>:
</span></span><span style="display:flex;"><span>        print(<span style="color:#e6db74">&#39;A&#39;</span>)
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">else</span>:
</span></span><span style="display:flex;"><span>        print(<span style="color:#e6db74">&#39;B&#39;</span>)
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">else</span>:
</span></span><span style="display:flex;"><span>    print(<span style="color:#e6db74">&#39;C&#39;</span>)
</span></span><span style="display:flex;"><span><span style="color:#75715e"># 75</span>
</span></span></code></pre></div><div class="gdoc-page__anchorwrap">
    <h3 id="121-布尔运算">
        1.2.1 布尔运算
        <a data-clipboard-text="https://blog.wujy.vip/posts/a_bit_of_python/#121-布尔运算" class="gdoc-page__anchor gdoc-page__anchor--right clip" title="Anchor to: 1.2.1 布尔运算" aria-label="Anchor to: 1.2.1 布尔运算" href="#121-%e5%b8%83%e5%b0%94%e8%bf%90%e7%ae%97">
            <svg class="gdoc-icon gdoc_link"><use xlink:href="#gdoc_link"></use></svg>
        </a>
    </h3>
</div>
<div class=table-wrap> <table>
<thead>
<tr>
<th>运算</th>
<th>结果</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>x or y</code></td>
<td>如果 <em>x</em> 是false, 就是<em>y</em>, 否则是 <em>x</em></td>
</tr>
<tr>
<td><code>x and y</code></td>
<td>如果 <em>x</em> 是false, 就是<em>x</em>, 否则是 <em>y</em></td>
</tr>
<tr>
<td><code>not x</code></td>
<td>如果 <em>x</em> 是false, 就是<em>True</em>, 否则是 <em>False</em></td>
</tr>
</tbody>
</table> </div>
<div class="gdoc-page__anchorwrap">
    <h3 id="122-比较运算">
        1.2.2 比较运算
        <a data-clipboard-text="https://blog.wujy.vip/posts/a_bit_of_python/#122-比较运算" class="gdoc-page__anchor gdoc-page__anchor--right clip" title="Anchor to: 1.2.2 比较运算" aria-label="Anchor to: 1.2.2 比较运算" href="#122-%e6%af%94%e8%be%83%e8%bf%90%e7%ae%97">
            <svg class="gdoc-icon gdoc_link"><use xlink:href="#gdoc_link"></use></svg>
        </a>
    </h3>
</div>
<div class=table-wrap> <table>
<thead>
<tr>
<th>运算</th>
<th>含义</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>&lt;</code></td>
<td>小于</td>
</tr>
<tr>
<td><code>&lt;=</code></td>
<td>小于或等于</td>
</tr>
<tr>
<td><code>&gt;</code></td>
<td>大于</td>
</tr>
<tr>
<td><code>&gt;=</code></td>
<td>大于等于</td>
</tr>
<tr>
<td><code>==</code></td>
<td>等于</td>
</tr>
<tr>
<td><code>!=</code></td>
<td>不等于</td>
</tr>
<tr>
<td><code>is</code></td>
<td>对象标识等于</td>
</tr>
<tr>
<td><code>is not</code></td>
<td>对象标识不等于</td>
</tr>
</tbody>
</table> </div>
<div class="gdoc-page__anchorwrap">
    <h3 id="123-数值操作">
        1.2.3 数值操作
        <a data-clipboard-text="https://blog.wujy.vip/posts/a_bit_of_python/#123-数值操作" class="gdoc-page__anchor gdoc-page__anchor--right clip" title="Anchor to: 1.2.3 数值操作" aria-label="Anchor to: 1.2.3 数值操作" href="#123-%e6%95%b0%e5%80%bc%e6%93%8d%e4%bd%9c">
            <svg class="gdoc-icon gdoc_link"><use xlink:href="#gdoc_link"></use></svg>
        </a>
    </h3>
</div>
<div class=table-wrap> <table>
<thead>
<tr>
<th>运算</th>
<th>含义</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>x + y</code></td>
<td>加法</td>
</tr>
<tr>
<td><code>x - y</code></td>
<td>减法</td>
</tr>
<tr>
<td><code>x * y</code></td>
<td>乘法</td>
</tr>
<tr>
<td><code>x / y</code></td>
<td>除法</td>
</tr>
<tr>
<td><code>x // y</code></td>
<td>整除</td>
</tr>
<tr>
<td><code>x % y</code></td>
<td>取模</td>
</tr>
<tr>
<td><code>-x</code></td>
<td>取反</td>
</tr>
<tr>
<td><code>+x</code></td>
<td>取正</td>
</tr>
<tr>
<td><code>abs(x)</code></td>
<td>绝对值</td>
</tr>
<tr>
<td><code>int(x)</code></td>
<td>整型转换</td>
</tr>
<tr>
<td><code>float(x)</code></td>
<td>浮点数转换</td>
</tr>
<tr>
<td><code>complex(re, im)</code></td>
<td>复数</td>
</tr>
<tr>
<td><code>c.conjugate()</code></td>
<td>共轭复数</td>
</tr>
<tr>
<td><code>divmod(x, y)</code></td>
<td>返回<code>(x // y, x % y)</code></td>
</tr>
<tr>
<td><code>pow(x, y)</code></td>
<td>x的y次幂</td>
</tr>
<tr>
<td><code>x ** y</code></td>
<td>x的y次幂</td>
</tr>
</tbody>
</table> </div>
<div class="gdoc-page__anchorwrap">
    <h3 id="124-位运算">
        1.2.4 位运算
        <a data-clipboard-text="https://blog.wujy.vip/posts/a_bit_of_python/#124-位运算" class="gdoc-page__anchor gdoc-page__anchor--right clip" title="Anchor to: 1.2.4 位运算" aria-label="Anchor to: 1.2.4 位运算" href="#124-%e4%bd%8d%e8%bf%90%e7%ae%97">
            <svg class="gdoc-icon gdoc_link"><use xlink:href="#gdoc_link"></use></svg>
        </a>
    </h3>
</div>
<div class=table-wrap> <table>
<thead>
<tr>
<th>运算</th>
<th>含义</th>
</tr>
</thead>
<tbody>
<tr>
<td>`x</td>
<td>y`</td>
</tr>
<tr>
<td><code>x ^ y</code></td>
<td>按位异或</td>
</tr>
<tr>
<td><code>x &amp; y</code></td>
<td>按位与</td>
</tr>
<tr>
<td><code>x &lt;&lt; n</code></td>
<td>按位左移</td>
</tr>
<tr>
<td><code>x &gt;&gt; n</code></td>
<td>按位右移</td>
</tr>
<tr>
<td><code>~x</code></td>
<td>按位反转</td>
</tr>
</tbody>
</table> </div>
<div class="gdoc-page__anchorwrap">
    <h2 id="13-关键字">
        1.3 关键字
        <a data-clipboard-text="https://blog.wujy.vip/posts/a_bit_of_python/#13-关键字" class="gdoc-page__anchor gdoc-page__anchor--right clip" title="Anchor to: 1.3 关键字" aria-label="Anchor to: 1.3 关键字" href="#13-%e5%85%b3%e9%94%ae%e5%ad%97">
            <svg class="gdoc-icon gdoc_link"><use xlink:href="#gdoc_link"></use></svg>
        </a>
    </h2>
</div>
<div class="gdoc-page__anchorwrap">
    <h3 id="true-false">
        True-False
        <a data-clipboard-text="https://blog.wujy.vip/posts/a_bit_of_python/#true-false" class="gdoc-page__anchor gdoc-page__anchor--right clip" title="Anchor to: True-False" aria-label="Anchor to: True-False" href="#true-false">
            <svg class="gdoc-icon gdoc_link"><use xlink:href="#gdoc_link"></use></svg>
        </a>
    </h3>
</div>
<p><code>True</code>和<code>False</code>分别表示Python布尔值中的真和假，当用==比较时，1与<code>True</code>相等，0与<code>False</code>相等，因此<code>True</code>和<code>False</code>还可以当作索引应用在容器操作上。</p>
<p>用内置的<code>bool</code>函数可以返回一个对象的布尔值表示，通常一个空的容器（例如一个空列表、一个空字典）的布尔值表示会返回<code>False</code>，反之为<code>True</code>，此外<code>None</code>的布尔值表示也是为<code>False</code>。</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span>type(<span style="color:#66d9ef">False</span>), type(<span style="color:#66d9ef">True</span>)
</span></span><span style="display:flex;"><span><span style="color:#75715e"># &lt;class &#39;bool&#39;&gt; &lt;class &#39;bool&#39;&gt;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#ae81ff">0</span> <span style="color:#f92672">==</span> <span style="color:#66d9ef">False</span>, <span style="color:#ae81ff">1</span> <span style="color:#f92672">==</span> <span style="color:#66d9ef">True</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># True True</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#ae81ff">0</span> <span style="color:#f92672">is</span> <span style="color:#66d9ef">False</span>, <span style="color:#ae81ff">1</span> <span style="color:#f92672">is</span> <span style="color:#66d9ef">True</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># False False</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>[<span style="color:#ae81ff">1</span>,<span style="color:#ae81ff">2</span>,<span style="color:#ae81ff">3</span>][<span style="color:#66d9ef">False</span>], [<span style="color:#ae81ff">1</span>,<span style="color:#ae81ff">2</span>,<span style="color:#ae81ff">3</span>][<span style="color:#66d9ef">True</span>]
</span></span><span style="display:flex;"><span><span style="color:#75715e"># 1 2</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>bool([]), bool({}), bool(set()), bool(()), bool(<span style="color:#e6db74">&#39;&#39;</span>), bool(<span style="color:#66d9ef">None</span>)
</span></span><span style="display:flex;"><span><span style="color:#75715e"># False False False False False False</span>
</span></span></code></pre></div><div class="gdoc-page__anchorwrap">
    <h3 id="none">
        None
        <a data-clipboard-text="https://blog.wujy.vip/posts/a_bit_of_python/#none" class="gdoc-page__anchor gdoc-page__anchor--right clip" title="Anchor to: None" aria-label="Anchor to: None" href="#none">
            <svg class="gdoc-icon gdoc_link"><use xlink:href="#gdoc_link"></use></svg>
        </a>
    </h3>
</div>
<p><code>None</code>在Python中表示空或不存在的含义，在同一个运行的程序中，None的地址只有一个。</p>
<p>当一个函数没有执行<code>return</code>语句或者执行一个没有返回对象的<code>return</code>语句时，默认会返回<code>None</code>值。</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span>type(<span style="color:#66d9ef">None</span>)
</span></span><span style="display:flex;"><span><span style="color:#75715e"># &lt;class &#39;NoneType&#39;&gt;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>id(<span style="color:#66d9ef">None</span>) <span style="color:#f92672">==</span> id(<span style="color:#66d9ef">None</span>)
</span></span><span style="display:flex;"><span><span style="color:#75715e"># True</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">def</span> <span style="color:#a6e22e">f</span>():
</span></span><span style="display:flex;"><span>    a <span style="color:#f92672">=</span> <span style="color:#ae81ff">1</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">def</span> <span style="color:#a6e22e">f2</span>():
</span></span><span style="display:flex;"><span>    a <span style="color:#f92672">=</span> <span style="color:#ae81ff">1</span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">return</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>f()
</span></span><span style="display:flex;"><span><span style="color:#75715e"># None</span>
</span></span><span style="display:flex;"><span>f2()
</span></span><span style="display:flex;"><span><span style="color:#75715e"># None</span>
</span></span></code></pre></div><div class="gdoc-page__anchorwrap">
    <h3 id="not">
        not
        <a data-clipboard-text="https://blog.wujy.vip/posts/a_bit_of_python/#not" class="gdoc-page__anchor gdoc-page__anchor--right clip" title="Anchor to: not" aria-label="Anchor to: not" href="#not">
            <svg class="gdoc-icon gdoc_link"><use xlink:href="#gdoc_link"></use></svg>
        </a>
    </h3>
</div>
<p><code>not</code>在Python中常用于逻辑判断，表示非或不的含义，当<code>not</code>应用在布尔值时，会把布尔值取反返回，否则会尝试将对象转成布尔值表示再进行逻辑操作。</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span><span style="color:#f92672">not</span> <span style="color:#66d9ef">False</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">not</span> <span style="color:#66d9ef">True</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">not</span> <span style="color:#66d9ef">None</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">not</span> [], <span style="color:#f92672">not</span> {}, <span style="color:#f92672">not</span> (), <span style="color:#f92672">not</span> set()
</span></span><span style="display:flex;"><span><span style="color:#75715e"># True</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># False</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># True</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># True True True True</span>
</span></span></code></pre></div><p><code>not</code>一般也应用于判断一个对象是否存在于容器上：</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span><span style="color:#ae81ff">1</span> <span style="color:#f92672">not</span> <span style="color:#f92672">in</span> (<span style="color:#ae81ff">1</span>, <span style="color:#ae81ff">2</span>, <span style="color:#ae81ff">3</span>)
</span></span><span style="display:flex;"><span><span style="color:#75715e"># False</span>
</span></span><span style="display:flex;"><span><span style="color:#ae81ff">1</span> <span style="color:#f92672">not</span> <span style="color:#f92672">in</span> [<span style="color:#ae81ff">1</span>, <span style="color:#ae81ff">2</span>, <span style="color:#ae81ff">3</span>]
</span></span><span style="display:flex;"><span><span style="color:#75715e"># False</span>
</span></span><span style="display:flex;"><span><span style="color:#e6db74">&#39;a&#39;</span> <span style="color:#f92672">not</span> <span style="color:#f92672">in</span> {<span style="color:#e6db74">&#39;a&#39;</span>: <span style="color:#ae81ff">1</span>}
</span></span><span style="display:flex;"><span><span style="color:#75715e"># False</span>
</span></span><span style="display:flex;"><span><span style="color:#e6db74">&#39;a&#39;</span> <span style="color:#f92672">not</span> <span style="color:#f92672">in</span> {<span style="color:#e6db74">&#39;a&#39;</span>, <span style="color:#e6db74">&#39;b&#39;</span>}
</span></span></code></pre></div><p>还有用于对象的标识判断：</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span>a <span style="color:#f92672">=</span> <span style="color:#e6db74">&#39;None&#39;</span>
</span></span><span style="display:flex;"><span>a <span style="color:#f92672">is</span> <span style="color:#f92672">not</span> <span style="color:#66d9ef">None</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># True</span>
</span></span></code></pre></div><div class="gdoc-page__anchorwrap">
    <h3 id="is">
        is
        <a data-clipboard-text="https://blog.wujy.vip/posts/a_bit_of_python/#is" class="gdoc-page__anchor gdoc-page__anchor--right clip" title="Anchor to: is" aria-label="Anchor to: is" href="#is">
            <svg class="gdoc-icon gdoc_link"><use xlink:href="#gdoc_link"></use></svg>
        </a>
    </h3>
</div>
<p><code>is</code>用于判断是否同一个对象：</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span><span style="color:#66d9ef">True</span> <span style="color:#f92672">is</span> <span style="color:#66d9ef">True</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">True</span> <span style="color:#f92672">is</span> <span style="color:#f92672">not</span> <span style="color:#66d9ef">True</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># True</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># False</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>sentinel <span style="color:#f92672">=</span> object()
</span></span><span style="display:flex;"><span>l <span style="color:#f92672">=</span> []
</span></span><span style="display:flex;"><span>l<span style="color:#f92672">.</span>append(object())
</span></span><span style="display:flex;"><span>l<span style="color:#f92672">.</span>append(sentinel)
</span></span><span style="display:flex;"><span>l<span style="color:#f92672">.</span>append(object())
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">for</span> obj <span style="color:#f92672">in</span> sentinel
</span></span><span style="display:flex;"><span>    print(<span style="color:#e6db74">&#39;object&#39;</span>)
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">if</span> obj <span style="color:#f92672">is</span> sentinel:
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">break</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># object</span>
</span></span></code></pre></div><p>A simple life lesson：</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span><span style="color:#f92672">import</span> this
</span></span><span style="display:flex;"><span><span style="color:#75715e"># ...</span>
</span></span><span style="display:flex;"><span>love <span style="color:#f92672">=</span> this
</span></span><span style="display:flex;"><span>this <span style="color:#f92672">is</span> love
</span></span><span style="display:flex;"><span><span style="color:#75715e"># True</span>
</span></span><span style="display:flex;"><span>love <span style="color:#f92672">is</span> <span style="color:#66d9ef">True</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># False</span>
</span></span><span style="display:flex;"><span>love <span style="color:#f92672">is</span> <span style="color:#66d9ef">False</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># False</span>
</span></span><span style="display:flex;"><span>love <span style="color:#f92672">is</span> <span style="color:#f92672">not</span> <span style="color:#66d9ef">True</span> <span style="color:#f92672">or</span> <span style="color:#66d9ef">False</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># True</span>
</span></span><span style="display:flex;"><span>love <span style="color:#f92672">is</span> <span style="color:#f92672">not</span> <span style="color:#66d9ef">True</span> <span style="color:#f92672">or</span> <span style="color:#66d9ef">False</span>; love <span style="color:#f92672">is</span> love
</span></span><span style="display:flex;"><span><span style="color:#75715e"># True</span>
</span></span></code></pre></div><div class="gdoc-page__anchorwrap">
    <h3 id="and">
        and
        <a data-clipboard-text="https://blog.wujy.vip/posts/a_bit_of_python/#and" class="gdoc-page__anchor gdoc-page__anchor--right clip" title="Anchor to: and" aria-label="Anchor to: and" href="#and">
            <svg class="gdoc-icon gdoc_link"><use xlink:href="#gdoc_link"></use></svg>
        </a>
    </h3>
</div>
<p><code>and</code>表示与的关系，用在条件表达式时，表示只有两个条件同时成立的情况下，判断条件才成功。</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span><span style="color:#66d9ef">True</span> <span style="color:#f92672">and</span> <span style="color:#66d9ef">False</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">True</span> <span style="color:#f92672">and</span> <span style="color:#66d9ef">True</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">False</span> <span style="color:#f92672">and</span> <span style="color:#66d9ef">False</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">False</span> <span style="color:#f92672">and</span> <span style="color:#66d9ef">True</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># False</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># True</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># False</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># False</span>
</span></span></code></pre></div><p>当用<code>and</code>来连接两个表达式时，根据短路性质，如果第一个表达式的布尔表示为<code>False</code>，那么不会计算后面的表达式。</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span><span style="color:#66d9ef">def</span> <span style="color:#a6e22e">condition_true</span>():
</span></span><span style="display:flex;"><span>    print(<span style="color:#e6db74">&#34;true&#34;</span>)
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">return</span> <span style="color:#66d9ef">True</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">def</span> <span style="color:#a6e22e">condition_false</span>():
</span></span><span style="display:flex;"><span>    print(<span style="color:#e6db74">&#34;false&#34;</span>)
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">return</span> <span style="color:#66d9ef">False</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">if</span> condition_true() <span style="color:#f92672">and</span> condition_false():
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">pass</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># true</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># false</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">if</span> condition_false() <span style="color:#f92672">and</span> condition_true():
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">pass</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># false</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">if</span> condition_true() <span style="color:#f92672">and</span> condition_true():
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">pass</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># true</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># true</span>
</span></span></code></pre></div><div class="gdoc-page__anchorwrap">
    <h3 id="or">
        or
        <a data-clipboard-text="https://blog.wujy.vip/posts/a_bit_of_python/#or" class="gdoc-page__anchor gdoc-page__anchor--right clip" title="Anchor to: or" aria-label="Anchor to: or" href="#or">
            <svg class="gdoc-icon gdoc_link"><use xlink:href="#gdoc_link"></use></svg>
        </a>
    </h3>
</div>
<p><code>or</code>表示或的关系，用在条件表达式时，表示如果有其中一个条件成立的情况下，则判断条件成功。</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span><span style="color:#66d9ef">True</span> <span style="color:#f92672">or</span> <span style="color:#66d9ef">False</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">True</span> <span style="color:#f92672">or</span> <span style="color:#66d9ef">True</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">False</span> <span style="color:#f92672">or</span> <span style="color:#66d9ef">False</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">False</span> <span style="color:#f92672">or</span> <span style="color:#66d9ef">True</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># True</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># True</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># False</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># True</span>
</span></span></code></pre></div><p>当用<code>or</code>来连接两个表达式时，根据短路性质，如果第一个表达式的布尔表示为<code>True</code>，那么不会计算后面的表达式。</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span><span style="color:#66d9ef">def</span> <span style="color:#a6e22e">condition_true</span>():
</span></span><span style="display:flex;"><span>    print(<span style="color:#e6db74">&#34;true&#34;</span>)
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">return</span> <span style="color:#66d9ef">True</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">def</span> <span style="color:#a6e22e">condition_false</span>():
</span></span><span style="display:flex;"><span>    print(<span style="color:#e6db74">&#34;false&#34;</span>)
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">return</span> <span style="color:#66d9ef">False</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">if</span> condition_true() <span style="color:#f92672">or</span> condition_false():
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">pass</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># true</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">if</span> condition_false() <span style="color:#f92672">or</span> condition_true():
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">pass</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># false</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># true</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">if</span> condition_true() <span style="color:#f92672">or</span> condition_true():
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">pass</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># true</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">None</span> <span style="color:#f92672">or</span> []
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">None</span> <span style="color:#f92672">or</span> [] <span style="color:#f92672">or</span> {}
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">None</span> <span style="color:#f92672">or</span> [] <span style="color:#f92672">or</span> {}
</span></span><span style="display:flex;"><span><span style="color:#75715e"># []</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># {}</span>
</span></span></code></pre></div><div class="gdoc-page__anchorwrap">
    <h3 id="def">
        def
        <a data-clipboard-text="https://blog.wujy.vip/posts/a_bit_of_python/#def" class="gdoc-page__anchor gdoc-page__anchor--right clip" title="Anchor to: def" aria-label="Anchor to: def" href="#def">
            <svg class="gdoc-icon gdoc_link"><use xlink:href="#gdoc_link"></use></svg>
        </a>
    </h3>
</div>
<p><code>def</code>用于定义一个函数或方法，后面跟着的是函数名，以及参数列表。</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span><span style="color:#66d9ef">def</span> <span style="color:#a6e22e">f</span>():
</span></span><span style="display:flex;"><span>    print(<span style="color:#e6db74">&#34;f&#34;</span>)
</span></span><span style="display:flex;"><span>f()
</span></span><span style="display:flex;"><span><span style="color:#75715e"># f</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">def</span> <span style="color:#a6e22e">f</span>():
</span></span><span style="display:flex;"><span>    print(<span style="color:#e6db74">&#34;f&#34;</span>)
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">def</span> <span style="color:#a6e22e">f2</span>():
</span></span><span style="display:flex;"><span>        print(<span style="color:#e6db74">&#34;f2&#34;</span>)
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">return</span> f2
</span></span><span style="display:flex;"><span>f2 <span style="color:#f92672">=</span> f()
</span></span><span style="display:flex;"><span>f2()
</span></span><span style="display:flex;"><span><span style="color:#75715e"># f</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># f2</span>
</span></span></code></pre></div><p>在定义类的实例方法时，函数参数列表的第一个参数代表着类实例本身：</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span><span style="color:#66d9ef">class</span> <span style="color:#a6e22e">Func</span>:
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">def</span> <span style="color:#a6e22e">f</span>(self):
</span></span><span style="display:flex;"><span>        print(<span style="color:#e6db74">&#34;f&#34;</span>)
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">return</span> self<span style="color:#f92672">.</span>f2
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">def</span> <span style="color:#a6e22e">f2</span>(self):
</span></span><span style="display:flex;"><span>        print(<span style="color:#e6db74">&#34;f2&#34;</span>)
</span></span><span style="display:flex;"><span>f2 <span style="color:#f92672">=</span> Func()<span style="color:#f92672">.</span>f()
</span></span><span style="display:flex;"><span>f2()
</span></span><span style="display:flex;"><span><span style="color:#75715e"># f</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># f2</span>
</span></span></code></pre></div><div class="gdoc-page__anchorwrap">
    <h3 id="pass">
        pass
        <a data-clipboard-text="https://blog.wujy.vip/posts/a_bit_of_python/#pass" class="gdoc-page__anchor gdoc-page__anchor--right clip" title="Anchor to: pass" aria-label="Anchor to: pass" href="#pass">
            <svg class="gdoc-icon gdoc_link"><use xlink:href="#gdoc_link"></use></svg>
        </a>
    </h3>
</div>
<p><code>pass</code>在Python中不做任何事情，通常用<code>pass</code>是为了保持程序结构的完整性，例如提前定义一个稍后实现的函数，或者继承一个基类但不重写其中的方法（常见于自定义异常）等等。</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span><span style="color:#66d9ef">def</span> <span style="color:#a6e22e">f</span>():
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">pass</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">class</span> <span style="color:#a6e22e">MyException</span>(<span style="color:#a6e22e">Exception</span>):
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">pass</span>
</span></span></code></pre></div><div class="gdoc-page__anchorwrap">
    <h3 id="import">
        import
        <a data-clipboard-text="https://blog.wujy.vip/posts/a_bit_of_python/#import" class="gdoc-page__anchor gdoc-page__anchor--right clip" title="Anchor to: import" aria-label="Anchor to: import" href="#import">
            <svg class="gdoc-icon gdoc_link"><use xlink:href="#gdoc_link"></use></svg>
        </a>
    </h3>
</div>
<p><code>import</code>语句在Python中的作用是导入其他模块，籍此访问其他模块中的变量。</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span><span style="color:#f92672">import</span> sys
</span></span><span style="display:flex;"><span>sys<span style="color:#f92672">.</span>version_info
</span></span><span style="display:flex;"><span><span style="color:#75715e"># sys.version_info(major=3, minor=6, micro=1, releaselevel=&#39;final&#39;, serial=0)</span>
</span></span></code></pre></div><p>导入又分为<strong>绝对导入</strong>和<strong>相对导入</strong>，其中<code>import &lt;&gt;</code>属于绝对导入，相对导入一般用<code>from &lt;&gt; import</code>的方式。</p>
<div class="gdoc-page__anchorwrap">
    <h3 id="from">
        from
        <a data-clipboard-text="https://blog.wujy.vip/posts/a_bit_of_python/#from" class="gdoc-page__anchor gdoc-page__anchor--right clip" title="Anchor to: from" aria-label="Anchor to: from" href="#from">
            <svg class="gdoc-icon gdoc_link"><use xlink:href="#gdoc_link"></use></svg>
        </a>
    </h3>
</div>
<p><code>from</code>语句用来从一个模块中导入变量。</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span><span style="color:#f92672">from</span> sys <span style="color:#f92672">import</span> version_info
</span></span><span style="display:flex;"><span>version_info
</span></span><span style="display:flex;"><span><span style="color:#75715e"># sys.version_info(major=3, minor=6, micro=1, releaselevel=&#39;final&#39;, serial=0)</span>
</span></span></code></pre></div><p>相对导入一般可以用<code>from &lt;&gt; import</code>的语法来完成，在PEP 328中有一个例子，假设当前的目录结构如下：</p>
<pre tabindex="0"><code>package/
    __init__.py
    subpackage1/
        __init__.py
        moduleX.py
        moduleY.py
    subpackage2/
        __init__.py
        moduleZ.py
    moduleA.py
</code></pre><p>而当前文件是<code>moduleX.py</code>或者<code>subpackage1/__init__.py</code>，以下的相对导入的语法都是合法的：</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span><span style="color:#f92672">from</span> .moduleY <span style="color:#f92672">import</span> spam
</span></span><span style="display:flex;"><span><span style="color:#f92672">from</span> .moduleY <span style="color:#f92672">import</span> spam <span style="color:#66d9ef">as</span> ham
</span></span><span style="display:flex;"><span><span style="color:#f92672">from</span> . <span style="color:#f92672">import</span> moduleY
</span></span><span style="display:flex;"><span><span style="color:#f92672">from</span> ..subpackage1 <span style="color:#f92672">import</span> moduleY
</span></span><span style="display:flex;"><span><span style="color:#f92672">from</span> ..subpackage2.moduleZ <span style="color:#f92672">import</span> eggs
</span></span><span style="display:flex;"><span><span style="color:#f92672">from</span> ..moduleA <span style="color:#f92672">import</span> foo
</span></span><span style="display:flex;"><span><span style="color:#f92672">from</span> ...package <span style="color:#f92672">import</span> bar
</span></span></code></pre></div><div class="gdoc-page__anchorwrap">
    <h3 id="as">
        as
        <a data-clipboard-text="https://blog.wujy.vip/posts/a_bit_of_python/#as" class="gdoc-page__anchor gdoc-page__anchor--right clip" title="Anchor to: as" aria-label="Anchor to: as" href="#as">
            <svg class="gdoc-icon gdoc_link"><use xlink:href="#gdoc_link"></use></svg>
        </a>
    </h3>
</div>
<p>在导入模块时可以给模块起别名，而这个操作一般可以用<code>as</code>关键字来实现：</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span><span style="color:#f92672">import</span> abc <span style="color:#66d9ef">as</span> cba
</span></span><span style="display:flex;"><span>cba
</span></span><span style="display:flex;"><span><span style="color:#75715e"># &lt;module &#39;abc&#39; from &#39;/usr/local/Cellar/python3/3.6.1/bin/../Frameworks/Python.framework/Versions/3.6/lib/python3.6/abc.py&#39;&gt;</span>
</span></span></code></pre></div><div class="gdoc-page__anchorwrap">
    <h3 id="assert">
        assert
        <a data-clipboard-text="https://blog.wujy.vip/posts/a_bit_of_python/#assert" class="gdoc-page__anchor gdoc-page__anchor--right clip" title="Anchor to: assert" aria-label="Anchor to: assert" href="#assert">
            <svg class="gdoc-icon gdoc_link"><use xlink:href="#gdoc_link"></use></svg>
        </a>
    </h3>
</div>
<p><code>assert</code>语句用于实现表达式的断言，如果断言没有通过，则会抛出一个<code>AsserationError</code>异常：</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span><span style="color:#66d9ef">assert</span> <span style="color:#ae81ff">1</span><span style="color:#f92672">+</span><span style="color:#ae81ff">1</span> <span style="color:#f92672">==</span> <span style="color:#ae81ff">2</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">assert</span> <span style="color:#ae81ff">1</span><span style="color:#f92672">+</span><span style="color:#ae81ff">1</span> <span style="color:#f92672">==</span> <span style="color:#ae81ff">3</span>, <span style="color:#e6db74">&#34;1+1=2!&#34;</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># AssertionError: 1+1=2!</span>
</span></span></code></pre></div><div class="gdoc-page__anchorwrap">
    <h3 id="for">
        for
        <a data-clipboard-text="https://blog.wujy.vip/posts/a_bit_of_python/#for" class="gdoc-page__anchor gdoc-page__anchor--right clip" title="Anchor to: for" aria-label="Anchor to: for" href="#for">
            <svg class="gdoc-icon gdoc_link"><use xlink:href="#gdoc_link"></use></svg>
        </a>
    </h3>
</div>
<p><code>for</code>语句用于对一个可迭代对象执行遍历操作，需与<code>in</code>配合使用。</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span><span style="color:#66d9ef">for</span> i <span style="color:#f92672">in</span> range(<span style="color:#ae81ff">3</span>):
</span></span><span style="display:flex;"><span>    print(i)
</span></span><span style="display:flex;"><span><span style="color:#75715e"># 0</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># 1</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># 2</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">for</span> i <span style="color:#f92672">in</span> <span style="color:#e6db74">&#34;abc&#34;</span>:
</span></span><span style="display:flex;"><span>    print(i)
</span></span><span style="display:flex;"><span><span style="color:#75715e"># a</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># b</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># c</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>[i <span style="color:#66d9ef">for</span> i <span style="color:#f92672">in</span> reversed(<span style="color:#e6db74">&#34;abc&#34;</span>)]
</span></span><span style="display:flex;"><span><span style="color:#75715e"># [&#39;c&#39;, &#39;b&#39;, &#39;a&#39;]</span>
</span></span></code></pre></div><div class="gdoc-page__anchorwrap">
    <h3 id="break">
        break
        <a data-clipboard-text="https://blog.wujy.vip/posts/a_bit_of_python/#break" class="gdoc-page__anchor gdoc-page__anchor--right clip" title="Anchor to: break" aria-label="Anchor to: break" href="#break">
            <svg class="gdoc-icon gdoc_link"><use xlink:href="#gdoc_link"></use></svg>
        </a>
    </h3>
</div>
<p><code>break</code>用于中断当前循环体的执行，跳出当前循环。</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span><span style="color:#66d9ef">while</span> <span style="color:#66d9ef">True</span>:
</span></span><span style="display:flex;"><span>    print(<span style="color:#ae81ff">1</span>)
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">break</span>
</span></span><span style="display:flex;"><span>    print(<span style="color:#ae81ff">2</span>)
</span></span><span style="display:flex;"><span><span style="color:#75715e"># 1</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">for</span> i <span style="color:#f92672">in</span> range(<span style="color:#ae81ff">5</span>):
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">if</span> i <span style="color:#f92672">==</span> <span style="color:#ae81ff">3</span>:
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">break</span>
</span></span><span style="display:flex;"><span>    print(i)
</span></span><span style="display:flex;"><span><span style="color:#75715e"># 0</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># 1</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># 2</span>
</span></span></code></pre></div><div class="gdoc-page__anchorwrap">
    <h3 id="continue">
        continue
        <a data-clipboard-text="https://blog.wujy.vip/posts/a_bit_of_python/#continue" class="gdoc-page__anchor gdoc-page__anchor--right clip" title="Anchor to: continue" aria-label="Anchor to: continue" href="#continue">
            <svg class="gdoc-icon gdoc_link"><use xlink:href="#gdoc_link"></use></svg>
        </a>
    </h3>
</div>
<p><code>continue</code>用于跳过当前的循环体的一个迭代。</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span><span style="color:#66d9ef">for</span> i <span style="color:#f92672">in</span> range(<span style="color:#ae81ff">5</span>):
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">if</span> i <span style="color:#f92672">==</span> <span style="color:#ae81ff">3</span>:
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">continue</span>
</span></span><span style="display:flex;"><span>    print(i)
</span></span><span style="display:flex;"><span><span style="color:#75715e"># 0</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># 1</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># 2</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># 4</span>
</span></span></code></pre></div><div class="gdoc-page__anchorwrap">
    <h3 id="class">
        class
        <a data-clipboard-text="https://blog.wujy.vip/posts/a_bit_of_python/#class" class="gdoc-page__anchor gdoc-page__anchor--right clip" title="Anchor to: class" aria-label="Anchor to: class" href="#class">
            <svg class="gdoc-icon gdoc_link"><use xlink:href="#gdoc_link"></use></svg>
        </a>
    </h3>
</div>
<p><code>class</code>用于类的定义。</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span><span style="color:#66d9ef">class</span> <span style="color:#a6e22e">Counter</span>:
</span></span><span style="display:flex;"><span>    base <span style="color:#f92672">=</span> <span style="color:#ae81ff">0</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">def</span> __init__(self):
</span></span><span style="display:flex;"><span>        self<span style="color:#f92672">.</span>c <span style="color:#f92672">=</span> self<span style="color:#f92672">.</span>base
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">def</span> <span style="color:#a6e22e">add</span>(self, i):
</span></span><span style="display:flex;"><span>        self<span style="color:#f92672">.</span>c <span style="color:#f92672">+=</span> i
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">return</span> self<span style="color:#f92672">.</span>c
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>c <span style="color:#f92672">=</span> Counter()
</span></span><span style="display:flex;"><span>c<span style="color:#f92672">.</span>add(<span style="color:#ae81ff">1</span>)
</span></span><span style="display:flex;"><span>c<span style="color:#f92672">.</span>add(<span style="color:#ae81ff">1</span>)
</span></span><span style="display:flex;"><span>Counter<span style="color:#f92672">.</span>base <span style="color:#f92672">=</span> <span style="color:#ae81ff">5</span>
</span></span><span style="display:flex;"><span>c<span style="color:#f92672">.</span>add(<span style="color:#ae81ff">1</span>)
</span></span><span style="display:flex;"><span>Counter()<span style="color:#f92672">.</span>add(<span style="color:#ae81ff">1</span>)
</span></span><span style="display:flex;"><span><span style="color:#75715e"># 1</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># 2</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># 3</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># 6</span>
</span></span></code></pre></div><p>在类层级定义的属性或者方法都会绑定到类的<code>__dict__</code>属性上，而每个实例则有自身的<code>__dict__</code>属性，存放实例的属性。</p>
<p><code>__dict__</code>属性是一个字典，键为变量的名称，值则是对于的变量值。</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span>Counter<span style="color:#f92672">.</span>__dict__
</span></span><span style="display:flex;"><span><span style="color:#75715e"># mappingproxy({&#39;__dict__&#39;: &lt;attribute &#39;__dict__&#39; of &#39;Counter&#39; objects&gt;,</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#               &#39;__doc__&#39;: None,</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#               &#39;__init__&#39;: &lt;function __main__.Counter.__init__&gt;,</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#               &#39;__module__&#39;: &#39;__main__&#39;,</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#               &#39;__weakref__&#39;: &lt;attribute &#39;__weakref__&#39; of &#39;Counter&#39; objects&gt;,</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#               &#39;add&#39;: &lt;function __main__.Counter.add&gt;,</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#               &#39;base&#39;: 0})</span>
</span></span><span style="display:flex;"><span>Counter()<span style="color:#f92672">.</span>__dict__
</span></span><span style="display:flex;"><span><span style="color:#75715e"># {&#39;c&#39;: 0}</span>
</span></span><span style="display:flex;"><span>vars(Counter()) <span style="color:#75715e"># 等于 Counter().__dict__</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># {&#39;c&#39;: 0}</span>
</span></span></code></pre></div><div class="gdoc-page__anchorwrap">
    <h3 id="del">
        del
        <a data-clipboard-text="https://blog.wujy.vip/posts/a_bit_of_python/#del" class="gdoc-page__anchor gdoc-page__anchor--right clip" title="Anchor to: del" aria-label="Anchor to: del" href="#del">
            <svg class="gdoc-icon gdoc_link"><use xlink:href="#gdoc_link"></use></svg>
        </a>
    </h3>
</div>
<p><code>del</code>语句用来删除一个变量的引用，也可以用于容器上的删除操作。</p>
<p>在这个例子中，当执行<code>del a</code>操作后，下面的<code>print(a)</code>语句就会因为无法访问到<code>a</code>这个变量而抛出异常了。</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span>a <span style="color:#f92672">=</span> <span style="color:#ae81ff">1</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">del</span> a
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">try</span>:
</span></span><span style="display:flex;"><span>    print(a)
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">except</span> <span style="color:#a6e22e">NameError</span>:
</span></span><span style="display:flex;"><span>    print(<span style="color:#e6db74">&#34;no variable named a!&#34;</span>)
</span></span><span style="display:flex;"><span><span style="color:#75715e"># no variable named a!</span>
</span></span></code></pre></div><p>除此之外，<code>del</code>也可以用于容器元素或对象属性的删除操作。</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span>l <span style="color:#f92672">=</span> [<span style="color:#ae81ff">1</span>, <span style="color:#ae81ff">2</span>, <span style="color:#ae81ff">3</span>]
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">del</span> l[<span style="color:#ae81ff">1</span>]
</span></span><span style="display:flex;"><span>l
</span></span><span style="display:flex;"><span><span style="color:#75715e"># [1, 3]</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>a <span style="color:#f92672">=</span> {
</span></span><span style="display:flex;"><span>    <span style="color:#e6db74">&#34;a&#34;</span>: <span style="color:#ae81ff">1</span>,
</span></span><span style="display:flex;"><span>    <span style="color:#e6db74">&#34;b&#34;</span>: <span style="color:#ae81ff">2</span>
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">del</span> a[<span style="color:#e6db74">&#34;a&#34;</span>]
</span></span><span style="display:flex;"><span><span style="color:#e6db74">&#34;a&#34;</span> <span style="color:#f92672">in</span> a
</span></span><span style="display:flex;"><span><span style="color:#75715e"># False</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">class</span> <span style="color:#a6e22e">MyClass</span>:
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">def</span> __init__(self):
</span></span><span style="display:flex;"><span>        self<span style="color:#f92672">.</span>i <span style="color:#f92672">=</span> <span style="color:#ae81ff">1</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>my_class <span style="color:#f92672">=</span> MyClass()
</span></span><span style="display:flex;"><span>hasattr(my_class, <span style="color:#e6db74">&#34;i&#34;</span>)
</span></span><span style="display:flex;"><span><span style="color:#75715e"># True</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">del</span> my_class<span style="color:#f92672">.</span>i
</span></span><span style="display:flex;"><span>hasattr(my_class, <span style="color:#e6db74">&#34;i&#34;</span>)
</span></span><span style="display:flex;"><span><span style="color:#75715e"># False</span>
</span></span></code></pre></div><div class="gdoc-page__anchorwrap">
    <h3 id="if-elif-else">
        if-elif-else
        <a data-clipboard-text="https://blog.wujy.vip/posts/a_bit_of_python/#if-elif-else" class="gdoc-page__anchor gdoc-page__anchor--right clip" title="Anchor to: if-elif-else" aria-label="Anchor to: if-elif-else" href="#if-elif-else">
            <svg class="gdoc-icon gdoc_link"><use xlink:href="#gdoc_link"></use></svg>
        </a>
    </h3>
</div>
<p><code>if</code>，<code>elif</code>和<code>else</code>关键字组成程序中的条件语句和控制流。</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span><span style="color:#66d9ef">for</span> i <span style="color:#f92672">in</span> [<span style="color:#ae81ff">1</span>, <span style="color:#ae81ff">2</span>, <span style="color:#ae81ff">3</span>]:
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">if</span> i <span style="color:#f92672">==</span> <span style="color:#ae81ff">3</span>:
</span></span><span style="display:flex;"><span>        print(<span style="color:#e6db74">&#34;if&#34;</span>)
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">elif</span> i <span style="color:#f92672">==</span> <span style="color:#ae81ff">2</span>:
</span></span><span style="display:flex;"><span>        print(<span style="color:#e6db74">&#34;elif&#34;</span>)
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">else</span>:
</span></span><span style="display:flex;"><span>        print(<span style="color:#e6db74">&#34;else&#34;</span>)
</span></span><span style="display:flex;"><span><span style="color:#75715e"># else</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># elif</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># if</span>
</span></span></code></pre></div><div class="gdoc-page__anchorwrap">
    <h3 id="try-raise-except-finally">
        try-raise-except-finally
        <a data-clipboard-text="https://blog.wujy.vip/posts/a_bit_of_python/#try-raise-except-finally" class="gdoc-page__anchor gdoc-page__anchor--right clip" title="Anchor to: try-raise-except-finally" aria-label="Anchor to: try-raise-except-finally" href="#try-raise-except-finally">
            <svg class="gdoc-icon gdoc_link"><use xlink:href="#gdoc_link"></use></svg>
        </a>
    </h3>
</div>
<p><code>try</code>，<code>raise</code>，<code>except</code>和<code>finally</code>关键字用于处理和控制程序的异常。</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span><span style="color:#66d9ef">for</span> i <span style="color:#f92672">in</span> [<span style="color:#f92672">-</span><span style="color:#ae81ff">1</span>, <span style="color:#ae81ff">0</span>, <span style="color:#ae81ff">1</span>]:
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">try</span>:
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">if</span> i <span style="color:#f92672">==</span> <span style="color:#f92672">-</span><span style="color:#ae81ff">1</span>:
</span></span><span style="display:flex;"><span>            <span style="color:#66d9ef">raise</span> <span style="color:#a6e22e">ValueError</span>
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">if</span> i <span style="color:#f92672">==</span> <span style="color:#ae81ff">0</span>:
</span></span><span style="display:flex;"><span>            <span style="color:#66d9ef">raise</span> <span style="color:#a6e22e">Exception</span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">except</span> <span style="color:#a6e22e">ValueError</span>:
</span></span><span style="display:flex;"><span>        print(<span style="color:#e6db74">&#34;ValueError&#34;</span>)
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">except</span> <span style="color:#a6e22e">Exception</span>:
</span></span><span style="display:flex;"><span>        print(<span style="color:#e6db74">&#34;Exception&#34;</span>)
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">finally</span>:
</span></span><span style="display:flex;"><span>        print(<span style="color:#e6db74">&#34;i=&#34;</span>, i)
</span></span><span style="display:flex;"><span><span style="color:#75715e"># ValueError</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># i= -1</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># Exception</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># i= 0</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># i= 1</span>
</span></span></code></pre></div><div class="gdoc-page__anchorwrap">
    <h3 id="lambda">
        lambda
        <a data-clipboard-text="https://blog.wujy.vip/posts/a_bit_of_python/#lambda" class="gdoc-page__anchor gdoc-page__anchor--right clip" title="Anchor to: lambda" aria-label="Anchor to: lambda" href="#lambda">
            <svg class="gdoc-icon gdoc_link"><use xlink:href="#gdoc_link"></use></svg>
        </a>
    </h3>
</div>
<p><code>lambda</code>语句用于定义一个匿名函数，函数内容为单个表达式，表达式的值就是<code>lambda</code>函数的返回值。</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span>add <span style="color:#f92672">=</span> <span style="color:#66d9ef">lambda</span> a, b: a<span style="color:#f92672">+</span>b
</span></span><span style="display:flex;"><span>add(<span style="color:#ae81ff">1</span>,<span style="color:#ae81ff">2</span>)
</span></span><span style="display:flex;"><span><span style="color:#75715e"># 3</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">class</span> <span style="color:#a6e22e">ObjectFactory</span>:
</span></span><span style="display:flex;"><span>    create <span style="color:#f92672">=</span> <span style="color:#66d9ef">lambda</span> : object()
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>ObjectFactory<span style="color:#f92672">.</span>create()
</span></span><span style="display:flex;"><span><span style="color:#75715e"># &lt;object object at 0x108074100&gt;</span>
</span></span></code></pre></div><div class="gdoc-page__anchorwrap">
    <h3 id="yield">
        yield
        <a data-clipboard-text="https://blog.wujy.vip/posts/a_bit_of_python/#yield" class="gdoc-page__anchor gdoc-page__anchor--right clip" title="Anchor to: yield" aria-label="Anchor to: yield" href="#yield">
            <svg class="gdoc-icon gdoc_link"><use xlink:href="#gdoc_link"></use></svg>
        </a>
    </h3>
</div>
<p>当一个函数中出现了<code>yield</code>关键字时，这个函数就变成了一个生成器，调用这个函数时会返回一个<code>generator</code>对象，接下来可以用<code>next</code>函数来驱动这个生成器往下执行，直至碰到一个yield语句，这时候生成器会返回函数<code>yield</code>语句后面的对象，也可以调用生成器的<code>send</code>方法给生成器发送一个值，这个发送的值会成为<code>yield</code>语句的返回值，当生成器执行完最后一个<code>yield</code>语句后，此时继续驱动生成器就会抛出一个<code>StopIteration</code>的异常，生成器的<code>return</code>语句的返回值会赋值给这个异常实例的<code>value</code>属性上。</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span><span style="color:#66d9ef">def</span> <span style="color:#a6e22e">g</span>():
</span></span><span style="display:flex;"><span>    a <span style="color:#f92672">=</span> <span style="color:#66d9ef">yield</span> <span style="color:#ae81ff">1</span>
</span></span><span style="display:flex;"><span>    b <span style="color:#f92672">=</span> <span style="color:#66d9ef">yield</span> a
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">yield</span> b
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">return</span> <span style="color:#e6db74">&#34;done&#34;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>g <span style="color:#f92672">=</span> g()
</span></span><span style="display:flex;"><span>g
</span></span><span style="display:flex;"><span><span style="color:#75715e"># &lt;generator object g at 0x101d4c990&gt;</span>
</span></span><span style="display:flex;"><span>next(g) <span style="color:#75715e"># equals to `g.send(None)`, variable a will become a `None`</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># 1</span>
</span></span><span style="display:flex;"><span>g<span style="color:#f92672">.</span>send(<span style="color:#ae81ff">2</span>)
</span></span><span style="display:flex;"><span><span style="color:#75715e"># 2</span>
</span></span><span style="display:flex;"><span>next(g)
</span></span><span style="display:flex;"><span><span style="color:#75715e"># None</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">try</span>:
</span></span><span style="display:flex;"><span>    next(g)
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">except</span> <span style="color:#a6e22e">StopIteration</span> <span style="color:#66d9ef">as</span> e:
</span></span><span style="display:flex;"><span>    print(e<span style="color:#f92672">.</span>value)
</span></span><span style="display:flex;"><span>    <span style="color:#75715e"># done</span>
</span></span></code></pre></div><div class="gdoc-page__anchorwrap">
    <h3 id="global">
        global
        <a data-clipboard-text="https://blog.wujy.vip/posts/a_bit_of_python/#global" class="gdoc-page__anchor gdoc-page__anchor--right clip" title="Anchor to: global" aria-label="Anchor to: global" href="#global">
            <svg class="gdoc-icon gdoc_link"><use xlink:href="#gdoc_link"></use></svg>
        </a>
    </h3>
</div>
<p>如果函数内想对一个全局作用域的变量进行赋值时，则需要用<code>global</code>关键字来声明你想要接触的变量名，接下来便可以访问和修改这个变量。</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span>a <span style="color:#f92672">=</span> <span style="color:#ae81ff">1</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">def</span> <span style="color:#a6e22e">g</span>():
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">global</span> a
</span></span><span style="display:flex;"><span>    a <span style="color:#f92672">=</span> <span style="color:#ae81ff">2</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>a
</span></span><span style="display:flex;"><span>g()
</span></span><span style="display:flex;"><span>a
</span></span><span style="display:flex;"><span><span style="color:#75715e"># 1</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># 2</span>
</span></span></code></pre></div><div class="gdoc-page__anchorwrap">
    <h3 id="nonlocal">
        nonlocal
        <a data-clipboard-text="https://blog.wujy.vip/posts/a_bit_of_python/#nonlocal" class="gdoc-page__anchor gdoc-page__anchor--right clip" title="Anchor to: nonlocal" aria-label="Anchor to: nonlocal" href="#nonlocal">
            <svg class="gdoc-icon gdoc_link"><use xlink:href="#gdoc_link"></use></svg>
        </a>
    </h3>
</div>
<p>要理解<code>nonlocal</code>关键字，可以看以下的例子。</p>
<p>在这个例子中，内层函数<code>inside</code>想要修改外层函数变量<code>a</code>的值，但执行<code>outside</code>函数后返回的结果为1。</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span><span style="color:#66d9ef">def</span> <span style="color:#a6e22e">outside</span>():
</span></span><span style="display:flex;"><span>    a <span style="color:#f92672">=</span> <span style="color:#ae81ff">1</span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">def</span> <span style="color:#a6e22e">inside</span>():
</span></span><span style="display:flex;"><span>        a <span style="color:#f92672">=</span> <span style="color:#ae81ff">2</span>
</span></span><span style="display:flex;"><span>    inside()
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">return</span> a
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>outside()
</span></span><span style="display:flex;"><span><span style="color:#75715e"># 1</span>
</span></span></code></pre></div><p>原因是在执行<code>inside</code>函数时的<code>a = 2</code>语句时，程序认为<code>a</code>是<code>inside</code>函数中的一个局部变量，因此外层函数的变量<code>a</code>没有受到影响。</p>
<p>解决方法是在<code>a = 2</code>语句之前用<code>nonlocal</code>来声明<code>a</code>不是一个局部变量，这样<code>inside</code>在执行时就会去外层函数寻找名称为<code>a</code>的变量，并对这个值进行修改。</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span><span style="color:#66d9ef">def</span> <span style="color:#a6e22e">outside</span>():
</span></span><span style="display:flex;"><span>    a <span style="color:#f92672">=</span> <span style="color:#ae81ff">1</span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">def</span> <span style="color:#a6e22e">inside</span>():
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">nonlocal</span> a
</span></span><span style="display:flex;"><span>        a <span style="color:#f92672">=</span> <span style="color:#ae81ff">2</span>
</span></span><span style="display:flex;"><span>    inside()
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">return</span> a
</span></span><span style="display:flex;"><span>outside()
</span></span><span style="display:flex;"><span><span style="color:#75715e"># 2</span>
</span></span></code></pre></div><div class="gdoc-page__anchorwrap">
    <h3 id="with">
        with
        <a data-clipboard-text="https://blog.wujy.vip/posts/a_bit_of_python/#with" class="gdoc-page__anchor gdoc-page__anchor--right clip" title="Anchor to: with" aria-label="Anchor to: with" href="#with">
            <svg class="gdoc-icon gdoc_link"><use xlink:href="#gdoc_link"></use></svg>
        </a>
    </h3>
</div>
<p><code>with</code>语句需要配合上下文管理器来使用，上下文管理器是一个定义了<code>进入</code>和<code>离开</code>操作的对象，当执行到<code>with</code>语句时，程序就会触发跟随<code>with</code>语句后面的上下文管理器的<code>进入</code>回调，当离开<code>with</code>包裹的区块后，程序就会触发上下文管理器的<code>离开</code>回调。</p>
<p>这常见于一些资源获取和资源释放的动作，例如下面是一个打开文件的例子，当不用<code>with</code>语句时，需要手动控制文件的关闭，而用<code>with</code>的话，即保证了代码的整洁的同时也确保了可读性。</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span>f <span style="color:#f92672">=</span> open(<span style="color:#e6db74">&#34;/etc/hosts&#34;</span>)
</span></span><span style="display:flex;"><span>f<span style="color:#f92672">.</span>readline()
</span></span><span style="display:flex;"><span>f<span style="color:#f92672">.</span>close()
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">with</span> open(<span style="color:#e6db74">&#34;/etc/hosts&#34;</span>) <span style="color:#66d9ef">as</span> f:
</span></span><span style="display:flex;"><span>    f<span style="color:#f92672">.</span>readline()
</span></span></code></pre></div><p>想定义一个上下文管理器十分简单，只需要编写一个类，并定义其中的<code>__enter__</code>（对应进入）和<code>__exit__</code>（对应离开）方法就可以了。</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span><span style="color:#66d9ef">class</span> <span style="color:#a6e22e">Context</span>:
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">def</span> __enter__(self):
</span></span><span style="display:flex;"><span>        print(<span style="color:#e6db74">&#34;__enter__&#34;</span>)
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">return</span> self
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">def</span> __exit__(self, exc_type, exc_val, exc_tb):
</span></span><span style="display:flex;"><span>        print(<span style="color:#e6db74">&#34;__exit__&#34;</span>)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">with</span> Context() <span style="color:#66d9ef">as</span> ctx:
</span></span><span style="display:flex;"><span>    ctx
</span></span><span style="display:flex;"><span><span style="color:#75715e"># __enter__</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># &lt;__main__.Context object at 0x10dab5438&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># __exit__</span>
</span></span></code></pre></div><div class="gdoc-page__anchorwrap">
    <h2 id="14-注释">
        1.4 注释
        <a data-clipboard-text="https://blog.wujy.vip/posts/a_bit_of_python/#14-注释" class="gdoc-page__anchor gdoc-page__anchor--right clip" title="Anchor to: 1.4 注释" aria-label="Anchor to: 1.4 注释" href="#14-%e6%b3%a8%e9%87%8a">
            <svg class="gdoc-icon gdoc_link"><use xlink:href="#gdoc_link"></use></svg>
        </a>
    </h2>
</div>
<p>定义注释有两种方式，一种是以&quot;#&ldquo;开头，这种属于是单行注释，另一种是用三个引号包裹字符串，这种可以用作多行注释，也有一种用法是定义函数或类的文档字符串。</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span><span style="color:#e6db74">&#39;&#39;&#39;
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">multiple
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">lines
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">comment
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">&#39;&#39;&#39;</span>
</span></span><span style="display:flex;"><span>a <span style="color:#f92672">=</span> <span style="color:#ae81ff">1</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># single line comment</span>
</span></span><span style="display:flex;"><span>b <span style="color:#f92672">=</span> <span style="color:#ae81ff">2</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">class</span> <span style="color:#a6e22e">C</span>:
</span></span><span style="display:flex;"><span>    <span style="color:#e6db74">&#39;&#39;&#39; This is doc-string
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">    &#39;&#39;&#39;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">pass</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>print(repr(C<span style="color:#f92672">.</span>__doc__))
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&#39; This is doc-string\n    &#39;</span>
</span></span></code></pre></div><div class="gdoc-page__anchorwrap">
    <h2 id="15-对象模型">
        1.5 对象模型
        <a data-clipboard-text="https://blog.wujy.vip/posts/a_bit_of_python/#15-对象模型" class="gdoc-page__anchor gdoc-page__anchor--right clip" title="Anchor to: 1.5 对象模型" aria-label="Anchor to: 1.5 对象模型" href="#15-%e5%af%b9%e8%b1%a1%e6%a8%a1%e5%9e%8b">
            <svg class="gdoc-icon gdoc_link"><use xlink:href="#gdoc_link"></use></svg>
        </a>
    </h2>
</div>
<p>要理解Python中的变量首先要明白Python中的命名空间。在Python中，命名空间本质上就是<strong>名字到对象的一个映射</strong>，因此我们平时谈论的变量也是由名字以及对象两个部分来组成，当执行<code>a = 1</code>这条语句时，Python会在命名空间中添加<code>a</code>这个名字，并把这个名字绑定到<code>1</code>上面，当执行<code>print(a)</code>这条语句时，Python则会从命名空间中查找<code>a</code>这个名字，再把这个名字映射的对象取出来完成后面的动作。</p>
<p>例如下面这个例子中就很好的展示了Python的对象是如何组织起来的：</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span>constant <span style="color:#f92672">=</span> <span style="color:#ae81ff">1</span>
</span></span><span style="display:flex;"><span>boolean <span style="color:#f92672">=</span> <span style="color:#66d9ef">True</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>l <span style="color:#f92672">=</span> [<span style="color:#ae81ff">1</span>,<span style="color:#ae81ff">2</span>,<span style="color:#ae81ff">3</span>, [<span style="color:#ae81ff">4</span>, [<span style="color:#ae81ff">5</span>]]]
</span></span><span style="display:flex;"><span>s <span style="color:#f92672">=</span> l[<span style="color:#ae81ff">2</span>:]
</span></span><span style="display:flex;"><span>d <span style="color:#f92672">=</span> {<span style="color:#e6db74">&#34;l&#34;</span>: l}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">def</span> <span style="color:#a6e22e">add</span>(a, b):
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">return</span> a <span style="color:#f92672">+</span> b
</span></span><span style="display:flex;"><span>add(<span style="color:#ae81ff">1</span>,<span style="color:#ae81ff">2</span>)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">class</span> <span style="color:#a6e22e">Link</span>:
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">def</span> __init__(self, obj):
</span></span><span style="display:flex;"><span>        self<span style="color:#f92672">.</span>obj <span style="color:#f92672">=</span> obj
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>link <span style="color:#f92672">=</span> Link([<span style="color:#ae81ff">1</span>])
</span></span><span style="display:flex;"><span>type_of_link <span style="color:#f92672">=</span> type(link)
</span></span><span style="display:flex;"><span>type_of_Link <span style="color:#f92672">=</span> type(Link)
</span></span></code></pre></div><p><img
  src="./img/1.4.0.png"
  alt=""
  
/></p>
<p>在Python中万物皆对象，所有的类都继承自<code>object</code>类。</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span>isinstance(<span style="color:#ae81ff">1</span>, object)
</span></span><span style="display:flex;"><span><span style="color:#75715e"># True</span>
</span></span><span style="display:flex;"><span>isinstance(<span style="color:#e6db74">&#39;1&#39;</span>, object)
</span></span><span style="display:flex;"><span><span style="color:#75715e"># True</span>
</span></span><span style="display:flex;"><span>isinstance([<span style="color:#ae81ff">1</span>], object)
</span></span><span style="display:flex;"><span><span style="color:#75715e"># True</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">class</span> <span style="color:#a6e22e">A</span>: <span style="color:#66d9ef">pass</span>
</span></span><span style="display:flex;"><span>isinstance(A, object)
</span></span><span style="display:flex;"><span><span style="color:#75715e"># True</span>
</span></span><span style="display:flex;"><span>isinstance(object, object)
</span></span><span style="display:flex;"><span><span style="color:#75715e"># True</span>
</span></span><span style="display:flex;"><span>isinstance(object(), object)
</span></span><span style="display:flex;"><span><span style="color:#75715e"># True</span>
</span></span></code></pre></div><p>用<code>type</code>函数能获取对象的类型，例如一个列表的类型是<code>list</code>，类A的实例的类型是<code>__main__.A</code>类，而这个类的类型是<code>type</code>，反而言之，类是type的一个实例。</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span>type([])
</span></span><span style="display:flex;"><span><span style="color:#75715e"># list</span>
</span></span><span style="display:flex;"><span>type(A())
</span></span><span style="display:flex;"><span><span style="color:#75715e"># __main__.A</span>
</span></span><span style="display:flex;"><span>type(type(A()))
</span></span><span style="display:flex;"><span><span style="color:#75715e"># type</span>
</span></span></code></pre></div><p>再来看一下看似奇怪的例子：</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span>isinstance(type, object)
</span></span><span style="display:flex;"><span><span style="color:#75715e"># True</span>
</span></span><span style="display:flex;"><span>isinstance(object, type)
</span></span><span style="display:flex;"><span><span style="color:#75715e"># True</span>
</span></span></code></pre></div><p>通过上面这个例子可以看到，<code>type</code>是一个<code>object</code>，<code>object</code>又是一个<code>type</code>，这是什么回事呢？</p>
<p>其实，<code>type</code>和<code>object</code>有点类似先有鸡还是先有蛋的情况，通过下面这个例子和图解，便能很好的理解<code>type</code>和<code>object</code>之间的关系。首先万物皆<code>object</code>，而<code>type</code>也是继承自<code>object</code>的，但<code>object</code>是<code>type</code>的一个实例，假如我们编写了一个列表，那么这个列表实际上是<code>list</code>的一个实例，<code>list</code>继承了<code>object</code>，而<code>list</code>和<code>object</code>都属于<code>type</code>的实例，这种创造类的类我们也一般称它为元类（metaclasses）。</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span>obj <span style="color:#f92672">=</span> object()
</span></span><span style="display:flex;"><span>cobj <span style="color:#f92672">=</span> C()
</span></span><span style="display:flex;"><span>mylist <span style="color:#f92672">=</span> [<span style="color:#ae81ff">1</span>,<span style="color:#ae81ff">2</span>,<span style="color:#ae81ff">3</span>] 
</span></span></code></pre></div><p><img
  src="./img/1.4.png"
  alt=""
  
/></p>
<p>再来一个例子表明它们之间的关系：</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span>issubclass(type, object) <span style="color:#75715e"># type继承了object</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># True</span>
</span></span><span style="display:flex;"><span>issubclass(object, type)
</span></span><span style="display:flex;"><span><span style="color:#75715e"># False</span>
</span></span><span style="display:flex;"><span>isinstance(object, type) <span style="color:#75715e"># object是type的一个实例</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># True</span>
</span></span><span style="display:flex;"><span>isinstance(type, object) <span style="color:#75715e"># 因为type继承了object，所以这里为True</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># True</span>
</span></span></code></pre></div><div class="gdoc-page__anchorwrap">
    <h2 id="16-执行过程">
        1.6 执行过程
        <a data-clipboard-text="https://blog.wujy.vip/posts/a_bit_of_python/#16-执行过程" class="gdoc-page__anchor gdoc-page__anchor--right clip" title="Anchor to: 1.6 执行过程" aria-label="Anchor to: 1.6 执行过程" href="#16-%e6%89%a7%e8%a1%8c%e8%bf%87%e7%a8%8b">
            <svg class="gdoc-icon gdoc_link"><use xlink:href="#gdoc_link"></use></svg>
        </a>
    </h2>
</div>
<p>Python代码是如何一步步地转化成Python虚拟机所能理解的形式呢？简单地说，从Python代码转换成字节码的过程中会经过以下的几个过程：</p>
<ol>
<li>把Python源码转换成解析树。</li>
<li>把解析树转换成抽象语法树(AST)。</li>
<li>生成符号表。</li>
<li>从AST中生成codeobject:
<ol>
<li>把AST转换为控制流</li>
<li>从控制流中提交codeobject</li>
</ol>
</li>
</ol>
<p>Python中有个内置的<code>compile</code>函数，可以将源代码转换成<code>codeobject</code>，<code>codeobject</code>中包含了源代码转译后的字节码。</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span>compile(source, filename, mode, flags<span style="color:#f92672">=</span><span style="color:#ae81ff">0</span>, dont_inherit<span style="color:#f92672">=</span><span style="color:#66d9ef">False</span>, optimize<span style="color:#f92672">=-</span><span style="color:#ae81ff">1</span>)
</span></span></code></pre></div><p>其中<code>flags</code>指明了编译的特征，例如<code>ast</code>模块的<code>parse</code>函数就把flags设置为<code>PyCF_ONLY_AST</code>。</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span>compile(source, filename, mode, PyCF_ONLY_AST)
</span></span></code></pre></div><div class="gdoc-page__anchorwrap">
    <h3 id="161-解析树">
        1.6.1 解析树
        <a data-clipboard-text="https://blog.wujy.vip/posts/a_bit_of_python/#161-解析树" class="gdoc-page__anchor gdoc-page__anchor--right clip" title="Anchor to: 1.6.1 解析树" aria-label="Anchor to: 1.6.1 解析树" href="#161-%e8%a7%a3%e6%9e%90%e6%a0%91">
            <svg class="gdoc-icon gdoc_link"><use xlink:href="#gdoc_link"></use></svg>
        </a>
    </h3>
</div>
<p>前面说了Python在执行时会把代码转化为解析树，那么解析树长什么样呢？</p>
<p>下面用<code>parser</code>模块对一个加法函数就行解析，对结果进行打印：</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span><span style="color:#f92672">import</span> parser
</span></span><span style="display:flex;"><span><span style="color:#f92672">from</span> pprint <span style="color:#f92672">import</span> pprint
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>code_str <span style="color:#f92672">=</span> <span style="color:#e6db74">&#39;def add(a, b):return a + b&#39;</span>
</span></span><span style="display:flex;"><span>res <span style="color:#f92672">=</span> parser<span style="color:#f92672">.</span>suite(code_str)
</span></span><span style="display:flex;"><span>pprint(res<span style="color:#f92672">.</span>tolist())
</span></span></code></pre></div><p>不难看出，这个结果列表是一个树状结构：</p>
<pre tabindex="0"><code>[257,
 [269,
  [295,
   [263,
    [1, &#39;def&#39;],
    [1, &#39;add&#39;],
    [264,
     [7, &#39;(&#39;],
     [265, [266, [1, &#39;a&#39;]], [12, &#39;,&#39;], [266, [1, &#39;b&#39;]]],
     [8, &#39;)&#39;]],
    [11, &#39;:&#39;],
    [304,
     [270,
      [271,
       [278,
        [281,
         [1, &#39;return&#39;],
         [331,
          [305,
           [309,
            [310,
             [311,
              [312,
               [315,
                [316,
                 [317,
                  [318,
                   [319,
                    [320, [321, [322, [323, [324, [1, &#39;a&#39;]]]]]],
                    [14, &#39;+&#39;],
                    [320, [321, [322, [323, [324, [1, &#39;b&#39;]]]]]]]]]]]]]]]]]]]],
      [4, &#39;&#39;]]]]]],
 [4, &#39;&#39;],
 [0, &#39;&#39;]]
</code></pre><p>但列表里面大部分都是让人看不懂的数字，其实每个数字都代表了一个符号或者令牌，分别象征着不同的含义，它们对应的含义可以在CPython源码的<code>Include/graminit.h</code>和<code>Include/token.h</code>文件中找到。</p>
<p>下面是对上面列表翻译后的一个树状结构，可以看到原来的代码都被翻译成一颗工整的语法树结构了。</p>
<p><img
  src="./img/1.5.1.png"
  alt=""
  
/></p>
<div class="gdoc-page__anchorwrap">
    <h3 id="162-指令栈">
        1.6.2 指令栈
        <a data-clipboard-text="https://blog.wujy.vip/posts/a_bit_of_python/#162-指令栈" class="gdoc-page__anchor gdoc-page__anchor--right clip" title="Anchor to: 1.6.2 指令栈" aria-label="Anchor to: 1.6.2 指令栈" href="#162-%e6%8c%87%e4%bb%a4%e6%a0%88">
            <svg class="gdoc-icon gdoc_link"><use xlink:href="#gdoc_link"></use></svg>
        </a>
    </h3>
</div>
<p>在CPython中，Python的代码最终会被转化成字节码，再由虚拟机对它们进行解析，Python的虚拟机是一种基于栈形式的虚拟机。</p>
<p>在Python中有一个<code>dis</code>模块可以帮助把字节码转成可读的形式展示，下面这个例子对<code>loop</code>函数进行分析，这个函数循环对一个初始值为1的变量进行累加，直至变量的值等于5。</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span><span style="color:#66d9ef">def</span> <span style="color:#a6e22e">loop</span>():
</span></span><span style="display:flex;"><span>    x <span style="color:#f92672">=</span> <span style="color:#ae81ff">1</span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">while</span> x <span style="color:#f92672">&lt;</span> <span style="color:#ae81ff">5</span>:
</span></span><span style="display:flex;"><span>        x <span style="color:#f92672">+=</span> <span style="color:#ae81ff">1</span>
</span></span><span style="display:flex;"><span>        print(x)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">import</span> dis
</span></span><span style="display:flex;"><span>dis<span style="color:#f92672">.</span>dis(loop)
</span></span></code></pre></div><p>下面输出的字节码的指令含义都可以在<a
  class="gdoc-markdown__link"
  href="https://docs.python.org/3/library/dis.html"
  
>library/dis</a>中找到。</p>
<pre tabindex="0"><code>  2           0 LOAD_CONST               1 (1)
              2 STORE_FAST               0 (x)

  3           4 SETUP_LOOP              28 (to 34)
        &gt;&gt;    6 LOAD_FAST                0 (x)
              8 LOAD_CONST               2 (5)
             10 COMPARE_OP               0 (&lt;)
             12 POP_JUMP_IF_FALSE       32

  4          14 LOAD_FAST                0 (x)
             16 LOAD_CONST               1 (1)
             18 INPLACE_ADD
             20 STORE_FAST               0 (x)

  5          22 LOAD_GLOBAL              0 (print)
             24 LOAD_FAST                0 (x)
             26 CALL_FUNCTION            1
             28 POP_TOP
             30 JUMP_ABSOLUTE            6
        &gt;&gt;   32 POP_BLOCK
        &gt;&gt;   34 LOAD_CONST               0 (None)
             36 RETURN_VALUE
</code></pre><p>有了上面的基础，再来看下面这个例子：</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span><span style="color:#f92672">from</span> timeit <span style="color:#f92672">import</span> timeit
</span></span><span style="display:flex;"><span>timeit(<span style="color:#e6db74">&#39;[]&#39;</span>)
</span></span><span style="display:flex;"><span><span style="color:#75715e"># 0.027015632018446922</span>
</span></span><span style="display:flex;"><span>timeit(<span style="color:#e6db74">&#39;list()&#39;</span>)
</span></span><span style="display:flex;"><span><span style="color:#75715e"># 0.44922116107773036</span>
</span></span><span style="display:flex;"><span>timeit(<span style="color:#e6db74">&#39;</span><span style="color:#e6db74">{}</span><span style="color:#e6db74">&#39;</span>)
</span></span><span style="display:flex;"><span><span style="color:#75715e"># 0.041279405006207526</span>
</span></span><span style="display:flex;"><span>timeit(<span style="color:#e6db74">&#39;dict()&#39;</span>)
</span></span><span style="display:flex;"><span><span style="color:#75715e"># 0.44984785199631006</span>
</span></span></code></pre></div><p>为什么用<code>[]</code>定义一个列表比用<code>list()</code>定义一个列表要更快呢？用<code>dis</code>模块进行分析后便很容易得出结论了，相比于<code>[]</code>，执行<code>list()</code>时需要去加载<code>list</code>这个名字并查找和调用对应的函数，而执行<code>[]</code>时的指令数量比前者更少，因此它的执行速度也更快。</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span>dis<span style="color:#f92672">.</span>dis(<span style="color:#e6db74">&#39;list()&#39;</span>)
</span></span><span style="display:flex;"><span>  <span style="color:#ae81ff">1</span>           <span style="color:#ae81ff">0</span> LOAD_NAME                <span style="color:#ae81ff">0</span> (list)
</span></span><span style="display:flex;"><span>              <span style="color:#ae81ff">2</span> CALL_FUNCTION            <span style="color:#ae81ff">0</span>
</span></span><span style="display:flex;"><span>              <span style="color:#ae81ff">4</span> RETURN_VALUE
</span></span><span style="display:flex;"><span>dis<span style="color:#f92672">.</span>dis(<span style="color:#e6db74">&#39;[]&#39;</span>)
</span></span><span style="display:flex;"><span>  <span style="color:#ae81ff">1</span>           <span style="color:#ae81ff">0</span> BUILD_LIST               <span style="color:#ae81ff">0</span>
</span></span><span style="display:flex;"><span>              <span style="color:#ae81ff">2</span> RETURN_VALUE
</span></span></code></pre></div><p>访问函数的<code>__code__</code>属性便能获得函数的code对象，code对象包含了这个函数解析后的字节码，使用<code>opcode</code>模块可获取字节码对应的指令。</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span><span style="color:#f92672">import</span> opcode
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">def</span> <span style="color:#a6e22e">add</span>(a, b):
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">return</span> a <span style="color:#f92672">+</span> b
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>add<span style="color:#f92672">.</span>__code__<span style="color:#f92672">.</span>co_code
</span></span><span style="display:flex;"><span><span style="color:#75715e"># b&#39;|\x00|\x01\x17\x00S\x00&#39;</span>
</span></span><span style="display:flex;"><span>list(add<span style="color:#f92672">.</span>__code__<span style="color:#f92672">.</span>co_code)
</span></span><span style="display:flex;"><span><span style="color:#75715e"># [124, 0, 124, 1, 23, 0, 83, 0]</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">for</span> code <span style="color:#f92672">in</span> list(add<span style="color:#f92672">.</span>__code__<span style="color:#f92672">.</span>co_code):
</span></span><span style="display:flex;"><span>    print(opcode<span style="color:#f92672">.</span>opname[code])
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># LOAD_FAST</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># &lt;0&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># LOAD_FAST</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># POP_TOP</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># BINARY_ADD</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># &lt;0&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># RETURN_VALUE</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># &lt;0&gt;</span>
</span></span></code></pre></div><div class="gdoc-page__anchorwrap">
    <h2 id="17-legb">
        1.7 LEGB
        <a data-clipboard-text="https://blog.wujy.vip/posts/a_bit_of_python/#17-legb" class="gdoc-page__anchor gdoc-page__anchor--right clip" title="Anchor to: 1.7 LEGB" aria-label="Anchor to: 1.7 LEGB" href="#17-legb">
            <svg class="gdoc-icon gdoc_link"><use xlink:href="#gdoc_link"></use></svg>
        </a>
    </h2>
</div>
<p>LEGB规则定义了Python对命名空间的查找顺序。</p>
<p>具体如下：</p>
<ol>
<li><strong>Locals</strong> 函数内的命名空间</li>
<li><strong>Enclosing</strong> 外层函数的命名空间</li>
<li><strong>Globals</strong> 所在模块命名空间</li>
<li><strong>Builtins</strong> Python内置模块的名字空间</li>
</ol>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span><span style="color:#66d9ef">def</span> <span style="color:#a6e22e">outside</span>():
</span></span><span style="display:flex;"><span>    v <span style="color:#f92672">=</span> <span style="color:#ae81ff">2</span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">def</span> <span style="color:#a6e22e">inside</span>():
</span></span><span style="display:flex;"><span>        print( <span style="color:#75715e"># B </span>
</span></span><span style="display:flex;"><span>        v) <span style="color:#75715e"># E</span>
</span></span><span style="display:flex;"><span>    inside() <span style="color:#75715e"># L</span>
</span></span><span style="display:flex;"><span>outside() <span style="color:#75715e"># G</span>
</span></span></code></pre></div><p><strong>globals()</strong></p>
<p>返回当前作用域的全局变量空间</p>
<p><strong>locals()</strong></p>
<p>返回当前作用域的本地变量空间</p>
<div class="gdoc-page__anchorwrap">
    <h2 id="18-mro">
        1.8 MRO
        <a data-clipboard-text="https://blog.wujy.vip/posts/a_bit_of_python/#18-mro" class="gdoc-page__anchor gdoc-page__anchor--right clip" title="Anchor to: 1.8 MRO" aria-label="Anchor to: 1.8 MRO" href="#18-mro">
            <svg class="gdoc-icon gdoc_link"><use xlink:href="#gdoc_link"></use></svg>
        </a>
    </h2>
</div>
<p><code>MRO</code>决定了Python多继承中的方法解析顺序。</p>
<p>假如下面的一个类结构，D继承了B和C，B和C分别继承了A。</p>
<p><img
  src="./img/1.7.1.png"
  alt=""
  
/></p>
<p>代码如下，其中A类和C类拥有方法<code>f</code>，分别打印A和C：</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span><span style="color:#66d9ef">class</span> <span style="color:#a6e22e">A</span>:
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">def</span> <span style="color:#a6e22e">f</span>(self):
</span></span><span style="display:flex;"><span>        print(<span style="color:#e6db74">&#39;A&#39;</span>)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">class</span> <span style="color:#a6e22e">B</span>(A): <span style="color:#66d9ef">pass</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">class</span> <span style="color:#a6e22e">C</span>(A):
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">def</span> <span style="color:#a6e22e">f</span>(self):
</span></span><span style="display:flex;"><span>        print(<span style="color:#e6db74">&#39;C&#39;</span>)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">class</span> <span style="color:#a6e22e">D</span>(B, C): <span style="color:#66d9ef">pass</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>D()<span style="color:#f92672">.</span>f()
</span></span></code></pre></div><p>以上的输出在Python 2.7和3.6会有不同的输出，</p>
<p>其中2.7输出的是：</p>
<pre tabindex="0"><code>A
</code></pre><p>而3.6输出的是：</p>
<pre tabindex="0"><code>C
</code></pre><p>导致结果的差异是因为在旧式类（old-style class）和新式类（new-style class）中，MRO的规则有所不同。</p>
<p>执行以下语句：</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span>D<span style="color:#f92672">.</span>__mro__
</span></span></code></pre></div><p>可以看到在旧式类中，方法的查找顺序为D-&gt;B-&gt;A-&gt;C：</p>
<p><img
  src="./img/1.7.2.png"
  alt=""
  
/></p>
<p>而在新式类中，方法的查找顺序为D-&gt;B-&gt;C-&gt;A：</p>
<p><img
  src="./img/1.7.3.png"
  alt=""
  
/></p>
<p>在Python 3.x出现后，就只保留新式类了，采用的MRO规则为C3算法。</p>
<div class="gdoc-page__anchorwrap">
    <h2 id="19-自省">
        1.9 自省
        <a data-clipboard-text="https://blog.wujy.vip/posts/a_bit_of_python/#19-自省" class="gdoc-page__anchor gdoc-page__anchor--right clip" title="Anchor to: 1.9 自省" aria-label="Anchor to: 1.9 自省" href="#19-%e8%87%aa%e7%9c%81">
            <svg class="gdoc-icon gdoc_link"><use xlink:href="#gdoc_link"></use></svg>
        </a>
    </h2>
</div>
<p><code>dir</code>：返回指定对象的属性列表。</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span>a <span style="color:#f92672">=</span> []
</span></span><span style="display:flex;"><span>dir(a)
</span></span><span style="display:flex;"><span><span style="color:#e6db74">&#39;&#39;&#39;
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">[&#39;__add__&#39;, &#39;__class__&#39;, &#39;__contains__&#39;, &#39;__delattr__&#39;, &#39;__delitem__&#39;, &#39;__dir__&#39;, &#39;__doc__&#39;, &#39;__eq__&#39;, &#39;__format__&#39;, &#39;__ge__&#39;, &#39;__getattribute__&#39;, &#39;__getitem__&#39;, &#39;__gt__&#39;, &#39;__hash__&#39;, &#39;__iadd__&#39;, &#39;__imul__&#39;, &#39;__init__&#39;, &#39;__init_subclass__&#39;, &#39;__iter__&#39;, &#39;__le__&#39;, &#39;__len__&#39;, &#39;__lt__&#39;, &#39;__mul__&#39;, &#39;__ne__&#39;, &#39;__new__&#39;, &#39;__reduce__&#39;, &#39;__reduce_ex__&#39;, &#39;__repr__&#39;, &#39;__reversed__&#39;, &#39;__rmul__&#39;, &#39;__setattr__&#39;, &#39;__setitem__&#39;, &#39;__sizeof__&#39;, &#39;__str__&#39;, &#39;__subclasshook__&#39;, &#39;append&#39;, &#39;clear&#39;, &#39;copy&#39;, &#39;count&#39;, &#39;extend&#39;, &#39;index&#39;, &#39;insert&#39;, &#39;pop&#39;, &#39;remove&#39;, &#39;reverse&#39;, &#39;sort&#39;]
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">&#39;&#39;&#39;</span>
</span></span></code></pre></div><p><code>getattr</code>：获取一个对象中的属性，若不存在则抛出AttributeError异常，如果指定了默认值则返回默认值。</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span><span style="color:#66d9ef">class</span> <span style="color:#a6e22e">A</span>:
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">pass</span>
</span></span><span style="display:flex;"><span>getattr(A, <span style="color:#e6db74">&#39;a&#39;</span>)
</span></span><span style="display:flex;"><span><span style="color:#75715e"># AttributeError: type object &#39;A&#39; has no attribute &#39;a&#39;</span>
</span></span><span style="display:flex;"><span>getattr(A, <span style="color:#e6db74">&#39;a&#39;</span>, <span style="color:#ae81ff">1</span>)
</span></span><span style="display:flex;"><span><span style="color:#75715e"># 1</span>
</span></span></code></pre></div><p><code>hasattr</code>：检查一个对象是否有指定的属性。</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span>hasattr(A, <span style="color:#e6db74">&#39;a&#39;</span>)
</span></span><span style="display:flex;"><span><span style="color:#75715e"># False</span>
</span></span></code></pre></div><p><code>setattr</code>：给一个对象的设置属性名和属性名的对应值。</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span><span style="color:#66d9ef">if</span> <span style="color:#f92672">not</span> hasattr(A, <span style="color:#e6db74">&#39;a&#39;</span>):
</span></span><span style="display:flex;"><span>    setattr(A, <span style="color:#e6db74">&#39;a&#39;</span>, <span style="color:#ae81ff">2</span>)
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">if</span> hasattr(A, <span style="color:#e6db74">&#39;a&#39;</span>):
</span></span><span style="display:flex;"><span>    getattr(A, <span style="color:#e6db74">&#39;a&#39;</span>)
</span></span><span style="display:flex;"><span><span style="color:#75715e"># 2</span>
</span></span></code></pre></div><p><code>inspect</code>：一个非常有用的内置模块，能够非常方便的获取对象信息。</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span><span style="color:#f92672">import</span> inspect
</span></span><span style="display:flex;"><span>inspect<span style="color:#f92672">.</span>getmembers(a)
</span></span></code></pre></div><div class="gdoc-page__anchorwrap">
    <h2 id="110-垃圾回收">
        1.10 垃圾回收
        <a data-clipboard-text="https://blog.wujy.vip/posts/a_bit_of_python/#110-垃圾回收" class="gdoc-page__anchor gdoc-page__anchor--right clip" title="Anchor to: 1.10 垃圾回收" aria-label="Anchor to: 1.10 垃圾回收" href="#110-%e5%9e%83%e5%9c%be%e5%9b%9e%e6%94%b6">
            <svg class="gdoc-icon gdoc_link"><use xlink:href="#gdoc_link"></use></svg>
        </a>
    </h2>
</div>
<p>Python的垃圾回收方式主要包括引用计数法和分代回收法。</p>
<p><strong>引用计数</strong></p>
<p>Python的垃圾回收主要依赖基于引用计数的回收算法，当一个对象的引用数为0时，Python虚拟机就会考虑回收对象占用的内存。</p>
<p>但引用计数的缺点也十分明显，那就是循环引用的问题，试想有两个容器对象，分别引用了对方作为自己的一个属性，这样在删除其中一个变量后，由于其对象还保留着引用，因此它的内存无法被释放。为了解决这个问题，Python使用了mark-sweep算法，定期扫描跟踪对象的引用情况，释放无用对象的内存。</p>
<p><strong>分代回收</strong></p>
<p>分代回收算法基于弱代假说的思想，即：相对于存活时间长的对象，GC更加频繁去处理那些年轻的对象。</p>
<p>Python的分代回收机制把对象按照存活时间分成三个集合，每一个集合即为一个“代”，分别对于一个链表，当垃圾回收器进行收集时，会首先考虑去检查存活时间较短的对象集合。</p>
<div class="gdoc-page__anchorwrap">
    <h2 id="111-pep8">
        1.11 PEP8
        <a data-clipboard-text="https://blog.wujy.vip/posts/a_bit_of_python/#111-pep8" class="gdoc-page__anchor gdoc-page__anchor--right clip" title="Anchor to: 1.11 PEP8" aria-label="Anchor to: 1.11 PEP8" href="#111-pep8">
            <svg class="gdoc-icon gdoc_link"><use xlink:href="#gdoc_link"></use></svg>
        </a>
    </h2>
</div>
<p>PEP8定义了Python代码的风格指南。</p>
<div class="gdoc-page__anchorwrap">
    <h3 id="命名风格">
        命名风格
        <a data-clipboard-text="https://blog.wujy.vip/posts/a_bit_of_python/#命名风格" class="gdoc-page__anchor gdoc-page__anchor--right clip" title="Anchor to: 命名风格" aria-label="Anchor to: 命名风格" href="#%e5%91%bd%e5%90%8d%e9%a3%8e%e6%a0%bc">
            <svg class="gdoc-icon gdoc_link"><use xlink:href="#gdoc_link"></use></svg>
        </a>
    </h3>
</div>
<ul>
<li><strong>b</strong> (single lowercase letter)</li>
<li><strong>B</strong> (single uppercase letter)</li>
<li><strong>lowercase</strong></li>
<li><strong>lower_case_with_underscores</strong></li>
<li><strong>UPPERCASE</strong></li>
<li><strong>UPPER_CASE_WITH_UNDERSCORES</strong></li>
<li><strong>CapitalizedWords</strong> (or CapWords, or CamelCase &ndash; so named because of the bumpy look of its letters [4]). This is also sometimes known as StudlyCaps.</li>
</ul>
<div class="gdoc-page__anchorwrap">
    <h3 id="函数方法参数">
        函数/方法参数
        <a data-clipboard-text="https://blog.wujy.vip/posts/a_bit_of_python/#函数方法参数" class="gdoc-page__anchor gdoc-page__anchor--right clip" title="Anchor to: 函数/方法参数" aria-label="Anchor to: 函数/方法参数" href="#%e5%87%bd%e6%95%b0%e6%96%b9%e6%b3%95%e5%8f%82%e6%95%b0">
            <svg class="gdoc-icon gdoc_link"><use xlink:href="#gdoc_link"></use></svg>
        </a>
    </h3>
</div>
<ul>
<li>实例方法的第一个参数名用<code>self</code>。</li>
<li>类方法的第一个参数名为<code>cls</code>。</li>
</ul>
<div class="gdoc-page__anchorwrap">
    <h3 id="行最大长度">
        行最大长度
        <a data-clipboard-text="https://blog.wujy.vip/posts/a_bit_of_python/#行最大长度" class="gdoc-page__anchor gdoc-page__anchor--right clip" title="Anchor to: 行最大长度" aria-label="Anchor to: 行最大长度" href="#%e8%a1%8c%e6%9c%80%e5%a4%a7%e9%95%bf%e5%ba%a6">
            <svg class="gdoc-icon gdoc_link"><use xlink:href="#gdoc_link"></use></svg>
        </a>
    </h3>
</div>
<p>一行的最大行宽不能超过79个字符数量，否则需要用反斜杠&rdquo;&quot;结尾将其分成多行。</p>
<div class="gdoc-page__anchorwrap">
    <h3 id="导入模块">
        导入模块
        <a data-clipboard-text="https://blog.wujy.vip/posts/a_bit_of_python/#导入模块" class="gdoc-page__anchor gdoc-page__anchor--right clip" title="Anchor to: 导入模块" aria-label="Anchor to: 导入模块" href="#%e5%af%bc%e5%85%a5%e6%a8%a1%e5%9d%97">
            <svg class="gdoc-icon gdoc_link"><use xlink:href="#gdoc_link"></use></svg>
        </a>
    </h3>
</div>
<p>导入模块时应该注意分行导入：</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span>Yes: <span style="color:#f92672">import</span> os
</span></span><span style="display:flex;"><span>     <span style="color:#f92672">import</span> sys
</span></span><span style="display:flex;"><span>	 <span style="color:#f92672">from</span> subprocess <span style="color:#f92672">import</span> Popen, PIPE
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>No:  <span style="color:#f92672">import</span> sys<span style="color:#f92672">,</span> os
</span></span></code></pre></div><div class="gdoc-page__anchorwrap">
    <h3 id="异常捕获">
        异常捕获
        <a data-clipboard-text="https://blog.wujy.vip/posts/a_bit_of_python/#异常捕获" class="gdoc-page__anchor gdoc-page__anchor--right clip" title="Anchor to: 异常捕获" aria-label="Anchor to: 异常捕获" href="#%e5%bc%82%e5%b8%b8%e6%8d%95%e8%8e%b7">
            <svg class="gdoc-icon gdoc_link"><use xlink:href="#gdoc_link"></use></svg>
        </a>
    </h3>
</div>
<p>捕获异常时要尽量指定其异常类型，否则易导致异常被掩盖等问题。</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span><span style="color:#75715e"># Yes</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">try</span>:
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">import</span> platform_specific_module
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">except</span> <span style="color:#a6e22e">ImportError</span>:
</span></span><span style="display:flex;"><span>    platform_specific_module <span style="color:#f92672">=</span> <span style="color:#66d9ef">None</span>
</span></span></code></pre></div><div class="gdoc-page__anchorwrap">
    <h3 id="比较">
        比较
        <a data-clipboard-text="https://blog.wujy.vip/posts/a_bit_of_python/#比较" class="gdoc-page__anchor gdoc-page__anchor--right clip" title="Anchor to: 比较" aria-label="Anchor to: 比较" href="#%e6%af%94%e8%be%83">
            <svg class="gdoc-icon gdoc_link"><use xlink:href="#gdoc_link"></use></svg>
        </a>
    </h3>
</div>
<p><strong>布尔值比较</strong></p>
<p>不要用<code>==</code>用于布尔值的比较。</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span>Yes:   <span style="color:#66d9ef">if</span> greeting:
</span></span><span style="display:flex;"><span>No:    <span style="color:#66d9ef">if</span> greeting <span style="color:#f92672">==</span> <span style="color:#66d9ef">True</span>:
</span></span><span style="display:flex;"><span>Worse: <span style="color:#66d9ef">if</span> greeting <span style="color:#f92672">is</span> <span style="color:#66d9ef">True</span>:
</span></span></code></pre></div><p><strong>None比较</strong></p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span><span style="color:#75715e"># Yes</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">if</span> foo <span style="color:#f92672">is</span> <span style="color:#f92672">not</span> <span style="color:#66d9ef">None</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">## No</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">if</span> foo <span style="color:#f92672">!==</span> <span style="color:#66d9ef">None</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># No</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">if</span> <span style="color:#f92672">not</span> foo <span style="color:#f92672">is</span> <span style="color:#66d9ef">None</span>
</span></span></code></pre></div><p><strong>类型比较</strong></p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span><span style="color:#75715e"># Yes</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">if</span> isinstance(obj, int):
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># No</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">if</span> type(obj) <span style="color:#f92672">is</span> type(<span style="color:#ae81ff">1</span>):
</span></span></code></pre></div><hr>
<p><a
  class="gdoc-markdown__link"
  href="https://www.python.org/dev/peps/pep-0008/"
  
>PEP 8 - Style Guide for Python Code</a></p>
<div class="gdoc-page__anchorwrap">
    <h2 id="112-模块">
        1.12 模块
        <a data-clipboard-text="https://blog.wujy.vip/posts/a_bit_of_python/#112-模块" class="gdoc-page__anchor gdoc-page__anchor--right clip" title="Anchor to: 1.12 模块" aria-label="Anchor to: 1.12 模块" href="#112-%e6%a8%a1%e5%9d%97">
            <svg class="gdoc-icon gdoc_link"><use xlink:href="#gdoc_link"></use></svg>
        </a>
    </h2>
</div>
<p><code>__name__</code>和<code>__main__</code></p>
<p>当Python源文件被解释器执行时，解释器会把<code>__main__</code>赋值给起始模块的<code>__name__</code>，表示这是程序的主入口模块，而当Python源文件被当作模块被其他模块导入时，<code>__name__</code>的赋值则是模块的名称。</p>
<p>例如现在定义了一个源文件<code>a.py</code>如下：</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span>print(__name__)
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">if</span> __name__ <span style="color:#f92672">==</span> <span style="color:#e6db74">&#39;__main__&#39;</span>:
</span></span><span style="display:flex;"><span>    print(<span style="color:#e6db74">&#39;Hello&#39;</span>)
</span></span></code></pre></div><p>直接执行：</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>python3 a.py
</span></span><span style="display:flex;"><span><span style="color:#75715e"># __main__</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># Hello</span>
</span></span></code></pre></div><p>可以看到这时候<code>a.py</code>中的<code>__name__</code>的值是<code>__main__</code>，而现在编写另一个文件<code>b.py</code>，并且把<code>a</code>作为模块导入：</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span><span style="color:#f92672">import</span> a
</span></span><span style="display:flex;"><span><span style="color:#75715e"># a</span>
</span></span></code></pre></div><p>这时候看到<code>a.py</code>中的<code>__name__</code>的值已经变成了<code>a</code>，因此也不会输出Hello。</p>
<p>使用<code>if __name__ == '__main__'</code>这种方式可以把模块即能当作模块来使用，也能当作脚本来直接执行，在Python中有几个模块就是采用了这种方式：</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>python3 -m http.server
</span></span><span style="display:flex;"><span>python3 -m pip install requests
</span></span><span style="display:flex;"><span>cat test.json | python3 -m json.tool
</span></span></code></pre></div><p><code>__init__.py</code>和<code>__all__</code></p>
<p>在文件夹中定义一个名为<code>__init__.py</code>的文件意思是告诉解释器把目录当成一个Python模块。</p>
<p>例如现在定义了下面的一个目录：</p>
<pre tabindex="0"><code>├── __init__.py
├── l1.py
└── sub_package
    ├── __init__.py
    └── l2.py
</code></pre><p>l1.py</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span><span style="color:#f92672">from</span> sub_package.l2 <span style="color:#f92672">import</span> l2_f
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>l2_f()
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">from</span> sub_package <span style="color:#f92672">import</span> l2_f
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>l2_f()
</span></span></code></pre></div><p>sub_package/_<em>init_</em>.py</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span><span style="color:#f92672">from</span> .l2 <span style="color:#f92672">import</span> l2_f
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>__all__ <span style="color:#f92672">=</span> [<span style="color:#e6db74">&#39;l2_f&#39;</span>]
</span></span></code></pre></div><p>sub_package/l2.py</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span><span style="color:#66d9ef">def</span> <span style="color:#a6e22e">l2_f</span>():
</span></span><span style="display:flex;"><span>    print(<span style="color:#e6db74">&#39;l2&#39;</span>)
</span></span></code></pre></div><p>执行a.py：</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>python3 l1.py
</span></span><span style="display:flex;"><span><span style="color:#75715e"># l2</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># l2</span>
</span></span></code></pre></div><p>这两种方式都能导入<code>l2.py</code>中的函数，而在后面的导入方式中，当<code>l1.py</code>试图从<code>sub_package</code>导入一个函数时，它会检查sub_package目录下的<code>__init__.py</code>，而<code>__init__.py</code>把<code>l2.py</code>的函数导入进了自身的命名空间里面，于是<code>l2_f</code>函数可以顺利被<code>l1.py</code>导入。</p>
<p><code>__all__</code>指定了模块暴露的接口列表。</p>
<div class="gdoc-page__anchorwrap">
    <h1 id="2-容器">
        2. 容器
        <a data-clipboard-text="https://blog.wujy.vip/posts/a_bit_of_python/#2-容器" class="gdoc-page__anchor gdoc-page__anchor--right clip" title="Anchor to: 2. 容器" aria-label="Anchor to: 2. 容器" href="#2-%e5%ae%b9%e5%99%a8">
            <svg class="gdoc-icon gdoc_link"><use xlink:href="#gdoc_link"></use></svg>
        </a>
    </h1>
</div>
<p>Python包括多种容器数据类型：</p>
<div class=table-wrap> <table>
<thead>
<tr>
<th><strong>数据类型</strong></th>
<th><strong>可变</strong></th>
<th><strong>有序</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td>list</td>
<td>yes</td>
<td>yes</td>
</tr>
<tr>
<td>tuple</td>
<td>no</td>
<td>yes</td>
</tr>
<tr>
<td>str</td>
<td>no</td>
<td>yes</td>
</tr>
<tr>
<td>range</td>
<td>no</td>
<td>yes</td>
</tr>
<tr>
<td>bytes</td>
<td>no</td>
<td>yes</td>
</tr>
<tr>
<td>bytearray</td>
<td>yes</td>
<td>yes</td>
</tr>
<tr>
<td>array</td>
<td>yes</td>
<td>yes</td>
</tr>
<tr>
<td>set</td>
<td>yes</td>
<td>no</td>
</tr>
<tr>
<td>frozenset</td>
<td>no</td>
<td>no</td>
</tr>
<tr>
<td>dict</td>
<td>yes</td>
<td>no</td>
</tr>
<tr>
<td>OrderedDict</td>
<td>yes</td>
<td>yes</td>
</tr>
</tbody>
</table> </div>
<div class="gdoc-page__anchorwrap">
    <h2 id="鸭子类型">
        鸭子类型
        <a data-clipboard-text="https://blog.wujy.vip/posts/a_bit_of_python/#鸭子类型" class="gdoc-page__anchor gdoc-page__anchor--right clip" title="Anchor to: 鸭子类型" aria-label="Anchor to: 鸭子类型" href="#%e9%b8%ad%e5%ad%90%e7%b1%bb%e5%9e%8b">
            <svg class="gdoc-icon gdoc_link"><use xlink:href="#gdoc_link"></use></svg>
        </a>
    </h2>
</div>
<p>首先看鸭子类型（duck typing）的定义：</p>
<blockquote>
<p>当看到一只鸟走起来像鸭子、游泳起来像鸭子、叫起来也像鸭子，那么这只鸟就可以被称为鸭子。</p>
</blockquote>
<p>Python的容器抽象类也有鸭子类型的体现，看下面这个例子：</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span><span style="color:#f92672">from</span> collections.abc <span style="color:#f92672">import</span> Sized
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">class</span> <span style="color:#a6e22e">A</span>:
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">def</span> __len__(self):
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">return</span> <span style="color:#ae81ff">0</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>len(A())
</span></span><span style="display:flex;"><span><span style="color:#75715e"># 0</span>
</span></span><span style="display:flex;"><span>issubclass(A, Sized) <span style="color:#75715e"># use __instancecheck__</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># True</span>
</span></span><span style="display:flex;"><span>isinstance(A(), Sized) <span style="color:#75715e"># use __subclasscheck__</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># True</span>
</span></span></code></pre></div><p>定义了一个类<code>A</code>，并定义了它的<code>__len__</code>方法，这个方法会在调用<code>len</code>函数时被调用到。</p>
<p><code>Sized</code>是一个<code>collections.abc</code>模块定义的一个容器抽象类，但是<code>A</code>类没有继承<code>Sized</code>类，为什么Python却认为<code>A</code>是<code>Sized</code>的一个子类呢？</p>
<p>如果仔细看<code>Sized</code>类的定义，它实现了一个<code>__subclasshook__</code>的方法，这个方法会在执行<code>issubclass</code>函数时会被调用，<code>Sized</code>类会检查<code>A</code>是否拥有一个名为<code>__len__</code>的方法，如果拥有则返回True，于是<code>issubclass</code>的调用会返回True。</p>
<p>这也就体现了，如果<code>A</code>拥有<code>__len__</code>的方法，那么它就是一个<code>Sized</code>。</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span><span style="color:#66d9ef">class</span> <span style="color:#a6e22e">Sized</span>(metaclass<span style="color:#f92672">=</span>ABCMeta):
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    __slots__ <span style="color:#f92672">=</span> ()
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">@abstractmethod</span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">def</span> __len__(self):
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">return</span> <span style="color:#ae81ff">0</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">@classmethod</span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">def</span> <span style="color:#a6e22e">__subclasshook__</span>(cls, C):
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">if</span> cls <span style="color:#f92672">is</span> Sized:
</span></span><span style="display:flex;"><span>            <span style="color:#66d9ef">if</span> any(<span style="color:#e6db74">&#34;__len__&#34;</span> <span style="color:#f92672">in</span> B<span style="color:#f92672">.</span>__dict__ <span style="color:#66d9ef">for</span> B <span style="color:#f92672">in</span> C<span style="color:#f92672">.</span>__mro__):
</span></span><span style="display:flex;"><span>                <span style="color:#66d9ef">return</span> <span style="color:#66d9ef">True</span>
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">return</span> NotImplemented
</span></span></code></pre></div><p>下图是<code>list</code>与其它容器类之间的关系：</p>
<p><img
  src="./img/2.0.1.png"
  alt=""
  
/></p>
<p>了解更多抽象容器类可查看<code>collections.abc</code>这个模块。</p>
<div class="gdoc-page__anchorwrap">
    <h2 id="21-列表">
        2.1 列表
        <a data-clipboard-text="https://blog.wujy.vip/posts/a_bit_of_python/#21-列表" class="gdoc-page__anchor gdoc-page__anchor--right clip" title="Anchor to: 2.1 列表" aria-label="Anchor to: 2.1 列表" href="#21-%e5%88%97%e8%a1%a8">
            <svg class="gdoc-icon gdoc_link"><use xlink:href="#gdoc_link"></use></svg>
        </a>
    </h2>
</div>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span>l <span style="color:#f92672">=</span> []
</span></span><span style="display:flex;"><span>l<span style="color:#f92672">.</span>append(<span style="color:#ae81ff">1</span>)
</span></span><span style="display:flex;"><span><span style="color:#75715e"># [1]</span>
</span></span><span style="display:flex;"><span>l<span style="color:#f92672">.</span>extend([<span style="color:#ae81ff">2</span>, <span style="color:#ae81ff">3</span>])
</span></span><span style="display:flex;"><span><span style="color:#75715e"># [1, 2, 3]</span>
</span></span><span style="display:flex;"><span>l<span style="color:#f92672">.</span>pop()
</span></span><span style="display:flex;"><span><span style="color:#75715e"># [1, 2]</span>
</span></span><span style="display:flex;"><span>l<span style="color:#f92672">.</span>insert(<span style="color:#ae81ff">1</span>, <span style="color:#ae81ff">3</span>)
</span></span><span style="display:flex;"><span><span style="color:#75715e"># [1, 3, 2]</span>
</span></span><span style="display:flex;"><span>l<span style="color:#f92672">.</span>index(<span style="color:#ae81ff">1</span>)
</span></span><span style="display:flex;"><span><span style="color:#75715e"># 0</span>
</span></span><span style="display:flex;"><span>l<span style="color:#f92672">.</span>sort()
</span></span><span style="display:flex;"><span><span style="color:#75715e"># [1, 2, 3]</span>
</span></span><span style="display:flex;"><span>l<span style="color:#f92672">.</span>reverse()
</span></span><span style="display:flex;"><span><span style="color:#75715e"># [3, 2, 1]</span>
</span></span><span style="display:flex;"><span>l<span style="color:#f92672">.</span>count(<span style="color:#ae81ff">2</span>)
</span></span><span style="display:flex;"><span><span style="color:#75715e"># 1</span>
</span></span><span style="display:flex;"><span>l<span style="color:#f92672">.</span>remove(<span style="color:#ae81ff">1</span>)
</span></span><span style="display:flex;"><span><span style="color:#75715e"># [3, 2]</span>
</span></span><span style="display:flex;"><span>l<span style="color:#f92672">.</span>clear()
</span></span><span style="display:flex;"><span><span style="color:#75715e"># []</span>
</span></span></code></pre></div><div class="gdoc-page__anchorwrap">
    <h2 id="22-元组">
        2.2 元组
        <a data-clipboard-text="https://blog.wujy.vip/posts/a_bit_of_python/#22-元组" class="gdoc-page__anchor gdoc-page__anchor--right clip" title="Anchor to: 2.2 元组" aria-label="Anchor to: 2.2 元组" href="#22-%e5%85%83%e7%bb%84">
            <svg class="gdoc-icon gdoc_link"><use xlink:href="#gdoc_link"></use></svg>
        </a>
    </h2>
</div>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span>t <span style="color:#f92672">=</span> (<span style="color:#ae81ff">1</span>, <span style="color:#ae81ff">2</span>)
</span></span><span style="display:flex;"><span>t[<span style="color:#ae81ff">0</span>]
</span></span><span style="display:flex;"><span><span style="color:#75715e"># 1</span>
</span></span><span style="display:flex;"><span>t[<span style="color:#ae81ff">1</span>]
</span></span><span style="display:flex;"><span><span style="color:#75715e"># 2</span>
</span></span></code></pre></div><div class="gdoc-page__anchorwrap">
    <h2 id="23-字典">
        2.3 字典
        <a data-clipboard-text="https://blog.wujy.vip/posts/a_bit_of_python/#23-字典" class="gdoc-page__anchor gdoc-page__anchor--right clip" title="Anchor to: 2.3 字典" aria-label="Anchor to: 2.3 字典" href="#23-%e5%ad%97%e5%85%b8">
            <svg class="gdoc-icon gdoc_link"><use xlink:href="#gdoc_link"></use></svg>
        </a>
    </h2>
</div>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span>d <span style="color:#f92672">=</span> {}
</span></span><span style="display:flex;"><span>d[<span style="color:#e6db74">&#39;a&#39;</span>] <span style="color:#f92672">=</span> <span style="color:#ae81ff">1</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># {&#39;a&#39;: 1}</span>
</span></span><span style="display:flex;"><span>d<span style="color:#f92672">.</span>get(<span style="color:#e6db74">&#39;a&#39;</span>)
</span></span><span style="display:flex;"><span><span style="color:#75715e"># 1</span>
</span></span><span style="display:flex;"><span>d<span style="color:#f92672">.</span>get(<span style="color:#e6db74">&#39;b&#39;</span>)
</span></span><span style="display:flex;"><span><span style="color:#75715e"># None</span>
</span></span><span style="display:flex;"><span>d<span style="color:#f92672">.</span>get(<span style="color:#e6db74">&#39;b&#39;</span>, <span style="color:#ae81ff">2</span>)
</span></span><span style="display:flex;"><span><span style="color:#75715e"># 2</span>
</span></span><span style="display:flex;"><span>d<span style="color:#f92672">.</span>values()
</span></span><span style="display:flex;"><span><span style="color:#75715e"># dict_values([1])</span>
</span></span><span style="display:flex;"><span>d<span style="color:#f92672">.</span>keys()
</span></span><span style="display:flex;"><span><span style="color:#75715e"># dict_keys([&#39;a&#39;])</span>
</span></span><span style="display:flex;"><span>d<span style="color:#f92672">.</span>items()
</span></span><span style="display:flex;"><span><span style="color:#75715e"># dict_items([(&#39;a&#39;, 1)])</span>
</span></span><span style="display:flex;"><span>d<span style="color:#f92672">.</span>pop(<span style="color:#e6db74">&#39;a&#39;</span>)
</span></span><span style="display:flex;"><span><span style="color:#75715e"># 1</span>
</span></span><span style="display:flex;"><span>d
</span></span><span style="display:flex;"><span><span style="color:#75715e"># {}</span>
</span></span></code></pre></div><div class="gdoc-page__anchorwrap">
    <h2 id="24-集合">
        2.4 集合
        <a data-clipboard-text="https://blog.wujy.vip/posts/a_bit_of_python/#24-集合" class="gdoc-page__anchor gdoc-page__anchor--right clip" title="Anchor to: 2.4 集合" aria-label="Anchor to: 2.4 集合" href="#24-%e9%9b%86%e5%90%88">
            <svg class="gdoc-icon gdoc_link"><use xlink:href="#gdoc_link"></use></svg>
        </a>
    </h2>
</div>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span>s1 <span style="color:#f92672">=</span> set([<span style="color:#ae81ff">1</span>, <span style="color:#ae81ff">2</span>, <span style="color:#ae81ff">3</span>])
</span></span><span style="display:flex;"><span>s2 <span style="color:#f92672">=</span> set([<span style="color:#ae81ff">3</span>, <span style="color:#ae81ff">4</span>, <span style="color:#ae81ff">5</span>])
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>s1 <span style="color:#f92672">-</span> s2
</span></span><span style="display:flex;"><span><span style="color:#75715e"># {1, 2}</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>s1 <span style="color:#f92672">&amp;</span> s2
</span></span><span style="display:flex;"><span><span style="color:#75715e"># {3}</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>s1 <span style="color:#f92672">|</span> s2
</span></span><span style="display:flex;"><span><span style="color:#75715e"># {1, 2, 3, 4, 5}</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>s1 <span style="color:#f92672">^</span> s2
</span></span><span style="display:flex;"><span><span style="color:#75715e"># {1, 2, 4, 5}</span>
</span></span></code></pre></div><div class="gdoc-page__anchorwrap">
    <h2 id="25-字符串">
        2.5 字符串
        <a data-clipboard-text="https://blog.wujy.vip/posts/a_bit_of_python/#25-字符串" class="gdoc-page__anchor gdoc-page__anchor--right clip" title="Anchor to: 2.5 字符串" aria-label="Anchor to: 2.5 字符串" href="#25-%e5%ad%97%e7%ac%a6%e4%b8%b2">
            <svg class="gdoc-icon gdoc_link"><use xlink:href="#gdoc_link"></use></svg>
        </a>
    </h2>
</div>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span>s <span style="color:#f92672">=</span> <span style="color:#e6db74">&#39;string&#39;</span>
</span></span><span style="display:flex;"><span>b <span style="color:#f92672">=</span> <span style="color:#e6db74">b</span><span style="color:#e6db74">&#39;string&#39;</span>
</span></span><span style="display:flex;"><span>b <span style="color:#f92672">==</span> s
</span></span><span style="display:flex;"><span><span style="color:#75715e"># False</span>
</span></span><span style="display:flex;"><span>b <span style="color:#f92672">==</span> s<span style="color:#f92672">.</span>encode()
</span></span><span style="display:flex;"><span><span style="color:#75715e"># True</span>
</span></span><span style="display:flex;"><span>memoryview(b)<span style="color:#f92672">.</span>to_list()
</span></span><span style="display:flex;"><span><span style="color:#75715e"># [115, 116, 114, 105, 110, 103]</span>
</span></span><span style="display:flex;"><span><span style="color:#e6db74">&#39;-&#39;</span><span style="color:#f92672">.</span>join(map(chr, memoryview(s<span style="color:#f92672">.</span>encode())<span style="color:#f92672">.</span>tolist()))
</span></span><span style="display:flex;"><span><span style="color:#75715e"># &#39;s-t-r-i-n-g&#39;</span>
</span></span></code></pre></div><div class="gdoc-page__anchorwrap">
    <h2 id="26-双向队列">
        2.6 双向队列
        <a data-clipboard-text="https://blog.wujy.vip/posts/a_bit_of_python/#26-双向队列" class="gdoc-page__anchor gdoc-page__anchor--right clip" title="Anchor to: 2.6 双向队列" aria-label="Anchor to: 2.6 双向队列" href="#26-%e5%8f%8c%e5%90%91%e9%98%9f%e5%88%97">
            <svg class="gdoc-icon gdoc_link"><use xlink:href="#gdoc_link"></use></svg>
        </a>
    </h2>
</div>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span><span style="color:#f92672">from</span> collections <span style="color:#f92672">import</span> deque
</span></span><span style="display:flex;"><span>queue <span style="color:#f92672">=</span> deque([<span style="color:#e6db74">&#34;a&#34;</span>, <span style="color:#e6db74">&#34;b&#34;</span>, <span style="color:#e6db74">&#34;c&#34;</span>])
</span></span><span style="display:flex;"><span>queue<span style="color:#f92672">.</span>append(<span style="color:#e6db74">&#34;d&#34;</span>)
</span></span><span style="display:flex;"><span>queue<span style="color:#f92672">.</span>append(<span style="color:#e6db74">&#34;e&#34;</span>)
</span></span><span style="display:flex;"><span>queue<span style="color:#f92672">.</span>popleft()
</span></span><span style="display:flex;"><span><span style="color:#75715e"># &#39;a&#39;</span>
</span></span><span style="display:flex;"><span>queue<span style="color:#f92672">.</span>popleft()
</span></span><span style="display:flex;"><span><span style="color:#75715e"># &#39;b&#39;</span>
</span></span><span style="display:flex;"><span>queue
</span></span><span style="display:flex;"><span><span style="color:#75715e"># deque([&#39;c&#39;, &#39;d&#39;, &#39;e&#39;])</span>
</span></span></code></pre></div><div class="gdoc-page__anchorwrap">
    <h2 id="27-队列">
        2.7 队列
        <a data-clipboard-text="https://blog.wujy.vip/posts/a_bit_of_python/#27-队列" class="gdoc-page__anchor gdoc-page__anchor--right clip" title="Anchor to: 2.7 队列" aria-label="Anchor to: 2.7 队列" href="#27-%e9%98%9f%e5%88%97">
            <svg class="gdoc-icon gdoc_link"><use xlink:href="#gdoc_link"></use></svg>
        </a>
    </h2>
</div>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span><span style="color:#f92672">from</span> queue <span style="color:#f92672">import</span> Queue
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>q <span style="color:#f92672">=</span> Queue()
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>q<span style="color:#f92672">.</span>put(<span style="color:#ae81ff">1</span>)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>q<span style="color:#f92672">.</span>get()
</span></span><span style="display:flex;"><span><span style="color:#75715e"># 1</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>q<span style="color:#f92672">.</span>empty()
</span></span><span style="display:flex;"><span><span style="color:#75715e"># True</span>
</span></span></code></pre></div><div class="gdoc-page__anchorwrap">
    <h1 id="3函数类">
        3.函数/类
        <a data-clipboard-text="https://blog.wujy.vip/posts/a_bit_of_python/#3函数类" class="gdoc-page__anchor gdoc-page__anchor--right clip" title="Anchor to: 3.函数/类" aria-label="Anchor to: 3.函数/类" href="#3%e5%87%bd%e6%95%b0%e7%b1%bb">
            <svg class="gdoc-icon gdoc_link"><use xlink:href="#gdoc_link"></use></svg>
        </a>
    </h1>
</div>
<div class="gdoc-page__anchorwrap">
    <h2 id="31-函数">
        3.1 函数
        <a data-clipboard-text="https://blog.wujy.vip/posts/a_bit_of_python/#31-函数" class="gdoc-page__anchor gdoc-page__anchor--right clip" title="Anchor to: 3.1 函数" aria-label="Anchor to: 3.1 函数" href="#31-%e5%87%bd%e6%95%b0">
            <svg class="gdoc-icon gdoc_link"><use xlink:href="#gdoc_link"></use></svg>
        </a>
    </h2>
</div>
<div class="gdoc-page__anchorwrap">
    <h3 id="311-栈帧">
        3.1.1 栈帧
        <a data-clipboard-text="https://blog.wujy.vip/posts/a_bit_of_python/#311-栈帧" class="gdoc-page__anchor gdoc-page__anchor--right clip" title="Anchor to: 3.1.1 栈帧" aria-label="Anchor to: 3.1.1 栈帧" href="#311-%e6%a0%88%e5%b8%a7">
            <svg class="gdoc-icon gdoc_link"><use xlink:href="#gdoc_link"></use></svg>
        </a>
    </h3>
</div>
<p>Python通过栈帧来关联函数之间的调用，每次调用函数时，函数的栈帧会放在调用栈上，调用栈的深度随着函数的调用深度增长，栈帧对象包含了函数的code对象，函数的局部变量数据，前一个栈帧和行号等信息。</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span><span style="color:#66d9ef">def</span> <span style="color:#a6e22e">c</span>():
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">pass</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">def</span> <span style="color:#a6e22e">b</span>():
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">pass</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">def</span> <span style="color:#a6e22e">a</span>():
</span></span><span style="display:flex;"><span>    b()
</span></span><span style="display:flex;"><span>    c()
</span></span><span style="display:flex;"><span>    
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">def</span> <span style="color:#a6e22e">go</span>():
</span></span><span style="display:flex;"><span>    a()
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>go()
</span></span></code></pre></div><p><img
  src="./img/3.1.1.png"
  alt=""
  
/></p>
<p>在下面这个例子中，<code>f</code>函数通过获取调用链中前一个栈帧的信息，拿到<code>add</code>函数栈帧中局部变量<code>a</code>与<code>b</code>的值，使得<code>f</code>函数在不接收参数的情况下完成了透明的加法：</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span><span style="color:#f92672">import</span> inspect
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">def</span> <span style="color:#a6e22e">f</span>():
</span></span><span style="display:flex;"><span>    current_frame <span style="color:#f92672">=</span> inspect<span style="color:#f92672">.</span>currentframe()
</span></span><span style="display:flex;"><span>    back_frame <span style="color:#f92672">=</span> current_frame<span style="color:#f92672">.</span>f_back
</span></span><span style="display:flex;"><span>    a <span style="color:#f92672">=</span> back_frame<span style="color:#f92672">.</span>f_locals[<span style="color:#e6db74">&#39;a&#39;</span>]
</span></span><span style="display:flex;"><span>    b <span style="color:#f92672">=</span> back_frame<span style="color:#f92672">.</span>f_locals[<span style="color:#e6db74">&#39;b&#39;</span>]
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">return</span> a <span style="color:#f92672">+</span> b
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">def</span> <span style="color:#a6e22e">add</span>(a, b):
</span></span><span style="display:flex;"><span>    print(f())
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>add(<span style="color:#ae81ff">1</span>, <span style="color:#ae81ff">2</span>)
</span></span><span style="display:flex;"><span><span style="color:#75715e"># 3</span>
</span></span></code></pre></div><div class="gdoc-page__anchorwrap">
    <h3 id="312-参数">
        3.1.2 参数
        <a data-clipboard-text="https://blog.wujy.vip/posts/a_bit_of_python/#312-参数" class="gdoc-page__anchor gdoc-page__anchor--right clip" title="Anchor to: 3.1.2 参数" aria-label="Anchor to: 3.1.2 参数" href="#312-%e5%8f%82%e6%95%b0">
            <svg class="gdoc-icon gdoc_link"><use xlink:href="#gdoc_link"></use></svg>
        </a>
    </h3>
</div>
<p>下面这个函数展示了参数的定义形式：</p>
<ul>
<li>a是一个普通参数，调用时必须要指定一个值，否则会报错。</li>
<li>b是一个指定了默认值（None）的参数，如果调用时没有指定值，那么b的值便是None。</li>
<li>args和kwargs分别是一个tuple和dict，它们封装了剩下的可变长参数，其中关键字参数会传递到kwargs上，而非关键字参数会传递到args上。</li>
</ul>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span><span style="color:#66d9ef">def</span> <span style="color:#a6e22e">f</span>(a, b<span style="color:#f92672">=</span><span style="color:#66d9ef">None</span>, <span style="color:#f92672">*</span>args, <span style="color:#f92672">**</span>kwargs):
</span></span><span style="display:flex;"><span>    print(a)
</span></span><span style="display:flex;"><span>    print(b)
</span></span><span style="display:flex;"><span>    print(args)
</span></span><span style="display:flex;"><span>    print(kwargs)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>f(<span style="color:#ae81ff">1</span>, <span style="color:#ae81ff">2</span>, <span style="color:#ae81ff">3</span>, <span style="color:#ae81ff">4</span>, keyword<span style="color:#f92672">=</span><span style="color:#ae81ff">5</span>)
</span></span><span style="display:flex;"><span><span style="color:#75715e"># 1</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># 2</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># (3, 4)</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># {&#39;keyword&#39;: 5}</span>
</span></span></code></pre></div><p>要想查看函数的参数签名信息，可使用<code>inspect</code>模块的<code>signature</code>函数，它会返回一个签名类的对象，上面包含了函数的参数名字以及注解等信息。</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span><span style="color:#f92672">import</span> inspect
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">def</span> <span style="color:#a6e22e">func</span>(f, a: int, b: int):
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">return</span> f(a, b)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>sig <span style="color:#f92672">=</span> inspect<span style="color:#f92672">.</span>signature(func)
</span></span><span style="display:flex;"><span>type(sig)
</span></span><span style="display:flex;"><span><span style="color:#75715e"># &lt;class &#39;inspect.Signature&#39;&gt;</span>
</span></span><span style="display:flex;"><span>sig<span style="color:#f92672">.</span>parameters
</span></span><span style="display:flex;"><span><span style="color:#75715e"># OrderedDict([(&#39;f&#39;, &lt;Parameter &#34;f&#34;&gt;), (&#39;a&#39;, &lt;Parameter &#34;a:int&#34;&gt;), (&#39;b&#39;, &lt;Parameter &#34;b:int&#34;&gt;)])</span>
</span></span><span style="display:flex;"><span>sig<span style="color:#f92672">.</span>parameters<span style="color:#f92672">.</span>get(<span style="color:#e6db74">&#39;a&#39;</span>)<span style="color:#f92672">.</span>annotation
</span></span><span style="display:flex;"><span><span style="color:#75715e"># &lt;class &#39;int&#39;&gt;</span>
</span></span></code></pre></div><p>使用<code>functools</code>模块的<code>partial</code>可以将已知值绑定到函数的一个或多个参数上：</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span><span style="color:#f92672">import</span> operator
</span></span><span style="display:flex;"><span><span style="color:#f92672">from</span> functools <span style="color:#f92672">import</span> partial
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">def</span> <span style="color:#a6e22e">func</span>(f, a: int, b: int):
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">return</span> f(a, b)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>add <span style="color:#f92672">=</span> partial(func, operator<span style="color:#f92672">.</span>add)
</span></span><span style="display:flex;"><span>sub <span style="color:#f92672">=</span> partial(func, operator<span style="color:#f92672">.</span>sub)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>add(<span style="color:#ae81ff">1</span>, <span style="color:#ae81ff">2</span>)
</span></span><span style="display:flex;"><span><span style="color:#75715e"># 3</span>
</span></span><span style="display:flex;"><span>sub(<span style="color:#ae81ff">1</span>, <span style="color:#ae81ff">2</span>)
</span></span><span style="display:flex;"><span><span style="color:#75715e"># -1</span>
</span></span></code></pre></div><div class="gdoc-page__anchorwrap">
    <h3 id="313-装饰器">
        3.1.3 装饰器
        <a data-clipboard-text="https://blog.wujy.vip/posts/a_bit_of_python/#313-装饰器" class="gdoc-page__anchor gdoc-page__anchor--right clip" title="Anchor to: 3.1.3 装饰器" aria-label="Anchor to: 3.1.3 装饰器" href="#313-%e8%a3%85%e9%a5%b0%e5%99%a8">
            <svg class="gdoc-icon gdoc_link"><use xlink:href="#gdoc_link"></use></svg>
        </a>
    </h3>
</div>
<p>装饰器是一个函数，它用于给已有函数扩展功能，它通常接收一个函数作为参数，并返回一个新的函数。</p>
<p>装饰器可配合@符号十分简洁地应用在函数上。</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span><span style="color:#66d9ef">def</span> <span style="color:#a6e22e">tag</span>(func):
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">def</span> <span style="color:#a6e22e">wrapper</span>(<span style="color:#f92672">*</span>args, <span style="color:#f92672">**</span>kwargs):
</span></span><span style="display:flex;"><span>      func_result <span style="color:#f92672">=</span> func(<span style="color:#f92672">*</span>args, <span style="color:#f92672">**</span>kwargs)
</span></span><span style="display:flex;"><span>      <span style="color:#66d9ef">return</span> <span style="color:#e6db74">&#39;&lt;</span><span style="color:#e6db74">{tag}</span><span style="color:#e6db74">&gt;</span><span style="color:#e6db74">{content}</span><span style="color:#e6db74">&lt;/</span><span style="color:#e6db74">{tag}</span><span style="color:#e6db74">&gt;&#39;</span><span style="color:#f92672">.</span>format(tag<span style="color:#f92672">=</span>func<span style="color:#f92672">.</span>__name__, content<span style="color:#f92672">=</span>func_result)
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">return</span> wrapper
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">@tag</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">def</span> <span style="color:#a6e22e">h1</span>(text):
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">return</span> text
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">@tag</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">def</span> <span style="color:#a6e22e">p</span>(text):
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">return</span> text
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">def</span> <span style="color:#a6e22e">div</span>(text):
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">return</span> text
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>html <span style="color:#f92672">=</span> h1(p(<span style="color:#e6db74">&#39;Hello World&#39;</span>))
</span></span><span style="display:flex;"><span>print(html)
</span></span><span style="display:flex;"><span><span style="color:#75715e"># &lt;h1&gt;&lt;p&gt;Hello World&lt;/p&gt;&lt;/h1&gt;</span>
</span></span><span style="display:flex;"><span>html2 <span style="color:#f92672">=</span> tag(div)(<span style="color:#e6db74">&#39;Hello World&#39;</span>)
</span></span><span style="display:flex;"><span>print(html2)
</span></span><span style="display:flex;"><span><span style="color:#75715e"># &lt;div&gt;Hello World&lt;/div&gt;</span>
</span></span></code></pre></div><p>类装饰器</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span><span style="color:#66d9ef">class</span> <span style="color:#a6e22e">Tag</span>:
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">def</span> __init__(self, func):
</span></span><span style="display:flex;"><span>        self<span style="color:#f92672">.</span>func <span style="color:#f92672">=</span> func
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">def</span> __call__(self, <span style="color:#f92672">*</span>args, <span style="color:#f92672">**</span>kwargs):
</span></span><span style="display:flex;"><span>        func_result <span style="color:#f92672">=</span> self<span style="color:#f92672">.</span>func(<span style="color:#f92672">*</span>args, <span style="color:#f92672">**</span>kwargs)
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">return</span> <span style="color:#e6db74">&#39;&lt;</span><span style="color:#e6db74">{tag}</span><span style="color:#e6db74">&gt;</span><span style="color:#e6db74">{content}</span><span style="color:#e6db74">&lt;/</span><span style="color:#e6db74">{tag}</span><span style="color:#e6db74">&gt;&#39;</span><span style="color:#f92672">.</span>format(tag<span style="color:#f92672">=</span>self<span style="color:#f92672">.</span>func<span style="color:#f92672">.</span>__name__, content<span style="color:#f92672">=</span>func_result)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">@Tag</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">def</span> <span style="color:#a6e22e">h1</span>(text):
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">return</span> text
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>html <span style="color:#f92672">=</span> h1(<span style="color:#e6db74">&#39;Hello World&#39;</span>)
</span></span><span style="display:flex;"><span>print(html)
</span></span></code></pre></div><div class="gdoc-page__anchorwrap">
    <h3 id="314-生成器">
        3.1.4 生成器
        <a data-clipboard-text="https://blog.wujy.vip/posts/a_bit_of_python/#314-生成器" class="gdoc-page__anchor gdoc-page__anchor--right clip" title="Anchor to: 3.1.4 生成器" aria-label="Anchor to: 3.1.4 生成器" href="#314-%e7%94%9f%e6%88%90%e5%99%a8">
            <svg class="gdoc-icon gdoc_link"><use xlink:href="#gdoc_link"></use></svg>
        </a>
    </h3>
</div>
<p><code>yield</code>能把一个函数变成一个<code>generator</code>，与<code>return</code>不同，<code>yield</code>在函数中返回值时会保存函数的状态，使下一次调用函数时会从上一次的状态继续执行，即从<code>yield</code>的下一条语句开始执行。</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span><span style="color:#66d9ef">def</span> <span style="color:#a6e22e">fib</span>(max):
</span></span><span style="display:flex;"><span>    n, a, b <span style="color:#f92672">=</span> <span style="color:#ae81ff">0</span>, <span style="color:#ae81ff">0</span>, <span style="color:#ae81ff">1</span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">while</span> n <span style="color:#f92672">&lt;</span> max:
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">yield</span>(b)
</span></span><span style="display:flex;"><span>        a, b <span style="color:#f92672">=</span> b, a <span style="color:#f92672">+</span> b
</span></span><span style="display:flex;"><span>        n <span style="color:#f92672">=</span> n <span style="color:#f92672">+</span> <span style="color:#ae81ff">1</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>f <span style="color:#f92672">=</span> fib(<span style="color:#ae81ff">10</span>)
</span></span><span style="display:flex;"><span>next(f)
</span></span><span style="display:flex;"><span><span style="color:#75715e"># 1</span>
</span></span><span style="display:flex;"><span>next(f)
</span></span><span style="display:flex;"><span><span style="color:#75715e"># 1</span>
</span></span><span style="display:flex;"><span>next(f)
</span></span><span style="display:flex;"><span><span style="color:#75715e"># 2</span>
</span></span><span style="display:flex;"><span>f<span style="color:#f92672">.</span>send(<span style="color:#66d9ef">None</span>)
</span></span><span style="display:flex;"><span><span style="color:#75715e"># 3</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">for</span> num <span style="color:#f92672">in</span> f:
</span></span><span style="display:flex;"><span>    print(num)
</span></span><span style="display:flex;"><span><span style="color:#75715e"># 5</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># 8</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># 13</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># 21</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># 34</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># 55</span>
</span></span><span style="display:flex;"><span>next(f)
</span></span><span style="display:flex;"><span><span style="color:#75715e"># StopIteration</span>
</span></span></code></pre></div><div class="gdoc-page__anchorwrap">
    <h2 id="32类">
        3.2类
        <a data-clipboard-text="https://blog.wujy.vip/posts/a_bit_of_python/#32类" class="gdoc-page__anchor gdoc-page__anchor--right clip" title="Anchor to: 3.2类" aria-label="Anchor to: 3.2类" href="#32%e7%b1%bb">
            <svg class="gdoc-icon gdoc_link"><use xlink:href="#gdoc_link"></use></svg>
        </a>
    </h2>
</div>
<div class="gdoc-page__anchorwrap">
    <h4 id="321-可见性">
        3.2.1 可见性
        <a data-clipboard-text="https://blog.wujy.vip/posts/a_bit_of_python/#321-可见性" class="gdoc-page__anchor gdoc-page__anchor--right clip" title="Anchor to: 3.2.1 可见性" aria-label="Anchor to: 3.2.1 可见性" href="#321-%e5%8f%af%e8%a7%81%e6%80%a7">
            <svg class="gdoc-icon gdoc_link"><use xlink:href="#gdoc_link"></use></svg>
        </a>
    </h4>
</div>
<p>当一个类的方法名前以单下划线或双下滑线开头时，通常表示这个方法是一个私有方法。</p>
<p>但这只是一种约定俗成的方式，对于外部来说，以单下划线开头的方法依然是可见的，而双下划线的方法则被改写成<code>_类名__方法名</code>存放在名字空间中，所以如果B继承了A，它是访问不到以双下划线开头的方法的。</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span><span style="color:#66d9ef">class</span> <span style="color:#a6e22e">A</span>:
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">def</span> <span style="color:#a6e22e">public_method</span>(self):
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">pass</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">def</span> <span style="color:#a6e22e">_private_method</span>(self):
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">pass</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">def</span> <span style="color:#a6e22e">__private_method</span>(self):
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">pass</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>a <span style="color:#f92672">=</span> A()
</span></span><span style="display:flex;"><span>a<span style="color:#f92672">.</span>public_method()
</span></span><span style="display:flex;"><span><span style="color:#75715e"># None</span>
</span></span><span style="display:flex;"><span>a<span style="color:#f92672">.</span>_private_method()
</span></span><span style="display:flex;"><span><span style="color:#75715e"># None</span>
</span></span><span style="display:flex;"><span>a<span style="color:#f92672">.</span>__private_method()
</span></span><span style="display:flex;"><span><span style="color:#75715e"># AttributeError: &#39;A&#39; object has no attribute &#39;__A_private_method&#39;</span>
</span></span><span style="display:flex;"><span>a<span style="color:#f92672">.</span>_A__private_method()
</span></span><span style="display:flex;"><span><span style="color:#75715e"># None</span>
</span></span><span style="display:flex;"><span>A<span style="color:#f92672">.</span>__dict__
</span></span><span style="display:flex;"><span><span style="color:#75715e"># mappingproxy({&#39;_A__private_method&#39;: &lt;function __main__.A.__private_method&gt;,</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#               &#39;__dict__&#39;: &lt;attribute &#39;__dict__&#39; of &#39;A&#39; objects&gt;,</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#               &#39;__doc__&#39;: None,</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#               &#39;__module__&#39;: &#39;__main__&#39;,</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#               &#39;__weakref__&#39;: &lt;attribute &#39;__weakref__&#39; of &#39;A&#39; objects&gt;,</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#               &#39;_private_method&#39;: &lt;function __main__.A._private_method&gt;,</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#               &#39;public_method&#39;: &lt;function __main__.A.public_method&gt;})</span>
</span></span></code></pre></div><div class="gdoc-page__anchorwrap">
    <h4 id="322-函数与绑定方法">
        3.2.2 函数与绑定方法
        <a data-clipboard-text="https://blog.wujy.vip/posts/a_bit_of_python/#322-函数与绑定方法" class="gdoc-page__anchor gdoc-page__anchor--right clip" title="Anchor to: 3.2.2 函数与绑定方法" aria-label="Anchor to: 3.2.2 函数与绑定方法" href="#322-%e5%87%bd%e6%95%b0%e4%b8%8e%e7%bb%91%e5%ae%9a%e6%96%b9%e6%b3%95">
            <svg class="gdoc-icon gdoc_link"><use xlink:href="#gdoc_link"></use></svg>
        </a>
    </h4>
</div>
<p>类方法本质上是一个函数，通过绑定对象的方式依附在类上成为方法。</p>
<p>假如有下面一个类：</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span><span style="color:#66d9ef">class</span> <span style="color:#a6e22e">A</span>:
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">def</span> __init__(self):
</span></span><span style="display:flex;"><span>        self<span style="color:#f92672">.</span>val <span style="color:#f92672">=</span> <span style="color:#ae81ff">1</span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">def</span> <span style="color:#a6e22e">f</span>(self):
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">return</span> self<span style="color:#f92672">.</span>val
</span></span></code></pre></div><p>可以看到f是A的属性列表中的一个函数：</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span>A<span style="color:#f92672">.</span>f
</span></span><span style="display:flex;"><span><span style="color:#75715e"># &lt;function __main__.A.f&gt;</span>
</span></span><span style="display:flex;"><span>A<span style="color:#f92672">.</span>__dict__[<span style="color:#e6db74">&#39;f&#39;</span>]
</span></span><span style="display:flex;"><span><span style="color:#75715e"># &lt;function __main__.A.f&gt;</span>
</span></span></code></pre></div><p>而当直接用<code>A.f()</code>的方式调用<code>f</code>方法时，会抛出一个异常，异常的原因很直接，参数列表有一个<code>self</code>参数，调用时却没有指定这个参数。而用<code>A().f()</code>的方式调用<code>f</code>方法时同样没有指定参数，却能正常执行，这是为什么呢？</p>
<p>执行<code>A().f</code>语句可以发现，这时候的<code>f</code>不再是一个函数，而是一个绑定方法，而它绑定的对象则是一个A的实例对象，换句话说，这时候<code>f</code>参数中的<code>self</code>已经跟这个实例对象绑定在一起了，所以用实例调用一个普通方法时，无须人为地去指定第一个参数。</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span>A<span style="color:#f92672">.</span>f()
</span></span><span style="display:flex;"><span><span style="color:#75715e"># TypeError: f() missing 1 required positional argument: &#39;self&#39;</span>
</span></span><span style="display:flex;"><span>A()<span style="color:#f92672">.</span>f() <span style="color:#75715e"># auto binding</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># 1</span>
</span></span><span style="display:flex;"><span>A()<span style="color:#f92672">.</span>f
</span></span><span style="display:flex;"><span><span style="color:#75715e"># &lt;bound method A.f of &lt;__main__.A object at 0x121a3bac8&gt;&gt;</span>
</span></span></code></pre></div><p>通过调用<code>f</code>函数的<code>__get__</code>（函数的描述器行为）方法来为函数绑定到一个对象上：</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span><span style="color:#66d9ef">class</span> <span style="color:#a6e22e">B</span>:
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">def</span> __init__(self):
</span></span><span style="display:flex;"><span>        self<span style="color:#f92672">.</span>val <span style="color:#f92672">=</span> <span style="color:#e6db74">&#39;B&#39;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>A<span style="color:#f92672">.</span>f<span style="color:#f92672">.</span>__get__(B(), B)
</span></span><span style="display:flex;"><span><span style="color:#75715e"># &lt;bound method A.f of &lt;__main__.B object at 0x111f9b198&gt;&gt;</span>
</span></span><span style="display:flex;"><span>A<span style="color:#f92672">.</span>f<span style="color:#f92672">.</span>__get__(B(), B)()
</span></span><span style="display:flex;"><span><span style="color:#75715e"># B</span>
</span></span></code></pre></div><p>通过<code>types</code>模块的<code>MethodType</code>动态把方法附加到一个实例上：</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span><span style="color:#f92672">import</span> types
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">def</span> <span style="color:#a6e22e">g</span>(self):
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">return</span> self<span style="color:#f92672">.</span>val <span style="color:#f92672">+</span> <span style="color:#ae81ff">1</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>a<span style="color:#f92672">.</span>g <span style="color:#f92672">=</span> types<span style="color:#f92672">.</span>MethodType(g, a)
</span></span><span style="display:flex;"><span>a<span style="color:#f92672">.</span>g()
</span></span><span style="display:flex;"><span><span style="color:#75715e"># 2</span>
</span></span></code></pre></div><div class="gdoc-page__anchorwrap">
    <h4 id="323-实例方法类方法静态方法">
        3.2.3 实例方法、类方法、静态方法
        <a data-clipboard-text="https://blog.wujy.vip/posts/a_bit_of_python/#323-实例方法类方法静态方法" class="gdoc-page__anchor gdoc-page__anchor--right clip" title="Anchor to: 3.2.3 实例方法、类方法、静态方法" aria-label="Anchor to: 3.2.3 实例方法、类方法、静态方法" href="#323-%e5%ae%9e%e4%be%8b%e6%96%b9%e6%b3%95%e7%b1%bb%e6%96%b9%e6%b3%95%e9%9d%99%e6%80%81%e6%96%b9%e6%b3%95">
            <svg class="gdoc-icon gdoc_link"><use xlink:href="#gdoc_link"></use></svg>
        </a>
    </h4>
</div>
<p>类方法分为<strong>普通方法</strong>，<strong>静态方法</strong>和<strong>类方法</strong>，静态方法和类方法可分别通过<code>classmethod</code>和<code>staticmethod</code>装饰器来定义。</p>
<p>区别于普通方法，类方法的第一个参数绑定的是类对象，因此可以不需要实例对象，直接用类调用类方法执行。</p>
<p>而静态方法则没有绑定参数，跟类方法一样，可以通过类或者实例直接调用。</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span><span style="color:#66d9ef">class</span> <span style="color:#a6e22e">C</span>:
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">def</span> <span style="color:#a6e22e">instance_method</span>(self):
</span></span><span style="display:flex;"><span>        print(self)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">@classmethod</span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">def</span> <span style="color:#a6e22e">class_method</span>(cls):
</span></span><span style="display:flex;"><span>        print(cls)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">@staticmethod</span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">def</span> <span style="color:#a6e22e">static_method</span>():
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">pass</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>C<span style="color:#f92672">.</span>instance_method
</span></span><span style="display:flex;"><span><span style="color:#75715e"># &lt;function __main__.C.instance_method&gt;</span>
</span></span><span style="display:flex;"><span>C<span style="color:#f92672">.</span>instance_method()
</span></span><span style="display:flex;"><span><span style="color:#75715e"># TypeError: instance_method() missing 1 required positional argument: &#39;self&#39;</span>
</span></span><span style="display:flex;"><span>C()<span style="color:#f92672">.</span>instance_method()
</span></span><span style="display:flex;"><span><span style="color:#75715e"># &lt;__main__.C object at 0x121133b00&gt;</span>
</span></span><span style="display:flex;"><span>C<span style="color:#f92672">.</span>class_method
</span></span><span style="display:flex;"><span><span style="color:#75715e"># &lt;bound method C.class_method of &lt;class &#39;__main__.C&#39;&gt;&gt;</span>
</span></span><span style="display:flex;"><span>C<span style="color:#f92672">.</span>class_method()
</span></span><span style="display:flex;"><span><span style="color:#75715e"># &lt;class &#39;__main__.C&#39;&gt;</span>
</span></span><span style="display:flex;"><span>C()<span style="color:#f92672">.</span>class_method()
</span></span><span style="display:flex;"><span><span style="color:#75715e"># &lt;class &#39;__main__.C&#39;&gt;</span>
</span></span><span style="display:flex;"><span>C<span style="color:#f92672">.</span>static_method
</span></span><span style="display:flex;"><span><span style="color:#75715e"># &lt;function __main__.C.static_method&gt;</span>
</span></span><span style="display:flex;"><span>C<span style="color:#f92672">.</span>static_method()
</span></span><span style="display:flex;"><span><span style="color:#75715e"># None</span>
</span></span><span style="display:flex;"><span>C()<span style="color:#f92672">.</span>static_method()
</span></span><span style="display:flex;"><span><span style="color:#75715e"># None</span>
</span></span></code></pre></div><p>通过输出可以看到的一点就是，类方法是一个已经绑定类对象的方法，而普通方法和静态方法在被调用前只是一个普通函数。</p>
<div class="gdoc-page__anchorwrap">
    <h4 id="324-property">
        3.2.4 property
        <a data-clipboard-text="https://blog.wujy.vip/posts/a_bit_of_python/#324-property" class="gdoc-page__anchor gdoc-page__anchor--right clip" title="Anchor to: 3.2.4 property" aria-label="Anchor to: 3.2.4 property" href="#324-property">
            <svg class="gdoc-icon gdoc_link"><use xlink:href="#gdoc_link"></use></svg>
        </a>
    </h4>
</div>
<p><code>property</code>是一个内置函数，它可以将方法与属性调用绑定在一起。</p>
<p>看下面这个例子，<code>Person</code>类有个年龄属性<code>age</code>，现在想要在对这个属性赋值时给它加一个类型校验，借助于<code>property</code>函数便能在不需要修改用法的情况下为属性加上getter/setter方法：</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span><span style="color:#66d9ef">class</span> <span style="color:#a6e22e">Person</span>:
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">def</span> __init__(self, age):
</span></span><span style="display:flex;"><span>      self<span style="color:#f92672">.</span>_age <span style="color:#f92672">=</span> age
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">@property</span>
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">def</span> <span style="color:#a6e22e">age</span>(self):
</span></span><span style="display:flex;"><span>      <span style="color:#66d9ef">return</span> self<span style="color:#f92672">.</span>_age
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">@age</span><span style="color:#f92672">.</span>setter
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">def</span> <span style="color:#a6e22e">age</span>(self, age):
</span></span><span style="display:flex;"><span>      <span style="color:#66d9ef">if</span> <span style="color:#f92672">not</span> isinstance(age, int):
</span></span><span style="display:flex;"><span>          <span style="color:#66d9ef">raise</span> <span style="color:#a6e22e">TypeError</span>(<span style="color:#e6db74">&#39;age must be an integer&#39;</span>)
</span></span><span style="display:flex;"><span>      self<span style="color:#f92672">.</span>_age <span style="color:#f92672">=</span> age
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>p <span style="color:#f92672">=</span> Person(<span style="color:#ae81ff">20</span>)
</span></span><span style="display:flex;"><span>print(p<span style="color:#f92672">.</span>age)
</span></span><span style="display:flex;"><span><span style="color:#75715e"># 20</span>
</span></span><span style="display:flex;"><span>p<span style="color:#f92672">.</span>age <span style="color:#f92672">=</span> <span style="color:#ae81ff">30</span>
</span></span><span style="display:flex;"><span>print(p<span style="color:#f92672">.</span>age)
</span></span><span style="display:flex;"><span><span style="color:#75715e"># 30</span>
</span></span><span style="display:flex;"><span>p<span style="color:#f92672">.</span>age <span style="color:#f92672">=</span> <span style="color:#e6db74">&#39;40&#39;</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># Traceback (most recent call last):</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#   File &#34;test.py&#34;, line 20, in &lt;module&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#     p.age = &#39;40&#39;</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#   File &#34;test.py&#34;, line 12, in age</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#     raise TypeError(&#39;age must be an integer&#39;)</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># TypeError: age must be an integer</span>
</span></span></code></pre></div><p><code>property</code>还常用于延迟计算以及属性缓存，例如下面<code>Circle</code>类的<code>area</code>属性，只有在被访问到的情况下才进行计算，并把结果缓存到实例的属性上。</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span><span style="color:#66d9ef">class</span> <span style="color:#a6e22e">Circle</span>(object): 
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">def</span> __init__(self, radius): 
</span></span><span style="display:flex;"><span>    self<span style="color:#f92672">.</span>radius <span style="color:#f92672">=</span> radius 
</span></span><span style="display:flex;"><span>  
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">@property</span>
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">def</span> <span style="color:#a6e22e">area</span>(self): 
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">if</span> <span style="color:#f92672">not</span> hasattr(self, <span style="color:#e6db74">&#39;_cache_area&#39;</span>):
</span></span><span style="display:flex;"><span>        print(<span style="color:#e6db74">&#39;evalute&#39;</span>)
</span></span><span style="display:flex;"><span>        setattr(self, <span style="color:#e6db74">&#39;_cache_area&#39;</span>, <span style="color:#ae81ff">3.14</span> <span style="color:#f92672">*</span> self<span style="color:#f92672">.</span>radius <span style="color:#f92672">**</span> <span style="color:#ae81ff">2</span>)
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">return</span> getattr(self, <span style="color:#e6db74">&#39;_cache_area&#39;</span>)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>c <span style="color:#f92672">=</span> Circle(<span style="color:#ae81ff">4</span>)
</span></span><span style="display:flex;"><span>print(c<span style="color:#f92672">.</span>area)
</span></span><span style="display:flex;"><span><span style="color:#75715e"># evalute</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># 50.24</span>
</span></span><span style="display:flex;"><span>print(c<span style="color:#f92672">.</span>area)
</span></span><span style="display:flex;"><span><span style="color:#75715e"># 50.24</span>
</span></span></code></pre></div><div class="gdoc-page__anchorwrap">
    <h4 id="325-描述器">
        3.2.5 描述器
        <a data-clipboard-text="https://blog.wujy.vip/posts/a_bit_of_python/#325-描述器" class="gdoc-page__anchor gdoc-page__anchor--right clip" title="Anchor to: 3.2.5 描述器" aria-label="Anchor to: 3.2.5 描述器" href="#325-%e6%8f%8f%e8%bf%b0%e5%99%a8">
            <svg class="gdoc-icon gdoc_link"><use xlink:href="#gdoc_link"></use></svg>
        </a>
    </h4>
</div>
<p>上面谈论到的<code>property</code>也好，<code>classmethod</code>和<code>staticmethod</code>也好，甚至是所有的函数，本质上都是实现了描述器协议的对象。</p>
<p>描述器是一个绑定行为的对象属性，如果一个对象定义了<code>__set__()</code>和<code>__get__()</code>，那么它就是一个数据描述器，如果只定义了<code>__get__()</code>，那么它就是一个非数据描述器。</p>
<p>下面定义了一个描述器类<code>Integer</code>，这个类的一个实例作为类属性赋给类C的<code>num</code>变量上，当C的实例访问这个属性时便会触发描述器协议，调用描述器的<code>__get__</code>方法，其中第一个参数是实例本身，而第二个参数是实例所归属的类（是否跟实例方法的调用有异曲同工之妙？），如果属性是以类的形式访问，那么第一个参数的值为<code>None</code>；相似地，当对这个属性进行赋值操作时，则会调用描述器的<code>__set__</code>方法，借用这个特性可以方便对属性做一些校验操作。</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span><span style="color:#66d9ef">class</span> <span style="color:#a6e22e">Integer</span>:
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">def</span> __init__(self, name):
</span></span><span style="display:flex;"><span>        self<span style="color:#f92672">.</span>name <span style="color:#f92672">=</span> name
</span></span><span style="display:flex;"><span>        self<span style="color:#f92672">.</span>val <span style="color:#f92672">=</span> <span style="color:#66d9ef">None</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">def</span> __get__(self, obj, obj_type):
</span></span><span style="display:flex;"><span>        print(obj, obj_type)
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">return</span> self<span style="color:#f92672">.</span>name
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">def</span> __set__(self, obj, val):
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">if</span> <span style="color:#f92672">not</span> isinstance(val, int):
</span></span><span style="display:flex;"><span>            <span style="color:#66d9ef">raise</span> <span style="color:#a6e22e">Exception</span>(<span style="color:#e6db74">&#39;value must be an integer!&#39;</span>)
</span></span><span style="display:flex;"><span>        print(<span style="color:#e6db74">&#39;set value to </span><span style="color:#e6db74">{}</span><span style="color:#e6db74">&#39;</span><span style="color:#f92672">.</span>format(val))
</span></span><span style="display:flex;"><span>        self<span style="color:#f92672">.</span>val <span style="color:#f92672">=</span> val
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">class</span> <span style="color:#a6e22e">C</span>:
</span></span><span style="display:flex;"><span>    num <span style="color:#f92672">=</span> Integer(<span style="color:#e6db74">&#39;i&#39;</span>)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>c <span style="color:#f92672">=</span> C()
</span></span><span style="display:flex;"><span>c<span style="color:#f92672">.</span>num
</span></span><span style="display:flex;"><span><span style="color:#75715e"># &lt;__main__.C object at 0x10cc735c0&gt; &lt;class &#39;__main__.C&#39;&gt;</span>
</span></span><span style="display:flex;"><span>c<span style="color:#f92672">.</span>num <span style="color:#f92672">=</span> <span style="color:#ae81ff">5</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># set value to 5</span>
</span></span><span style="display:flex;"><span>c<span style="color:#f92672">.</span>num <span style="color:#f92672">=</span> <span style="color:#e6db74">&#39;5&#39;</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># Exception: value must be an integer!</span>
</span></span></code></pre></div><p>说到这里已经可以猜到<code>property</code>是如何实现的了，实际上Python官方已经给出了一份模拟<code>property</code>实现的Python代码：</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span><span style="color:#66d9ef">class</span> <span style="color:#a6e22e">Property</span>(object):
</span></span><span style="display:flex;"><span>    <span style="color:#e6db74">&#34;Emulate PyProperty_Type() in Objects/descrobject.c&#34;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">def</span> __init__(self, fget<span style="color:#f92672">=</span><span style="color:#66d9ef">None</span>, fset<span style="color:#f92672">=</span><span style="color:#66d9ef">None</span>, fdel<span style="color:#f92672">=</span><span style="color:#66d9ef">None</span>, doc<span style="color:#f92672">=</span><span style="color:#66d9ef">None</span>):
</span></span><span style="display:flex;"><span>        self<span style="color:#f92672">.</span>fget <span style="color:#f92672">=</span> fget
</span></span><span style="display:flex;"><span>        self<span style="color:#f92672">.</span>fset <span style="color:#f92672">=</span> fset
</span></span><span style="display:flex;"><span>        self<span style="color:#f92672">.</span>fdel <span style="color:#f92672">=</span> fdel
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">if</span> doc <span style="color:#f92672">is</span> <span style="color:#66d9ef">None</span> <span style="color:#f92672">and</span> fget <span style="color:#f92672">is</span> <span style="color:#f92672">not</span> <span style="color:#66d9ef">None</span>:
</span></span><span style="display:flex;"><span>            doc <span style="color:#f92672">=</span> fget<span style="color:#f92672">.</span>__doc__
</span></span><span style="display:flex;"><span>        self<span style="color:#f92672">.</span>__doc__ <span style="color:#f92672">=</span> doc
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">def</span> __get__(self, obj, objtype<span style="color:#f92672">=</span><span style="color:#66d9ef">None</span>):
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">if</span> obj <span style="color:#f92672">is</span> <span style="color:#66d9ef">None</span>:
</span></span><span style="display:flex;"><span>            <span style="color:#66d9ef">return</span> self
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">if</span> self<span style="color:#f92672">.</span>fget <span style="color:#f92672">is</span> <span style="color:#66d9ef">None</span>:
</span></span><span style="display:flex;"><span>            <span style="color:#66d9ef">raise</span> <span style="color:#a6e22e">AttributeError</span>(<span style="color:#e6db74">&#34;unreadable attribute&#34;</span>)
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">return</span> self<span style="color:#f92672">.</span>fget(obj)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">def</span> __set__(self, obj, value):
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">if</span> self<span style="color:#f92672">.</span>fset <span style="color:#f92672">is</span> <span style="color:#66d9ef">None</span>:
</span></span><span style="display:flex;"><span>            <span style="color:#66d9ef">raise</span> <span style="color:#a6e22e">AttributeError</span>(<span style="color:#e6db74">&#34;can&#39;t set attribute&#34;</span>)
</span></span><span style="display:flex;"><span>        self<span style="color:#f92672">.</span>fset(obj, value)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">def</span> __delete__(self, obj):
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">if</span> self<span style="color:#f92672">.</span>fdel <span style="color:#f92672">is</span> <span style="color:#66d9ef">None</span>:
</span></span><span style="display:flex;"><span>            <span style="color:#66d9ef">raise</span> <span style="color:#a6e22e">AttributeError</span>(<span style="color:#e6db74">&#34;can&#39;t delete attribute&#34;</span>)
</span></span><span style="display:flex;"><span>        self<span style="color:#f92672">.</span>fdel(obj)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">def</span> <span style="color:#a6e22e">getter</span>(self, fget):
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">return</span> type(self)(fget, self<span style="color:#f92672">.</span>fset, self<span style="color:#f92672">.</span>fdel, self<span style="color:#f92672">.</span>__doc__)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">def</span> <span style="color:#a6e22e">setter</span>(self, fset):
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">return</span> type(self)(self<span style="color:#f92672">.</span>fget, fset, self<span style="color:#f92672">.</span>fdel, self<span style="color:#f92672">.</span>__doc__)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">def</span> <span style="color:#a6e22e">deleter</span>(self, fdel):
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">return</span> type(self)(self<span style="color:#f92672">.</span>fget, self<span style="color:#f92672">.</span>fset, fdel, self<span style="color:#f92672">.</span>__doc__)
</span></span></code></pre></div><p><code>classmethod</code>的实现则更为简单一些：</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span><span style="color:#66d9ef">class</span> <span style="color:#a6e22e">ClassMethod</span>(object):
</span></span><span style="display:flex;"><span>    <span style="color:#e6db74">&#34;Emulate PyClassMethod_Type() in Objects/funcobject.c&#34;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">def</span> __init__(self, f):
</span></span><span style="display:flex;"><span>        self<span style="color:#f92672">.</span>f <span style="color:#f92672">=</span> f
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">def</span> __get__(self, obj, klass<span style="color:#f92672">=</span><span style="color:#66d9ef">None</span>):
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">if</span> klass <span style="color:#f92672">is</span> <span style="color:#66d9ef">None</span>:
</span></span><span style="display:flex;"><span>            klass <span style="color:#f92672">=</span> type(obj)
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">def</span> <span style="color:#a6e22e">newfunc</span>(<span style="color:#f92672">*</span>args):
</span></span><span style="display:flex;"><span>            <span style="color:#66d9ef">return</span> self<span style="color:#f92672">.</span>f(klass, <span style="color:#f92672">*</span>args)
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">return</span> newfunc
</span></span></code></pre></div><div class="gdoc-page__anchorwrap">
    <h4 id="326-运算符">
        3.2.6 运算符
        <a data-clipboard-text="https://blog.wujy.vip/posts/a_bit_of_python/#326-运算符" class="gdoc-page__anchor gdoc-page__anchor--right clip" title="Anchor to: 3.2.6 运算符" aria-label="Anchor to: 3.2.6 运算符" href="#326-%e8%bf%90%e7%ae%97%e7%ac%a6">
            <svg class="gdoc-icon gdoc_link"><use xlink:href="#gdoc_link"></use></svg>
        </a>
    </h4>
</div>
<p>Python的每个运算符在背后都对于着特定的方法，重写这些方法可以实现自定义操作符应用在对象时的行为。</p>
<p>二元运算符</p>
<div class=table-wrap> <table>
<thead>
<tr>
<th>操作</th>
<th>方法</th>
</tr>
</thead>
<tbody>
<tr>
<td>+</td>
<td>object._<em>add</em>_(self, other)</td>
</tr>
<tr>
<td>-</td>
<td>object._<em>sub</em>_(self, other)</td>
</tr>
<tr>
<td>*</td>
<td>object._<em>mul</em>_(self, other)</td>
</tr>
<tr>
<td>//</td>
<td>object._<em>floordiv</em>_(self, other)</td>
</tr>
<tr>
<td>/</td>
<td>object._<em>truediv</em>_(self, other)</td>
</tr>
<tr>
<td>%</td>
<td>object._<em>mod</em>_(self, other)</td>
</tr>
<tr>
<td>**</td>
<td>object._<em>pow</em>_(self, other[, modulo])</td>
</tr>
<tr>
<td>&laquo;</td>
<td>object._<em>lshift</em>_(self, other)</td>
</tr>
<tr>
<td>&raquo;</td>
<td>object._<em>rshift</em>_(self, other)</td>
</tr>
<tr>
<td>&amp;</td>
<td>object._<em>and</em>_(self, other)</td>
</tr>
<tr>
<td>^</td>
<td>object._<em>xor</em>_(self, other)</td>
</tr>
<tr>
<td>|</td>
<td>object._<em>or</em>_(self, other)</td>
</tr>
</tbody>
</table> </div>
<p>扩展赋值运算符</p>
<div class=table-wrap> <table>
<thead>
<tr>
<th>操作</th>
<th>方法</th>
</tr>
</thead>
<tbody>
<tr>
<td>+=</td>
<td>object._<em>iadd</em>_(self, other)</td>
</tr>
<tr>
<td>-=</td>
<td>object._<em>isub</em>_(self, other)</td>
</tr>
<tr>
<td>*=</td>
<td>object._<em>imul</em>_(self, other)</td>
</tr>
<tr>
<td>/=</td>
<td>object._<em>idiv</em>_(self, other)</td>
</tr>
<tr>
<td>//=</td>
<td>object._<em>ifloordiv</em>_(self, other)</td>
</tr>
<tr>
<td>%=</td>
<td>object._<em>imod</em>_(self, other)</td>
</tr>
<tr>
<td>**=</td>
<td>object._<em>ipow</em>_(self, other[, modulo])</td>
</tr>
<tr>
<td>&laquo;=</td>
<td>object._<em>ilshift</em>_(self, other)</td>
</tr>
<tr>
<td>&raquo;=</td>
<td>object._<em>irshift</em>_(self, other)</td>
</tr>
<tr>
<td>&amp;=</td>
<td>object._<em>iand</em>_(self, other)</td>
</tr>
<tr>
<td>^=</td>
<td>object._<em>ixor</em>_(self, other)</td>
</tr>
<tr>
<td>|=</td>
<td>object._<em>ior</em>_(self, other)</td>
</tr>
</tbody>
</table> </div>
<p>一元运算符</p>
<div class=table-wrap> <table>
<thead>
<tr>
<th>操作</th>
<th>方法</th>
</tr>
</thead>
<tbody>
<tr>
<td>-</td>
<td>object._<em>neg</em>_(self)</td>
</tr>
<tr>
<td>+</td>
<td>object._<em>pos</em>_(self)</td>
</tr>
<tr>
<td>abs()</td>
<td>object._<em>abs</em>_(self)</td>
</tr>
<tr>
<td>~</td>
<td>object._<em>invert</em>_(self)</td>
</tr>
<tr>
<td>complex()</td>
<td>object._<em>complex</em>_(self)</td>
</tr>
<tr>
<td>int()</td>
<td>object._<em>int</em>_(self)</td>
</tr>
<tr>
<td>long()</td>
<td>object._<em>long</em>_(self)</td>
</tr>
<tr>
<td>float()</td>
<td>object._<em>float</em>_(self)</td>
</tr>
<tr>
<td>oct()</td>
<td>object._<em>oct</em>_(self)</td>
</tr>
<tr>
<td>hex()</td>
<td>object._<em>hex</em>_(self)</td>
</tr>
</tbody>
</table> </div>
<p>比较运算符</p>
<div class=table-wrap> <table>
<thead>
<tr>
<th>操作</th>
<th>方法</th>
</tr>
</thead>
<tbody>
<tr>
<td>&lt;</td>
<td>object._<em>lt</em>_(self, other)</td>
</tr>
<tr>
<td>&lt;=</td>
<td>object._<em>le</em>_(self, other)</td>
</tr>
<tr>
<td>==</td>
<td>object._<em>eq</em>_(self, other)</td>
</tr>
<tr>
<td>!=</td>
<td>object._<em>ne</em>_(self, other)</td>
</tr>
<tr>
<td>&gt;=</td>
<td>object._<em>ge</em>_(self, other)</td>
</tr>
<tr>
<td>&gt;</td>
<td>object._<em>gt</em>_(self, other)</td>
</tr>
</tbody>
</table> </div>
<p>覆盖操作符的行为：</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span><span style="color:#66d9ef">class</span> <span style="color:#a6e22e">Num</span>:
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">def</span> __init__(self, val<span style="color:#f92672">=</span><span style="color:#ae81ff">0</span>):
</span></span><span style="display:flex;"><span>        self<span style="color:#f92672">.</span>val <span style="color:#f92672">=</span> val
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">def</span> __add__(self, other):
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">return</span> Num(self<span style="color:#f92672">.</span>val <span style="color:#f92672">-</span> other)
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">def</span> __sub__(self, other):
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">return</span> Num(self<span style="color:#f92672">.</span>val <span style="color:#f92672">+</span> other)
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">def</span> __repr__(self):
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">return</span> str(self<span style="color:#f92672">.</span>val)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>num <span style="color:#f92672">=</span> Num(<span style="color:#ae81ff">1</span>)
</span></span><span style="display:flex;"><span>result <span style="color:#f92672">=</span> num <span style="color:#f92672">+</span> <span style="color:#ae81ff">1</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># 0</span>
</span></span><span style="display:flex;"><span>result <span style="color:#f92672">=</span> num <span style="color:#f92672">-</span> <span style="color:#ae81ff">1</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># 2</span>
</span></span></code></pre></div><div class="gdoc-page__anchorwrap">
    <h4 id="327-slots">
        3.2.7 slots
        <a data-clipboard-text="https://blog.wujy.vip/posts/a_bit_of_python/#327-slots" class="gdoc-page__anchor gdoc-page__anchor--right clip" title="Anchor to: 3.2.7 slots" aria-label="Anchor to: 3.2.7 slots" href="#327-slots">
            <svg class="gdoc-icon gdoc_link"><use xlink:href="#gdoc_link"></use></svg>
        </a>
    </h4>
</div>
<p>对于定义了<code>__slots__</code>的类，无法随意添加属性到类上，而是只能对<code>__slots__</code>指定的属性进行操作。</p>
<p>而这也是一种对于存在大量简单对象时，有效降低内存占用的其中一种方式：</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span><span style="color:#66d9ef">class</span> <span style="color:#a6e22e">MemoryCheck</span>:
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">def</span> __enter__(self):
</span></span><span style="display:flex;"><span>        tracemalloc<span style="color:#f92672">.</span>start()
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">def</span> __exit__(self, exc_type, exc_val, exc_tb):
</span></span><span style="display:flex;"><span>        snapshot <span style="color:#f92672">=</span> tracemalloc<span style="color:#f92672">.</span>take_snapshot()
</span></span><span style="display:flex;"><span>        top_stats <span style="color:#f92672">=</span> snapshot<span style="color:#f92672">.</span>statistics(<span style="color:#e6db74">&#39;lineno&#39;</span>)
</span></span><span style="display:flex;"><span>        print(<span style="color:#e6db74">&#34;[ Top 1 ]&#34;</span>)
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">for</span> stat <span style="color:#f92672">in</span> top_stats[:<span style="color:#ae81ff">1</span>]:
</span></span><span style="display:flex;"><span>            print(stat)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">with</span> MemoryCheck():
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">class</span> <span style="color:#a6e22e">Object</span>:
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">def</span> __init__(self, x, y):
</span></span><span style="display:flex;"><span>            self<span style="color:#f92672">.</span>x <span style="color:#f92672">=</span> x
</span></span><span style="display:flex;"><span>            self<span style="color:#f92672">.</span>y <span style="color:#f92672">=</span> y
</span></span><span style="display:flex;"><span>    objs <span style="color:#f92672">=</span> []
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">for</span> i <span style="color:#f92672">in</span> range(<span style="color:#ae81ff">1000000</span>):
</span></span><span style="display:flex;"><span>        objs<span style="color:#f92672">.</span>append(Object(i, i <span style="color:#f92672">+</span> <span style="color:#ae81ff">1</span>))
</span></span><span style="display:flex;"><span><span style="color:#e6db74">&#39;&#39;&#39;
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">[ Top 1 ]
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">&lt;ipython-input-132-47931446414b&gt;:4: size=107 MiB, count=1999958, average=56 B
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">&#39;&#39;&#39;</span>
</span></span></code></pre></div><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span><span style="color:#66d9ef">with</span> MemoryCheck():
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">class</span> <span style="color:#a6e22e">Object</span>:
</span></span><span style="display:flex;"><span>        __slots__ <span style="color:#f92672">=</span> (<span style="color:#e6db74">&#39;x&#39;</span>, <span style="color:#e6db74">&#39;y&#39;</span>)
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">def</span> __init__(self, x, y):
</span></span><span style="display:flex;"><span>            self<span style="color:#f92672">.</span>x <span style="color:#f92672">=</span> x
</span></span><span style="display:flex;"><span>            self<span style="color:#f92672">.</span>y <span style="color:#f92672">=</span> y
</span></span><span style="display:flex;"><span>    objs <span style="color:#f92672">=</span> []
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">for</span> i <span style="color:#f92672">in</span> range(<span style="color:#ae81ff">1000000</span>):
</span></span><span style="display:flex;"><span>        objs<span style="color:#f92672">.</span>append(Object(i, i <span style="color:#f92672">+</span> <span style="color:#ae81ff">1</span>))
</span></span><span style="display:flex;"><span><span style="color:#e6db74">&#39;&#39;&#39;
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">[ Top 1 ]
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">&lt;ipython-input-133-cc08066bfb2a&gt;:9: size=88.4 MiB, count=1999747, average=46 B
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">&#39;&#39;&#39;</span>
</span></span></code></pre></div><div class="gdoc-page__anchorwrap">
    <h4 id="328-元类">
        3.2.8 元类
        <a data-clipboard-text="https://blog.wujy.vip/posts/a_bit_of_python/#328-元类" class="gdoc-page__anchor gdoc-page__anchor--right clip" title="Anchor to: 3.2.8 元类" aria-label="Anchor to: 3.2.8 元类" href="#328-%e5%85%83%e7%b1%bb">
            <svg class="gdoc-icon gdoc_link"><use xlink:href="#gdoc_link"></use></svg>
        </a>
    </h4>
</div>
<p>元类能动态地创建类，而且也能控制类的创建行为。</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span><span style="color:#f92672">import</span> inspect
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">class</span> <span style="color:#a6e22e">MethodLowerCase</span>(type):
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">def</span> __new__(mcs, name, bases, attrs):
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">for</span> name, val <span style="color:#f92672">in</span> attrs<span style="color:#f92672">.</span>items():
</span></span><span style="display:flex;"><span>            <span style="color:#66d9ef">if</span> callable(val):
</span></span><span style="display:flex;"><span>                <span style="color:#66d9ef">if</span> name<span style="color:#f92672">.</span>lower() <span style="color:#f92672">!=</span> name:
</span></span><span style="display:flex;"><span>                    print(<span style="color:#e6db74">&#39;method: </span><span style="color:#e6db74">{}</span><span style="color:#e6db74"> should be lowercase&#39;</span><span style="color:#f92672">.</span>format(name))
</span></span><span style="display:flex;"><span>                <span style="color:#66d9ef">else</span>:
</span></span><span style="display:flex;"><span>                    print(<span style="color:#e6db74">&#39;method: </span><span style="color:#e6db74">{}</span><span style="color:#e6db74"> is valid&#39;</span><span style="color:#f92672">.</span>format(name))
</span></span><span style="display:flex;"><span>        new_cls <span style="color:#f92672">=</span> type<span style="color:#f92672">.</span>__new__(mcs, name, bases, attrs)
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">return</span> new_cls
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">class</span> <span style="color:#a6e22e">Test</span>(metaclass<span style="color:#f92672">=</span>MethodLowerCase):
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">def</span> <span style="color:#a6e22e">test_a</span>(self):
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">pass</span>
</span></span><span style="display:flex;"><span>    
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">def</span> <span style="color:#a6e22e">testB</span>(self):
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">pass</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># method: test_a is valid</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># method: testB should be lowercase</span>
</span></span></code></pre></div><div class="gdoc-page__anchorwrap">
    <h1 id="4-特性">
        4. 特性
        <a data-clipboard-text="https://blog.wujy.vip/posts/a_bit_of_python/#4-特性" class="gdoc-page__anchor gdoc-page__anchor--right clip" title="Anchor to: 4. 特性" aria-label="Anchor to: 4. 特性" href="#4-%e7%89%b9%e6%80%a7">
            <svg class="gdoc-icon gdoc_link"><use xlink:href="#gdoc_link"></use></svg>
        </a>
    </h1>
</div>
<div class="gdoc-page__anchorwrap">
    <h2 id="41-the-zen-of-python">
        4.1 The Zen of Python
        <a data-clipboard-text="https://blog.wujy.vip/posts/a_bit_of_python/#41-the-zen-of-python" class="gdoc-page__anchor gdoc-page__anchor--right clip" title="Anchor to: 4.1 The Zen of Python" aria-label="Anchor to: 4.1 The Zen of Python" href="#41-the-zen-of-python">
            <svg class="gdoc-icon gdoc_link"><use xlink:href="#gdoc_link"></use></svg>
        </a>
    </h2>
</div>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span><span style="color:#f92672">import</span> this
</span></span></code></pre></div><div class="gdoc-page__anchorwrap">
    <h2 id="42-pythonic">
        4.2 Pythonic
        <a data-clipboard-text="https://blog.wujy.vip/posts/a_bit_of_python/#42-pythonic" class="gdoc-page__anchor gdoc-page__anchor--right clip" title="Anchor to: 4.2 Pythonic" aria-label="Anchor to: 4.2 Pythonic" href="#42-pythonic">
            <svg class="gdoc-icon gdoc_link"><use xlink:href="#gdoc_link"></use></svg>
        </a>
    </h2>
</div>
<p>遍历列表</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span>array <span style="color:#f92672">=</span> [<span style="color:#ae81ff">1</span>, <span style="color:#ae81ff">2</span>, <span style="color:#ae81ff">3</span>, <span style="color:#ae81ff">4</span>, <span style="color:#ae81ff">5</span>]
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">for</span> i <span style="color:#f92672">in</span> range(len(array)):
</span></span><span style="display:flex;"><span>    print (i, array[i])
</span></span><span style="display:flex;"><span>    
</span></span><span style="display:flex;"><span><span style="color:#75715e"># Pythonic </span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">for</span> i, item <span style="color:#f92672">in</span> enumerate(array):
</span></span><span style="display:flex;"><span>    print (i, item)
</span></span></code></pre></div><p>对列表的操作</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span>array <span style="color:#f92672">=</span> [<span style="color:#ae81ff">1</span>, <span style="color:#ae81ff">2</span>, <span style="color:#ae81ff">3</span>, <span style="color:#ae81ff">4</span>, <span style="color:#ae81ff">5</span>]
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>new_array <span style="color:#f92672">=</span> []
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">for</span> item <span style="color:#f92672">in</span> array:
</span></span><span style="display:flex;"><span>    new_array<span style="color:#f92672">.</span>append(str(item))
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># Pythonic</span>
</span></span><span style="display:flex;"><span>new_array <span style="color:#f92672">=</span> [str(item) <span style="color:#66d9ef">for</span> item <span style="color:#f92672">in</span> array]
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># Generator</span>
</span></span><span style="display:flex;"><span>new_array <span style="color:#f92672">=</span> (str(item) <span style="color:#66d9ef">for</span> item <span style="color:#f92672">in</span> array)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># 函数式</span>
</span></span><span style="display:flex;"><span>new_array <span style="color:#f92672">=</span> map(str, array)
</span></span></code></pre></div><p>列表推导</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span><span style="color:#75715e"># 生成列表</span>
</span></span><span style="display:flex;"><span>[ i<span style="color:#f92672">*</span>i <span style="color:#66d9ef">for</span> i <span style="color:#f92672">in</span> range(<span style="color:#ae81ff">10</span>) <span style="color:#66d9ef">if</span> i <span style="color:#f92672">%</span> <span style="color:#ae81ff">2</span> <span style="color:#f92672">==</span> <span style="color:#ae81ff">0</span> ]
</span></span><span style="display:flex;"><span><span style="color:#75715e"># 生成集合</span>
</span></span><span style="display:flex;"><span>{ i<span style="color:#f92672">*</span>i <span style="color:#66d9ef">for</span> i <span style="color:#f92672">in</span> range(<span style="color:#ae81ff">10</span>) <span style="color:#66d9ef">if</span> i <span style="color:#f92672">%</span> <span style="color:#ae81ff">2</span> <span style="color:#f92672">==</span> <span style="color:#ae81ff">0</span> }
</span></span><span style="display:flex;"><span><span style="color:#75715e"># 生成字典</span>
</span></span><span style="display:flex;"><span>{ i:i <span style="color:#66d9ef">for</span> i <span style="color:#f92672">in</span> range(<span style="color:#ae81ff">10</span>) <span style="color:#66d9ef">if</span> i <span style="color:#f92672">%</span> <span style="color:#ae81ff">2</span> <span style="color:#f92672">==</span> <span style="color:#ae81ff">0</span> }
</span></span></code></pre></div><p>上下文管理器</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span>file <span style="color:#f92672">=</span> open(<span style="color:#e6db74">&#39;file&#39;</span>, <span style="color:#e6db74">&#39;w&#39;</span>)
</span></span><span style="display:flex;"><span>file<span style="color:#f92672">.</span>write(<span style="color:#ae81ff">123</span>)
</span></span><span style="display:flex;"><span>file<span style="color:#f92672">.</span>close()
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># Pythonic</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">with</span> open(<span style="color:#e6db74">&#39;file&#39;</span>, <span style="color:#e6db74">&#39;w&#39;</span>) <span style="color:#66d9ef">as</span> file:
</span></span><span style="display:flex;"><span>    file<span style="color:#f92672">.</span>write(<span style="color:#ae81ff">123</span>)
</span></span></code></pre></div><p>条件判断</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span><span style="color:#66d9ef">if</span> x <span style="color:#f92672">is</span> <span style="color:#66d9ef">True</span>:
</span></span><span style="display:flex;"><span>    y <span style="color:#f92672">=</span> <span style="color:#ae81ff">1</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">else</span>:
</span></span><span style="display:flex;"><span>    y <span style="color:#f92672">=</span> <span style="color:#f92672">-</span><span style="color:#ae81ff">1</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># Pythonic</span>
</span></span><span style="display:flex;"><span>y <span style="color:#f92672">=</span> <span style="color:#ae81ff">1</span> <span style="color:#66d9ef">if</span> x <span style="color:#f92672">is</span> <span style="color:#66d9ef">True</span> <span style="color:#66d9ef">else</span> <span style="color:#f92672">-</span><span style="color:#ae81ff">1</span>
</span></span></code></pre></div><p>构造矩阵</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span>y <span style="color:#f92672">=</span> [<span style="color:#ae81ff">0</span> <span style="color:#66d9ef">for</span> _ <span style="color:#f92672">in</span> range(<span style="color:#ae81ff">100000000</span>)]
</span></span><span style="display:flex;"><span><span style="color:#75715e"># Pythonic</span>
</span></span><span style="display:flex;"><span>y <span style="color:#f92672">=</span> [<span style="color:#ae81ff">0</span>] <span style="color:#f92672">*</span> <span style="color:#ae81ff">100000000</span>
</span></span></code></pre></div><p>装饰器</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span><span style="color:#66d9ef">def</span> <span style="color:#a6e22e">logic</span>(x):
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">if</span> x <span style="color:#f92672">&lt;</span> <span style="color:#ae81ff">0</span>:
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">return</span> <span style="color:#66d9ef">False</span>
</span></span><span style="display:flex;"><span>    print (x)
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">return</span> <span style="color:#66d9ef">True</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#Pythonic</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">def</span> <span style="color:#a6e22e">check_gt_zero</span>(func):
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">def</span> <span style="color:#a6e22e">wrapper</span>(x):
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">if</span> x <span style="color:#f92672">&lt;</span> <span style="color:#ae81ff">0</span>:
</span></span><span style="display:flex;"><span>            <span style="color:#66d9ef">return</span> <span style="color:#66d9ef">False</span>
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">return</span> func(x)
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">return</span> wrapper 
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">@check_gt_zero</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">def</span> <span style="color:#a6e22e">logic</span>(x):
</span></span><span style="display:flex;"><span>    print (x)
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">return</span> <span style="color:#66d9ef">True</span>
</span></span></code></pre></div><p>变量交换</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span>temp <span style="color:#f92672">=</span> y
</span></span><span style="display:flex;"><span>y <span style="color:#f92672">=</span> x
</span></span><span style="display:flex;"><span>x <span style="color:#f92672">=</span> temp
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># Pythonic</span>
</span></span><span style="display:flex;"><span>x, y <span style="color:#f92672">=</span> y, x
</span></span></code></pre></div><p>切片</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span>array <span style="color:#f92672">=</span> [<span style="color:#ae81ff">1</span>, <span style="color:#ae81ff">2</span>, <span style="color:#ae81ff">3</span>, <span style="color:#ae81ff">4</span>, <span style="color:#ae81ff">5</span>]
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>l <span style="color:#f92672">=</span> len(array)
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">for</span> i <span style="color:#f92672">in</span> range(l<span style="color:#f92672">/</span><span style="color:#ae81ff">2</span>):
</span></span><span style="display:flex;"><span>    temp <span style="color:#f92672">=</span> array[l <span style="color:#f92672">-</span> i <span style="color:#f92672">-</span> <span style="color:#ae81ff">1</span>]
</span></span><span style="display:flex;"><span>    array[l <span style="color:#f92672">-</span> i <span style="color:#f92672">-</span> <span style="color:#ae81ff">1</span>] <span style="color:#f92672">=</span> array[i]
</span></span><span style="display:flex;"><span>    array[i] <span style="color:#f92672">=</span> temp
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>array <span style="color:#f92672">=</span> list(reversed(array))
</span></span><span style="display:flex;"><span><span style="color:#75715e"># Pythonic</span>
</span></span><span style="display:flex;"><span>array <span style="color:#f92672">=</span> array[::<span style="color:#f92672">-</span><span style="color:#ae81ff">1</span>]
</span></span></code></pre></div><p>读取文件</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span>CHUNK_SIZE <span style="color:#f92672">=</span> <span style="color:#ae81ff">1024</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">with</span> open(<span style="color:#e6db74">&#39;test.json&#39;</span>) <span style="color:#66d9ef">as</span> f:
</span></span><span style="display:flex;"><span>    chunk <span style="color:#f92672">=</span> f<span style="color:#f92672">.</span>read(CHUNK_SIZE)
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">while</span> chunk:
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">if</span> chunk:
</span></span><span style="display:flex;"><span>            print(chunk)
</span></span><span style="display:flex;"><span>        chunk <span style="color:#f92672">=</span> f<span style="color:#f92672">.</span>read(CHUNK_SIZE)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">from</span> functools <span style="color:#f92672">import</span> partial
</span></span><span style="display:flex;"><span><span style="color:#75715e"># Pythonic</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">with</span> open(<span style="color:#e6db74">&#39;test.json&#39;</span>) <span style="color:#66d9ef">as</span> f:
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">for</span> piece <span style="color:#f92672">in</span> iter(partial(f<span style="color:#f92672">.</span>read, CHUNK_SIZE), <span style="color:#e6db74">&#39;&#39;</span>):
</span></span><span style="display:flex;"><span>        print (piece)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># Lambda</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">with</span> open(<span style="color:#e6db74">&#39;test.json&#39;</span>) <span style="color:#66d9ef">as</span> f:
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">for</span> piece <span style="color:#f92672">in</span> iter(<span style="color:#66d9ef">lambda</span>: f<span style="color:#f92672">.</span>read(CHUNK_SIZE), <span style="color:#e6db74">&#39;&#39;</span>):
</span></span><span style="display:flex;"><span>        print (piece)
</span></span></code></pre></div><p>for-else和try-else语法</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span>is_for_finished <span style="color:#f92672">=</span> <span style="color:#66d9ef">True</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">try</span>:
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">for</span> item <span style="color:#f92672">in</span> array:
</span></span><span style="display:flex;"><span>        print (item)
</span></span><span style="display:flex;"><span>        <span style="color:#75715e"># raise Exception</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">except</span>:
</span></span><span style="display:flex;"><span>    is_for_finished <span style="color:#f92672">=</span> <span style="color:#66d9ef">False</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">if</span> is_for_finished <span style="color:#f92672">is</span> <span style="color:#66d9ef">True</span>:
</span></span><span style="display:flex;"><span>    print (<span style="color:#e6db74">&#39;complete&#39;</span>)
</span></span><span style="display:flex;"><span>    
</span></span><span style="display:flex;"><span><span style="color:#75715e"># Pythonic</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">for</span> item <span style="color:#f92672">in</span> array:
</span></span><span style="display:flex;"><span>    print (item)
</span></span><span style="display:flex;"><span>    <span style="color:#75715e"># raise Exception</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">else</span>:
</span></span><span style="display:flex;"><span>    print (<span style="color:#e6db74">&#39;complete&#39;</span>)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">try</span>:
</span></span><span style="display:flex;"><span>    print (<span style="color:#e6db74">&#39;try&#39;</span>)
</span></span><span style="display:flex;"><span>    <span style="color:#75715e"># raise Exception</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">except</span> <span style="color:#a6e22e">Exception</span>:
</span></span><span style="display:flex;"><span>    print (<span style="color:#e6db74">&#39;exception&#39;</span>)
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">else</span>:
</span></span><span style="display:flex;"><span>    print (<span style="color:#e6db74">&#39;complete&#39;</span>)
</span></span></code></pre></div><p>函数参数解压</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span><span style="color:#66d9ef">def</span> <span style="color:#a6e22e">draw_point</span>(x, y):
</span></span><span style="display:flex;"><span>    <span style="color:#75715e"># do some magic</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>point_foo <span style="color:#f92672">=</span> (<span style="color:#ae81ff">3</span>, <span style="color:#ae81ff">4</span>)
</span></span><span style="display:flex;"><span>point_bar <span style="color:#f92672">=</span> {<span style="color:#e6db74">&#39;y&#39;</span>: <span style="color:#ae81ff">3</span>, <span style="color:#e6db74">&#39;x&#39;</span>: <span style="color:#ae81ff">2</span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>draw_point(<span style="color:#f92672">*</span>point_foo)
</span></span><span style="display:flex;"><span>draw_point(<span style="color:#f92672">**</span>point_bar)
</span></span></code></pre></div><p>列表/元组解压</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span>first, second, <span style="color:#f92672">*</span>rest <span style="color:#f92672">=</span> (<span style="color:#ae81ff">1</span>,<span style="color:#ae81ff">2</span>,<span style="color:#ae81ff">3</span>,<span style="color:#ae81ff">4</span>,<span style="color:#ae81ff">5</span>,<span style="color:#ae81ff">6</span>,<span style="color:#ae81ff">7</span>,<span style="color:#ae81ff">8</span>)
</span></span></code></pre></div><p>&ldquo;Print To&quot;语法</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span>print (<span style="color:#e6db74">&#34;hello world&#34;</span>, file<span style="color:#f92672">=</span>open(<span style="color:#e6db74">&#34;myfile&#34;</span>, <span style="color:#e6db74">&#34;w&#34;</span>))
</span></span></code></pre></div><p>字典缺省值</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span>d <span style="color:#f92672">=</span> {}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">try</span>:
</span></span><span style="display:flex;"><span>    d[<span style="color:#e6db74">&#39;count&#39;</span>] <span style="color:#f92672">=</span> d[<span style="color:#e6db74">&#39;count&#39;</span>] <span style="color:#f92672">+</span> <span style="color:#ae81ff">1</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">except</span> <span style="color:#a6e22e">KeyError</span>:
</span></span><span style="display:flex;"><span>    d[<span style="color:#e6db74">&#39;count&#39;</span>] <span style="color:#f92672">=</span> <span style="color:#ae81ff">0</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># Pythonic</span>
</span></span><span style="display:flex;"><span>d[<span style="color:#e6db74">&#39;count&#39;</span>] <span style="color:#f92672">=</span> d<span style="color:#f92672">.</span>get(<span style="color:#e6db74">&#39;count&#39;</span>, <span style="color:#ae81ff">0</span>) <span style="color:#f92672">+</span> <span style="color:#ae81ff">1</span>
</span></span></code></pre></div><p>链式比较符</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span><span style="color:#66d9ef">if</span> x <span style="color:#f92672">&lt;</span> <span style="color:#ae81ff">100</span> <span style="color:#f92672">and</span> x <span style="color:#f92672">&gt;</span> <span style="color:#ae81ff">0</span>:
</span></span><span style="display:flex;"><span>    print(x)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># Pythonic</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">if</span> <span style="color:#ae81ff">0</span> <span style="color:#f92672">&lt;</span> x <span style="color:#f92672">&lt;</span> <span style="color:#ae81ff">100</span>:
</span></span><span style="display:flex;"><span>    print(x)
</span></span></code></pre></div><p>多行字符串</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span>s <span style="color:#f92672">=</span> (<span style="color:#e6db74">&#34;longlongstringiii&#34;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#e6db74">&#34;iiiiiiiii&#34;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#e6db74">&#34;iiiiiii&#34;</span>)
</span></span></code></pre></div><p>in表达式</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span><span style="color:#66d9ef">if</span> <span style="color:#e6db74">&#39;string&#39;</span><span style="color:#f92672">.</span>find(<span style="color:#e6db74">&#39;ring&#39;</span>) <span style="color:#f92672">&gt;</span> <span style="color:#ae81ff">0</span>:
</span></span><span style="display:flex;"><span>    print (<span style="color:#e6db74">&#39;find&#39;</span>)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># Pythonic</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">if</span> <span style="color:#e6db74">&#39;ring&#39;</span> <span style="color:#f92672">in</span> <span style="color:#e6db74">&#39;string&#39;</span>:
</span></span><span style="display:flex;"><span>    print (<span style="color:#e6db74">&#39;find&#39;</span>)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">for</span> r <span style="color:#f92672">in</span> [<span style="color:#e6db74">&#39;ring&#39;</span>, <span style="color:#e6db74">&#39;ring1&#39;</span>, <span style="color:#e6db74">&#39;ring2&#39;</span>]:
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">if</span> r <span style="color:#f92672">==</span> <span style="color:#e6db74">&#39;ring&#39;</span>:
</span></span><span style="display:flex;"><span>        print (<span style="color:#e6db74">&#39;find&#39;</span>)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># Pythonic</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">if</span> <span style="color:#e6db74">&#39;ring&#39;</span> <span style="color:#f92672">in</span> [<span style="color:#e6db74">&#39;ring&#39;</span>, <span style="color:#e6db74">&#39;ring1&#39;</span>, <span style="color:#e6db74">&#39;ring2&#39;</span>]:
</span></span><span style="display:flex;"><span>    print(<span style="color:#e6db74">&#39;find&#39;</span>)
</span></span></code></pre></div><p>字符串连接</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span>array <span style="color:#f92672">=</span> [<span style="color:#e6db74">&#39;a&#39;</span>, <span style="color:#e6db74">&#39;b&#39;</span>, <span style="color:#e6db74">&#39;c&#39;</span>, <span style="color:#e6db74">&#39;d&#39;</span>, <span style="color:#e6db74">&#39;e&#39;</span>]
</span></span><span style="display:flex;"><span>s <span style="color:#f92672">=</span> array[<span style="color:#ae81ff">0</span>]
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">for</span> char <span style="color:#f92672">in</span> array[<span style="color:#ae81ff">1</span>:]:
</span></span><span style="display:flex;"><span>    s <span style="color:#f92672">+=</span> <span style="color:#e6db74">&#39;,&#39;</span> <span style="color:#f92672">+</span> char
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># Pythonic</span>
</span></span><span style="display:flex;"><span>s <span style="color:#f92672">=</span> <span style="color:#e6db74">&#39;,&#39;</span><span style="color:#f92672">.</span>join(array)
</span></span></code></pre></div><p>列表合并字典</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span>keys <span style="color:#f92672">=</span> [<span style="color:#e6db74">&#39;a&#39;</span>, <span style="color:#e6db74">&#39;b&#39;</span>, <span style="color:#e6db74">&#39;c&#39;</span>]
</span></span><span style="display:flex;"><span>values <span style="color:#f92672">=</span> [<span style="color:#ae81ff">1</span>, <span style="color:#ae81ff">2</span>, <span style="color:#ae81ff">3</span>]
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>d <span style="color:#f92672">=</span> {}
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">for</span> key, value <span style="color:#f92672">in</span> zip(keys, values):
</span></span><span style="display:flex;"><span>    d[key] <span style="color:#f92672">=</span> value
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># Better</span>
</span></span><span style="display:flex;"><span>d <span style="color:#f92672">=</span> dict(zip(keys, values))
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># Pythonic</span>
</span></span><span style="display:flex;"><span>d <span style="color:#f92672">=</span> {key: value <span style="color:#66d9ef">for</span> key, value <span style="color:#f92672">in</span> zip(keys, values)}
</span></span></code></pre></div><p>all和any</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span>flag <span style="color:#f92672">=</span> <span style="color:#66d9ef">True</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">for</span> cond <span style="color:#f92672">in</span> conditions:
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">if</span> cond <span style="color:#f92672">is</span> <span style="color:#66d9ef">False</span>:
</span></span><span style="display:flex;"><span>        flag <span style="color:#f92672">=</span> <span style="color:#66d9ef">False</span>
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">break</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># Pythonic</span>
</span></span><span style="display:flex;"><span>flag <span style="color:#f92672">=</span> all(conditions)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>flag <span style="color:#f92672">=</span> <span style="color:#66d9ef">False</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">for</span> cond <span style="color:#f92672">in</span> conditions:
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">if</span> cond <span style="color:#f92672">is</span> <span style="color:#66d9ef">True</span>:
</span></span><span style="display:flex;"><span>        flag <span style="color:#f92672">=</span> <span style="color:#66d9ef">True</span>
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">break</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># Pythonic</span>
</span></span><span style="display:flex;"><span>flag <span style="color:#f92672">=</span> any(conditions)
</span></span></code></pre></div><p>or</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span>not_null_string <span style="color:#f92672">=</span> <span style="color:#e6db74">&#39;&#39;</span> <span style="color:#f92672">or</span> <span style="color:#e6db74">&#39;string1&#39;</span> <span style="color:#f92672">or</span> <span style="color:#e6db74">&#39;string2&#39;</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># string1</span>
</span></span></code></pre></div><p>方法提取</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span><span style="color:#66d9ef">for</span> item <span style="color:#f92672">in</span> [<span style="color:#e6db74">&#39;b&#39;</span>, <span style="color:#e6db74">&#39;c&#39;</span>]:
</span></span><span style="display:flex;"><span>    array<span style="color:#f92672">.</span>append(item)
</span></span><span style="display:flex;"><span><span style="color:#75715e"># Faster</span>
</span></span><span style="display:flex;"><span>append <span style="color:#f92672">=</span> array<span style="color:#f92672">.</span>append
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">for</span> item <span style="color:#f92672">in</span> [<span style="color:#e6db74">&#39;b&#39;</span>, <span style="color:#e6db74">&#39;c&#39;</span>]:
</span></span><span style="display:flex;"><span>    append(item)
</span></span></code></pre></div><p>单例模式</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span><span style="color:#f92672">from</span> [module] <span style="color:#f92672">import</span> [single_instance]
</span></span></code></pre></div><p>用&lt;&gt;代替!=</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span>In [<span style="color:#ae81ff">1</span>]: <span style="color:#f92672">from</span> __future__ <span style="color:#f92672">import</span> barry_as_FLUFL
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>In [<span style="color:#ae81ff">2</span>]: <span style="color:#ae81ff">1</span> <span style="color:#f92672">==</span> <span style="color:#ae81ff">1</span>
</span></span><span style="display:flex;"><span>Out[<span style="color:#ae81ff">2</span>]: <span style="color:#66d9ef">True</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>In [<span style="color:#ae81ff">3</span>]: <span style="color:#ae81ff">1</span> <span style="color:#f92672">!=</span> <span style="color:#ae81ff">1</span>
</span></span><span style="display:flex;"><span>  File <span style="color:#e6db74">&#34;&lt;ipython-input-3-1ec724d2c3b1&gt;&#34;</span>, line <span style="color:#ae81ff">1</span>
</span></span><span style="display:flex;"><span>    <span style="color:#ae81ff">1</span> <span style="color:#f92672">!=</span> <span style="color:#ae81ff">1</span>
</span></span><span style="display:flex;"><span>       <span style="color:#f92672">^</span>
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">SyntaxError</span>: invalid syntax
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>In [<span style="color:#ae81ff">4</span>]: <span style="color:#ae81ff">1</span> <span style="color:#f92672">&lt;&gt;</span> <span style="color:#ae81ff">1</span>
</span></span><span style="display:flex;"><span>Out[<span style="color:#ae81ff">4</span>]: <span style="color:#66d9ef">False</span>
</span></span></code></pre></div><p>格式化一个json文件</p>
<pre tabindex="0"><code>python -m json.tool test.json
echo &#39;{&#34;json&#34;:&#34;obj&#34;}&#39; | python -m json.tool # 管道
</code></pre><p>开启本地目录的HTTP服务器</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span>python3 <span style="color:#f92672">-</span>m http<span style="color:#f92672">.</span>server <span style="color:#ae81ff">8080</span>
</span></span></code></pre></div><div class="gdoc-page__anchorwrap">
    <h2 id="43-陷阱">
        4.3 陷阱
        <a data-clipboard-text="https://blog.wujy.vip/posts/a_bit_of_python/#43-陷阱" class="gdoc-page__anchor gdoc-page__anchor--right clip" title="Anchor to: 4.3 陷阱" aria-label="Anchor to: 4.3 陷阱" href="#43-%e9%99%b7%e9%98%b1">
            <svg class="gdoc-icon gdoc_link"><use xlink:href="#gdoc_link"></use></svg>
        </a>
    </h2>
</div>
<div class="gdoc-page__anchorwrap">
    <h3 id="431-可变的默认参数">
        4.3.1 可变的默认参数
        <a data-clipboard-text="https://blog.wujy.vip/posts/a_bit_of_python/#431-可变的默认参数" class="gdoc-page__anchor gdoc-page__anchor--right clip" title="Anchor to: 4.3.1 可变的默认参数" aria-label="Anchor to: 4.3.1 可变的默认参数" href="#431-%e5%8f%af%e5%8f%98%e7%9a%84%e9%bb%98%e8%ae%a4%e5%8f%82%e6%95%b0">
            <svg class="gdoc-icon gdoc_link"><use xlink:href="#gdoc_link"></use></svg>
        </a>
    </h3>
</div>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span><span style="color:#66d9ef">def</span> <span style="color:#a6e22e">append_to</span>(element, to<span style="color:#f92672">=</span>[]):
</span></span><span style="display:flex;"><span>    to<span style="color:#f92672">.</span>append(element)
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">return</span> to
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>my_list <span style="color:#f92672">=</span> append_to(<span style="color:#ae81ff">12</span>)
</span></span><span style="display:flex;"><span>print(my_list)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>my_other_list <span style="color:#f92672">=</span> append_to(<span style="color:#ae81ff">42</span>)
</span></span><span style="display:flex;"><span>print(my_other_list)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># [12]</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># [12, 42]</span>
</span></span></code></pre></div><div class="gdoc-page__anchorwrap">
    <h3 id="432-闭包的延迟绑定">
        4.3.2 闭包的延迟绑定
        <a data-clipboard-text="https://blog.wujy.vip/posts/a_bit_of_python/#432-闭包的延迟绑定" class="gdoc-page__anchor gdoc-page__anchor--right clip" title="Anchor to: 4.3.2 闭包的延迟绑定" aria-label="Anchor to: 4.3.2 闭包的延迟绑定" href="#432-%e9%97%ad%e5%8c%85%e7%9a%84%e5%bb%b6%e8%bf%9f%e7%bb%91%e5%ae%9a">
            <svg class="gdoc-icon gdoc_link"><use xlink:href="#gdoc_link"></use></svg>
        </a>
    </h3>
</div>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span><span style="color:#66d9ef">def</span> <span style="color:#a6e22e">create_multipliers</span>():
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">return</span> [<span style="color:#66d9ef">lambda</span> x : i <span style="color:#f92672">*</span> x <span style="color:#66d9ef">for</span> i <span style="color:#f92672">in</span> range(<span style="color:#ae81ff">5</span>)]
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">for</span> multiplier <span style="color:#f92672">in</span> create_multipliers():
</span></span><span style="display:flex;"><span>    print multiplier(<span style="color:#ae81ff">2</span>)
</span></span><span style="display:flex;"><span>    
</span></span><span style="display:flex;"><span><span style="color:#75715e"># 8</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># 8</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># 8</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># 8</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># 8</span>
</span></span></code></pre></div><div class="gdoc-page__anchorwrap">
    <h2 id="44-小整数缓存">
        4.4 小整数缓存
        <a data-clipboard-text="https://blog.wujy.vip/posts/a_bit_of_python/#44-小整数缓存" class="gdoc-page__anchor gdoc-page__anchor--right clip" title="Anchor to: 4.4 小整数缓存" aria-label="Anchor to: 4.4 小整数缓存" href="#44-%e5%b0%8f%e6%95%b4%e6%95%b0%e7%bc%93%e5%ad%98">
            <svg class="gdoc-icon gdoc_link"><use xlink:href="#gdoc_link"></use></svg>
        </a>
    </h2>
</div>
<p>在下面这个例子中， 两个值相等的整形变量在两次比较地址时出现了不一样的情况，原因时因为Python会把频繁使用的小整数放在内存池中，因此在Python中使用范围在[-5,256]的数字时都会得到相同的内存地址。</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span>a <span style="color:#f92672">=</span> <span style="color:#ae81ff">256</span>
</span></span><span style="display:flex;"><span>b <span style="color:#f92672">=</span> <span style="color:#ae81ff">256</span>
</span></span><span style="display:flex;"><span>id(a) <span style="color:#f92672">==</span> id(b)
</span></span><span style="display:flex;"><span><span style="color:#75715e"># True</span>
</span></span><span style="display:flex;"><span>a <span style="color:#f92672">=</span> <span style="color:#ae81ff">257</span>
</span></span><span style="display:flex;"><span>b <span style="color:#f92672">=</span> <span style="color:#ae81ff">257</span>
</span></span><span style="display:flex;"><span>id(a) <span style="color:#f92672">==</span> id(b)
</span></span><span style="display:flex;"><span><span style="color:#75715e"># False</span>
</span></span></code></pre></div><div class="gdoc-page__anchorwrap">
    <h2 id="45-gil">
        4.5 GIL
        <a data-clipboard-text="https://blog.wujy.vip/posts/a_bit_of_python/#45-gil" class="gdoc-page__anchor gdoc-page__anchor--right clip" title="Anchor to: 4.5 GIL" aria-label="Anchor to: 4.5 GIL" href="#45-gil">
            <svg class="gdoc-icon gdoc_link"><use xlink:href="#gdoc_link"></use></svg>
        </a>
    </h2>
</div>
<p>受制于GIL(Global Interpreter Lock，全局解释锁）的存在，Python进程中的多线程无法利用多核的计算资源，同一时间内只有一个线程可以持有全局解释锁，执行代码指令。</p>
<p>根据Python虚拟机中的执行机制，每当线程执行若干条虚拟指令后，时间片就会调度给另一个线程。这个间隔时间可以用<code>sys</code>模块的<code>getswitchinterval</code>函数看到：</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span>sys<span style="color:#f92672">.</span>getswitchinterval()
</span></span><span style="display:flex;"><span><span style="color:#75715e"># 0.005</span>
</span></span></code></pre></div><p>以上输出表明，每隔0.005秒，这种调度便会发生一次。</p>
<p>所以可以看到，由于这种机制的存在，下面这两段代码在相同环境下，很可能是带线程的版本执行时间更长：</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span><span style="color:#66d9ef">def</span> <span style="color:#a6e22e">count</span>(n):
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">while</span> n <span style="color:#f92672">&gt;</span> <span style="color:#ae81ff">0</span>:
</span></span><span style="display:flex;"><span>        n <span style="color:#f92672">-=</span> <span style="color:#ae81ff">1</span>
</span></span><span style="display:flex;"><span> 
</span></span><span style="display:flex;"><span>count(<span style="color:#ae81ff">100000000</span>)
</span></span><span style="display:flex;"><span>count(<span style="color:#ae81ff">100000000</span>)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>t1 <span style="color:#f92672">=</span> Thread(target<span style="color:#f92672">=</span>count,args<span style="color:#f92672">=</span>(<span style="color:#ae81ff">100000000</span>,))
</span></span><span style="display:flex;"><span>t1<span style="color:#f92672">.</span>start()
</span></span><span style="display:flex;"><span>t2 <span style="color:#f92672">=</span> Thread(target<span style="color:#f92672">=</span>count,args<span style="color:#f92672">=</span>(<span style="color:#ae81ff">100000000</span>,))
</span></span><span style="display:flex;"><span>t2<span style="color:#f92672">.</span>start()
</span></span><span style="display:flex;"><span>t1<span style="color:#f92672">.</span>join();
</span></span><span style="display:flex;"><span>t2<span style="color:#f92672">.</span>join()
</span></span></code></pre></div><p>在Python中多线程更适用于IO密集型的任务，比如网络任务，异步请求等，如果需要获得并行的能力，应该使用多进程模块。</p>
<p>在一个Python进程当中，可以有多个解释器的存在，一个解释器中保存了指向其他解释器的指针，以及一个指向线程状态表的指针，每当创建一个线程，就会往状态表中添加一条记录，线程状态(tstate)对应了真实的线程，还包含了其对应的栈帧信息。</p>
<div class="gdoc-page__anchorwrap">
    <h2 id="46-池化">
        4.6 池化
        <a data-clipboard-text="https://blog.wujy.vip/posts/a_bit_of_python/#46-池化" class="gdoc-page__anchor gdoc-page__anchor--right clip" title="Anchor to: 4.6 池化" aria-label="Anchor to: 4.6 池化" href="#46-%e6%b1%a0%e5%8c%96">
            <svg class="gdoc-icon gdoc_link"><use xlink:href="#gdoc_link"></use></svg>
        </a>
    </h2>
</div>
<p>在Python的实现里广泛使用了内存池技术来提高性能，一些相同且无特殊意义的对象也常被池化，减少了对象数量以及内存占用。</p>
<p>举其中一个例子，有A，B，C三个类，其中只有C定义了文档字符串，这时候用<code>A.__doc__ is B.__doc__</code>就能发现，它们使用的内存地址是一样的，说明类的<code>__doc__</code>属性默认都被池化了，而再执行<code>A.__doc__ is C.__doc__</code>就会看到结果是<code>False</code>，说明只有定义了<code>doc-string</code>的时候，<code>__doc__</code>属性才会被分配新的内存。</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span><span style="color:#66d9ef">class</span> <span style="color:#a6e22e">A</span>: <span style="color:#66d9ef">pass</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">class</span> <span style="color:#a6e22e">B</span>: <span style="color:#66d9ef">pass</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">class</span> <span style="color:#a6e22e">C</span>:
</span></span><span style="display:flex;"><span>    <span style="color:#e6db74">&#39;&#39;&#39;doc-string&#39;&#39;&#39;</span>
</span></span><span style="display:flex;"><span>	<span style="color:#66d9ef">pass</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>A <span style="color:#f92672">is</span> B
</span></span><span style="display:flex;"><span><span style="color:#75715e"># False</span>
</span></span><span style="display:flex;"><span>A<span style="color:#f92672">.</span>__doc__ <span style="color:#f92672">is</span> B<span style="color:#f92672">.</span>__doc__
</span></span><span style="display:flex;"><span><span style="color:#75715e"># True</span>
</span></span><span style="display:flex;"><span>A<span style="color:#f92672">.</span>__doc__ <span style="color:#f92672">is</span> C<span style="color:#f92672">.</span>__doc__
</span></span><span style="display:flex;"><span><span style="color:#75715e"># False</span>
</span></span></code></pre></div><p>对于简单字符串，Python会将其放进内存池中，当字符串的引用变为0时，再把它的内存释放。</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span>a <span style="color:#f92672">=</span> <span style="color:#e6db74">&#39;HelloWorld&#39;</span>
</span></span><span style="display:flex;"><span>b <span style="color:#f92672">=</span> <span style="color:#e6db74">&#39;HelloWorld&#39;</span>
</span></span><span style="display:flex;"><span>a <span style="color:#f92672">is</span> b
</span></span><span style="display:flex;"><span><span style="color:#75715e"># True</span>
</span></span></code></pre></div><p>但再看下面这个例子，在字符串中间插入一个空格后，虽然<code>a</code>和<code>b</code>还是相同的值，但是内存地址却是不一样的：</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span>a <span style="color:#f92672">=</span> <span style="color:#e6db74">&#39;Hello World&#39;</span>
</span></span><span style="display:flex;"><span>b <span style="color:#f92672">=</span> <span style="color:#e6db74">&#39;Hello World&#39;</span>
</span></span><span style="display:flex;"><span>a <span style="color:#f92672">is</span> b
</span></span><span style="display:flex;"><span><span style="color:#75715e"># False</span>
</span></span><span style="display:flex;"><span>a <span style="color:#f92672">=</span> <span style="color:#e6db74">&#39; &#39;</span>
</span></span><span style="display:flex;"><span>b <span style="color:#f92672">=</span> <span style="color:#e6db74">&#39; &#39;</span>
</span></span><span style="display:flex;"><span>a <span style="color:#f92672">is</span> b
</span></span><span style="display:flex;"><span><span style="color:#75715e"># True</span>
</span></span></code></pre></div><p>这是因为Python认为的简单字符串一般只包含字母或数字，因此对于这种带有额外字符的字符串，Python是不会将其池化的。</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span>a <span style="color:#f92672">=</span> <span style="color:#e6db74">&#39;汉字&#39;</span>
</span></span><span style="display:flex;"><span>b <span style="color:#f92672">=</span> <span style="color:#e6db74">&#39;汉字&#39;</span>
</span></span><span style="display:flex;"><span>a <span style="color:#f92672">is</span> b
</span></span><span style="display:flex;"><span><span style="color:#75715e"># False</span>
</span></span></code></pre></div><p>在Python 3.x中，可以用<code>sys</code>模块的<code>intern</code>方法来给程序运行期间动态生成的字符串池化。</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span><span style="color:#f92672">import</span> sys
</span></span><span style="display:flex;"><span>a <span style="color:#f92672">=</span> <span style="color:#e6db74">&#39;汉字&#39;</span>
</span></span><span style="display:flex;"><span>b <span style="color:#f92672">=</span> <span style="color:#e6db74">&#39;汉字&#39;</span>
</span></span><span style="display:flex;"><span>a <span style="color:#f92672">=</span> sys<span style="color:#f92672">.</span>intern(a)
</span></span><span style="display:flex;"><span>b <span style="color:#f92672">=</span> sys<span style="color:#f92672">.</span>intern(b)
</span></span><span style="display:flex;"><span>a <span style="color:#f92672">is</span> b
</span></span><span style="display:flex;"><span><span style="color:#75715e"># True</span>
</span></span></code></pre></div><div class="gdoc-page__anchorwrap">
    <h2 id="47-跟踪函数">
        4.7 跟踪函数
        <a data-clipboard-text="https://blog.wujy.vip/posts/a_bit_of_python/#47-跟踪函数" class="gdoc-page__anchor gdoc-page__anchor--right clip" title="Anchor to: 4.7 跟踪函数" aria-label="Anchor to: 4.7 跟踪函数" href="#47-%e8%b7%9f%e8%b8%aa%e5%87%bd%e6%95%b0">
            <svg class="gdoc-icon gdoc_link"><use xlink:href="#gdoc_link"></use></svg>
        </a>
    </h2>
</div>
<p>利用<code>sys</code>模块的<code>settrace</code>函数可以注册线程的跟踪函数，跟踪函数应具有三个参数：<code>frame</code>，<code>event</code> 和<code>arg</code>。</p>
<ul>
<li>frame：当前的堆栈帧。</li>
<li>event：一个代表跟踪事件字符串，其值为&rsquo;call&rsquo;、 &rsquo;line&rsquo;、 &lsquo;return&rsquo;、 &rsquo;exception&rsquo;、 &lsquo;c_call&rsquo;、 &lsquo;c_return&rsquo;或&rsquo;c_exception&rsquo;。</li>
<li>arg：在event不同的时候有不一样的含义。</li>
</ul>
<p>在下面这个例子中，给全局设置了一个跟踪函数，当程序发生调用事件（例如一个函数调用了另一个函数）时，Python便会回调跟踪函数，把函数的栈帧，事件类型以及时间类型的参数传入钩子函数中。</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span><span style="color:#66d9ef">class</span> <span style="color:#a6e22e">TreeStdout</span>:
</span></span><span style="display:flex;"><span>    <span style="color:#e6db74">&#34;&#34;&#34;把标准输出显示出函数调用层级的关系
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">    &#34;&#34;&#34;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">def</span> __init__(self, fill_symbol<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;</span><span style="color:#ae81ff">\t</span><span style="color:#e6db74">&#34;</span>):
</span></span><span style="display:flex;"><span>        self<span style="color:#f92672">.</span>stack <span style="color:#f92672">=</span> []
</span></span><span style="display:flex;"><span>        self<span style="color:#f92672">.</span>old_write <span style="color:#f92672">=</span> sys<span style="color:#f92672">.</span>stdout<span style="color:#f92672">.</span>write
</span></span><span style="display:flex;"><span>        self<span style="color:#f92672">.</span>symbol <span style="color:#f92672">=</span> fill_symbol
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">def</span> <span style="color:#a6e22e">_get_stdout_writer</span>(self, depth):
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">def</span> <span style="color:#a6e22e">_writer</span>(data):
</span></span><span style="display:flex;"><span>            <span style="color:#66d9ef">if</span> data <span style="color:#f92672">!=</span> <span style="color:#e6db74">&#34;</span><span style="color:#ae81ff">\n</span><span style="color:#e6db74">&#34;</span>:
</span></span><span style="display:flex;"><span>                self<span style="color:#f92672">.</span>old_write(self<span style="color:#f92672">.</span>symbol <span style="color:#f92672">*</span> depth <span style="color:#f92672">+</span> data)
</span></span><span style="display:flex;"><span>            <span style="color:#66d9ef">else</span>:
</span></span><span style="display:flex;"><span>                self<span style="color:#f92672">.</span>old_write(data)
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">return</span> _writer
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">def</span> <span style="color:#a6e22e">_trace_calls</span>(self, frame, event, arg):
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">if</span> event <span style="color:#f92672">==</span> <span style="color:#e6db74">&#39;return&#39;</span>:
</span></span><span style="display:flex;"><span>            self<span style="color:#f92672">.</span>stack<span style="color:#f92672">.</span>pop()
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">if</span> event <span style="color:#f92672">!=</span> <span style="color:#e6db74">&#39;call&#39;</span>:
</span></span><span style="display:flex;"><span>            <span style="color:#66d9ef">return</span>
</span></span><span style="display:flex;"><span>        co <span style="color:#f92672">=</span> frame<span style="color:#f92672">.</span>f_code
</span></span><span style="display:flex;"><span>        func_name <span style="color:#f92672">=</span> co<span style="color:#f92672">.</span>co_name
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">if</span> func_name <span style="color:#f92672">==</span> <span style="color:#e6db74">&#39;write&#39;</span>:
</span></span><span style="display:flex;"><span>            <span style="color:#66d9ef">return</span>
</span></span><span style="display:flex;"><span>        caller <span style="color:#f92672">=</span> frame<span style="color:#f92672">.</span>f_back
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">if</span> caller <span style="color:#f92672">is</span> <span style="color:#66d9ef">None</span>:
</span></span><span style="display:flex;"><span>            <span style="color:#66d9ef">return</span>
</span></span><span style="display:flex;"><span>        caller_name <span style="color:#f92672">=</span> caller<span style="color:#f92672">.</span>f_code<span style="color:#f92672">.</span>co_name
</span></span><span style="display:flex;"><span>        self<span style="color:#f92672">.</span>stack<span style="color:#f92672">.</span>append(caller_name)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        depth <span style="color:#f92672">=</span> len(self<span style="color:#f92672">.</span>stack) <span style="color:#f92672">-</span> <span style="color:#ae81ff">1</span>
</span></span><span style="display:flex;"><span>        sys<span style="color:#f92672">.</span>stdout<span style="color:#f92672">.</span>write <span style="color:#f92672">=</span> self<span style="color:#f92672">.</span>_get_stdout_writer(depth)
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">return</span> self<span style="color:#f92672">.</span>_trace_calls
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">def</span> __enter__(self):
</span></span><span style="display:flex;"><span>        sys<span style="color:#f92672">.</span>settrace(self<span style="color:#f92672">.</span>_trace_calls)
</span></span><span style="display:flex;"><span>    
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">def</span> __exit__(self, exc_type, exc_val, exc_tb):
</span></span><span style="display:flex;"><span>        self<span style="color:#f92672">.</span>stack<span style="color:#f92672">.</span>clear()
</span></span><span style="display:flex;"><span>        sys<span style="color:#f92672">.</span>stdout<span style="color:#f92672">.</span>write <span style="color:#f92672">=</span> self<span style="color:#f92672">.</span>old_write
</span></span><span style="display:flex;"><span>        sys<span style="color:#f92672">.</span>settrace(<span style="color:#66d9ef">None</span>)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">def</span> <span style="color:#a6e22e">f</span>():
</span></span><span style="display:flex;"><span>    print(<span style="color:#e6db74">&#39;inside f()&#39;</span>)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">def</span> <span style="color:#a6e22e">d</span>():
</span></span><span style="display:flex;"><span>    print(<span style="color:#e6db74">&#39;inside d()&#39;</span>)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">def</span> <span style="color:#a6e22e">e</span>():
</span></span><span style="display:flex;"><span>    print(<span style="color:#e6db74">&#39;inside e()&#39;</span>)
</span></span><span style="display:flex;"><span>    f()
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">def</span> <span style="color:#a6e22e">c</span>():
</span></span><span style="display:flex;"><span>    print(<span style="color:#e6db74">&#39;inside c()&#39;</span>)
</span></span><span style="display:flex;"><span>    d()
</span></span><span style="display:flex;"><span>    e()
</span></span><span style="display:flex;"><span>    e()
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">def</span> <span style="color:#a6e22e">b</span>():
</span></span><span style="display:flex;"><span>    print(<span style="color:#e6db74">&#39;inside b()&#39;</span>)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">def</span> <span style="color:#a6e22e">a</span>():
</span></span><span style="display:flex;"><span>    print(<span style="color:#e6db74">&#39;inside a()&#39;</span>)
</span></span><span style="display:flex;"><span>    b()
</span></span><span style="display:flex;"><span>    c()
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">with</span> TreeStdout():
</span></span><span style="display:flex;"><span>    a()
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># inside a()</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#         inside b()</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#         inside c()</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#                 inside d()</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#                 inside e()</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#                         inside f()</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#                 inside e()</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#                         inside f()</span>
</span></span></code></pre></div><hr>
<p>欢迎学习讨论和交流，如果觉得本文对你有帮助，欢迎点个star，谢谢。</p>

    </section>
  </article>



          <div class="gdoc-page__footer flex flex-wrap justify-between">
            








  
  

  







          </div>
        </div>
      </main>

      <footer class="gdoc-footer">
  <nav class="container flex">
    <div>
      <section class="flex flex-wrap align-center">
        <span class="gdoc-footer__item gdoc-footer__item--row">
          Built with <a href="https://gohugo.io/" class="gdoc-footer__link">Hugo</a> and <svg class="gdoc-icon gdoc_heart"><use xlink:href="#gdoc_heart"></use></svg>

        </span>
        
        
      </section>
      
    </div>
    
      <div class="flex flex-25 justify-end">
        <span class="gdoc-footer__item text-right">
          <a class="gdoc-footer__link fake-link" href="#" aria-label="Back to top">
            <svg class="gdoc-icon gdoc_keyboard_arrow_up">
              <use xlink:href="#gdoc_keyboard_arrow_up"></use>
            </svg>
            <span class="hidden-mobile">Back to top</span>
          </a>
        </span>
      </div>
    
  </nav>
</footer>

    </div>

    
  <script defer src="/js/search-1c4cfb2d.bundle.min.js"></script>

  </body>
</html>
